import{g as Zs}from"../app.e5bb6d6c.js";function wo(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function Ys(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Ws={value:()=>{}};function Pn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zn(n)}function Zn(e){this._=e}function Js(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zn.prototype=Pn.prototype={constructor:Zn,on:function(e,t){var n=this._,r=Js(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Qs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=bo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Qs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ws,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ur="http://www.w3.org/1999/xhtml";const So={svg:"http://www.w3.org/2000/svg",xhtml:Ur,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function ec(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ur&&t.documentElement.namespaceURI===Ur?t.createElement(e):t.createElementNS(n,e)}}function tc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _a(e){var t=xr(e);return(t.local?tc:ec)(t)}function nc(){}function ui(e){return e==null?nc:function(){return this.querySelector(e)}}function rc(e){typeof e!="function"&&(e=ui(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new De(r,this._parents)}function ic(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oc(){return[]}function $a(e){return e==null?oc:function(){return this.querySelectorAll(e)}}function ac(e){return function(){return ic(e.apply(this,arguments))}}function sc(e){typeof e=="function"?e=ac(e):e=$a(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(e.call(c,c.__data__,l,a)),i.push(c));return new De(r,i)}function wa(e){return function(){return this.matches(e)}}function ba(e){return function(t){return t.matches(e)}}var cc=Array.prototype.find;function uc(e){return function(){return cc.call(this.children,e)}}function lc(){return this.firstElementChild}function fc(e){return this.select(e==null?lc:uc(typeof e=="function"?e:ba(e)))}var hc=Array.prototype.filter;function dc(){return Array.from(this.children)}function pc(e){return function(){return hc.call(this.children,e)}}function mc(e){return this.selectAll(e==null?dc:pc(typeof e=="function"?e:ba(e)))}function yc(e){typeof e!="function"&&(e=wa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new De(r,this._parents)}function Sa(e){return new Array(e.length)}function gc(){return new De(this._enter||this._groups.map(Sa),this._parents)}function ar(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ar.prototype={constructor:ar,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vc(e){return function(){return e}}function _c(e,t,n,r,i,o){for(var a=0,s,c=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new ar(e,o[a]);for(;a<c;++a)(s=t[a])&&(i[a]=s)}function $c(e,t,n,r,i,o,a){var s,c,l=new Map,u=t.length,f=o.length,y=new Array(u),m;for(s=0;s<u;++s)(c=t[s])&&(y[s]=m=a.call(c,c.__data__,s,t)+"",l.has(m)?i[s]=c:l.set(m,c));for(s=0;s<f;++s)m=a.call(e,o[s],s,o)+"",(c=l.get(m))?(r[s]=c,c.__data__=o[s],l.delete(m)):n[s]=new ar(e,o[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(y[s])===c&&(i[s]=c)}function wc(e){return e.__data__}function bc(e,t){if(!arguments.length)return Array.from(this,wc);var n=t?$c:_c,r=this._parents,i=this._groups;typeof e!="function"&&(e=vc(e));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],y=f.length,m=Sc(e.call(u,u&&u.__data__,l,r)),$=m.length,_=s[l]=new Array($),p=a[l]=new Array($),h=c[l]=new Array(y);n(u,f,_,p,h,m,t);for(var w=0,b=0,v,O;w<$;++w)if(v=_[w]){for(w>=b&&(b=w+1);!(O=p[b])&&++b<$;);v._next=O||null}}return a=new De(a,r),a._enter=s,a._exit=c,a}function Sc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ec(){return new De(this._exit||this._groups.map(Sa),this._parents)}function xc(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Pc(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],f=l.length,y=s[c]=new Array(f),m,$=0;$<f;++$)(m=l[$]||u[$])&&(y[$]=m);for(;c<i;++c)s[c]=n[c];return new De(s,this._parents)}function Nc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function kc(e){e||(e=Tc);function t(f,y){return f&&y?e(f.__data__,y.__data__):!f-!y}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new De(i,this._parents).order()}function Tc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Cc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Oc(){return Array.from(this)}function Ac(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Mc(){let e=0;for(const t of this)++e;return e}function Rc(){return!this.node()}function Ic(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function Dc(e){return function(){this.removeAttribute(e)}}function jc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zc(e,t){return function(){this.setAttribute(e,t)}}function Vc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qc(e,t){var n=xr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?jc:Dc:typeof t=="function"?n.local?Lc:Fc:n.local?Vc:zc)(n,t))}function Ea(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hc(e){return function(){this.style.removeProperty(e)}}function Uc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Kc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Gc(e,t,n){return arguments.length>1?this.each((t==null?Hc:typeof t=="function"?Kc:Uc)(e,t,n??"")):Kt(this.node(),e)}function Kt(e,t){return e.style.getPropertyValue(t)||Ea(e).getComputedStyle(e,null).getPropertyValue(t)}function Bc(e){return function(){delete this[e]}}function Xc(e,t){return function(){this[e]=t}}function Zc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Yc(e,t){return arguments.length>1?this.each((t==null?Bc:typeof t=="function"?Zc:Xc)(e,t)):this.node()[e]}function xa(e){return e.trim().split(/^|\s+/)}function li(e){return e.classList||new Pa(e)}function Pa(e){this._node=e,this._names=xa(e.getAttribute("class")||"")}Pa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Na(e,t){for(var n=li(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ka(e,t){for(var n=li(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Wc(e){return function(){Na(this,e)}}function Jc(e){return function(){ka(this,e)}}function Qc(e,t){return function(){(t.apply(this,arguments)?Na:ka)(this,e)}}function eu(e,t){var n=xa(e+"");if(arguments.length<2){for(var r=li(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Qc:t?Wc:Jc)(n,t))}function tu(){this.textContent=""}function nu(e){return function(){this.textContent=e}}function ru(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function iu(e){return arguments.length?this.each(e==null?tu:(typeof e=="function"?ru:nu)(e)):this.node().textContent}function ou(){this.innerHTML=""}function au(e){return function(){this.innerHTML=e}}function su(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function cu(e){return arguments.length?this.each(e==null?ou:(typeof e=="function"?su:au)(e)):this.node().innerHTML}function uu(){this.nextSibling&&this.parentNode.appendChild(this)}function lu(){return this.each(uu)}function fu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hu(){return this.each(fu)}function du(e){var t=typeof e=="function"?e:_a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function pu(){return null}function mu(e,t){var n=typeof e=="function"?e:_a(e),r=t==null?pu:typeof t=="function"?t:ui(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yu(){var e=this.parentNode;e&&e.removeChild(this)}function gu(){return this.each(yu)}function vu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _u(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $u(e){return this.select(e?_u:vu)}function wu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bu(e){return function(t){e.call(this,t,this.__data__)}}function Su(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Eu(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function xu(e,t,n){return function(){var r=this.__on,i,o=bu(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Pu(e,t,n){var r=Su(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?xu:Eu,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Ta(e,t,n){var r=Ea(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Nu(e,t){return function(){return Ta(this,e,t)}}function ku(e,t){return function(){return Ta(this,e,t.apply(this,arguments))}}function Tu(e,t){return this.each((typeof t=="function"?ku:Nu)(e,t))}function*Cu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ca=[null];function De(e,t){this._groups=e,this._parents=t}function Nn(){return new De([[document.documentElement]],Ca)}function Ou(){return this}De.prototype=Nn.prototype={constructor:De,select:rc,selectAll:sc,selectChild:fc,selectChildren:mc,filter:yc,data:bc,enter:gc,exit:Ec,join:xc,merge:Pc,selection:Ou,order:Nc,sort:kc,call:Cc,nodes:Oc,node:Ac,size:Mc,empty:Rc,each:Ic,attr:qc,style:Gc,property:Yc,classed:eu,text:iu,html:cu,raise:lu,lower:hu,append:du,insert:mu,remove:gu,clone:$u,datum:wu,on:Pu,dispatch:Tu,[Symbol.iterator]:Cu};function Ce(e){return typeof e=="string"?new De([[document.querySelector(e)]],[document.documentElement]):new De([[e]],Ca)}function Au(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ot(e,t){if(e=Au(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mu={passive:!1},$n={capture:!0,passive:!1};function Ir(e){e.stopImmediatePropagation()}function Lt(e){e.preventDefault(),e.stopImmediatePropagation()}function Oa(e){var t=e.document.documentElement,n=Ce(e).on("dragstart.drag",Lt,$n);"onselectstart"in t?n.on("selectstart.drag",Lt,$n):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Aa(e,t){var n=e.document.documentElement,r=Ce(e).on("dragstart.drag",null);t&&(r.on("click.drag",Lt,$n),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zn=e=>()=>e;function Kr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Kr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ru(e){return!e.ctrlKey&&!e.button}function Iu(){return this.parentNode}function Du(e,t){return t??{x:e.x,y:e.y}}function ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function zu(){var e=Ru,t=Iu,n=Du,r=ju,i={},o=Pn("start","drag","end"),a=0,s,c,l,u,f=0;function y(v){v.on("mousedown.drag",m).filter(r).on("touchstart.drag",p).on("touchmove.drag",h,Mu).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(v,O){if(!(u||!e.call(this,v,O))){var P=b(this,t.call(this,v,O),v,O,"mouse");P&&(Ce(v.view).on("mousemove.drag",$,$n).on("mouseup.drag",_,$n),Oa(v.view),Ir(v),l=!1,s=v.clientX,c=v.clientY,P("start",v))}}function $(v){if(Lt(v),!l){var O=v.clientX-s,P=v.clientY-c;l=O*O+P*P>f}i.mouse("drag",v)}function _(v){Ce(v.view).on("mousemove.drag mouseup.drag",null),Aa(v.view,l),Lt(v),i.mouse("end",v)}function p(v,O){if(e.call(this,v,O)){var P=v.changedTouches,k=t.call(this,v,O),j=P.length,L,U;for(L=0;L<j;++L)(U=b(this,k,v,O,P[L].identifier,P[L]))&&(Ir(v),U("start",v,P[L]))}}function h(v){var O=v.changedTouches,P=O.length,k,j;for(k=0;k<P;++k)(j=i[O[k].identifier])&&(Lt(v),j("drag",v,O[k]))}function w(v){var O=v.changedTouches,P=O.length,k,j;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<P;++k)(j=i[O[k].identifier])&&(Ir(v),j("end",v,O[k]))}function b(v,O,P,k,j,L){var U=o.copy(),Q=ot(L||P,O),K,ce,T;if((T=n.call(v,new Kr("beforestart",{sourceEvent:P,target:y,identifier:j,active:a,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:U}),k))!=null)return K=T.x-Q[0]||0,ce=T.y-Q[1]||0,function q(z,H,Z){var Y=Q,D;switch(z){case"start":i[j]=q,D=a++;break;case"end":delete i[j],--a;case"drag":Q=ot(Z||H,O),D=a;break}U.call(z,v,new Kr(z,{sourceEvent:H,subject:T,target:y,identifier:j,active:D,x:Q[0]+K,y:Q[1]+ce,dx:Q[0]-Y[0],dy:Q[1]-Y[1],dispatch:U}),k)}}return y.filter=function(v){return arguments.length?(e=typeof v=="function"?v:zn(!!v),y):e},y.container=function(v){return arguments.length?(t=typeof v=="function"?v:zn(v),y):t},y.subject=function(v){return arguments.length?(n=typeof v=="function"?v:zn(v),y):n},y.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:zn(!!v),y):r},y.on=function(){var v=o.on.apply(o,arguments);return v===o?y:v},y.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,y):Math.sqrt(f)},y}function fi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ma(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kn(){}var wn=.7,sr=1/wn,qt="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vu=/^#([0-9a-f]{3,8})$/,Fu=new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),Lu=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),qu=new RegExp(`^rgba\\(${qt},${qt},${qt},${bn}\\)$`),Hu=new RegExp(`^rgba\\(${et},${et},${et},${bn}\\)$`),Uu=new RegExp(`^hsl\\(${bn},${et},${et}\\)$`),Ku=new RegExp(`^hsla\\(${bn},${et},${et},${bn}\\)$`),Eo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fi(kn,Sn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xo,formatHex:xo,formatHex8:Gu,formatHsl:Bu,formatRgb:Po,toString:Po});function xo(){return this.rgb().formatHex()}function Gu(){return this.rgb().formatHex8()}function Bu(){return Ra(this).formatHsl()}function Po(){return this.rgb().formatRgb()}function Sn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?No(t):n===3?new Ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fu.exec(e))?new Ae(t[1],t[2],t[3],1):(t=Lu.exec(e))?new Ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qu.exec(e))?Vn(t[1],t[2],t[3],t[4]):(t=Hu.exec(e))?Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uu.exec(e))?Co(t[1],t[2]/100,t[3]/100,1):(t=Ku.exec(e))?Co(t[1],t[2]/100,t[3]/100,t[4]):Eo.hasOwnProperty(e)?No(Eo[e]):e==="transparent"?new Ae(NaN,NaN,NaN,0):null}function No(e){return new Ae(e>>16&255,e>>8&255,e&255,1)}function Vn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ae(e,t,n,r)}function Xu(e){return e instanceof kn||(e=Sn(e)),e?(e=e.rgb(),new Ae(e.r,e.g,e.b,e.opacity)):new Ae}function Gr(e,t,n,r){return arguments.length===1?Xu(e):new Ae(e,t,n,r??1)}function Ae(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}fi(Ae,Gr,Ma(kn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ae(Pt(this.r),Pt(this.g),Pt(this.b),cr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ko,formatHex:ko,formatHex8:Zu,formatRgb:To,toString:To}));function ko(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function Zu(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function To(){const e=cr(this.opacity);return`${e===1?"rgb(":"rgba("}${Pt(this.r)}, ${Pt(this.g)}, ${Pt(this.b)}${e===1?")":`, ${e})`}`}function cr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xt(e){return e=Pt(e),(e<16?"0":"")+e.toString(16)}function Co(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,r)}function Ra(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof kn||(e=Sn(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new qe(a,s,c,e.opacity)}function Yu(e,t,n,r){return arguments.length===1?Ra(e):new qe(e,t,n,r??1)}function qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}fi(qe,Yu,Ma(kn,{brighter(e){return e=e==null?sr:Math.pow(sr,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wn:Math.pow(wn,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ae(Dr(e>=240?e-240:e+120,i,r),Dr(e,i,r),Dr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qe(Oo(this.h),Fn(this.s),Fn(this.l),cr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cr(this.opacity);return`${e===1?"hsl(":"hsla("}${Oo(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oo(e){return e=(e||0)%360,e<0?e+360:e}function Fn(e){return Math.max(0,Math.min(1,e||0))}function Dr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ia=e=>()=>e;function Wu(e,t){return function(n){return e+n*t}}function Ju(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Qu(e){return(e=+e)==1?Da:function(t,n){return n-t?Ju(t,n,e):Ia(isNaN(t)?n:t)}}function Da(e,t){var n=t-e;return n?Wu(e,n):Ia(isNaN(e)?t:e)}const Ao=function e(t){var n=Qu(t);function r(i,o){var a=n((i=Gr(i)).r,(o=Gr(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Da(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Br=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(Br.source,"g");function el(e){return function(){return e}}function tl(e){return function(t){return e(t)+""}}function nl(e,t){var n=Br.lastIndex=jr.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=Br.exec(e))&&(i=jr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:pt(r,i)})),n=jr.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?tl(c[0].x):el(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}var Mo=180/Math.PI,Xr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ja(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Mo,skewX:Math.atan(c)*Mo,scaleX:a,scaleY:s}}var Ln;function rl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xr:ja(t.a,t.b,t.c,t.d,t.e,t.f)}function il(e){return e==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",e),!(e=Ln.transform.baseVal.consolidate()))?Xr:(e=e.matrix,ja(e.a,e.b,e.c,e.d,e.e,e.f))}function za(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,y,m,$){if(l!==f||u!==y){var _=m.push("translate(",null,t,null,n);$.push({i:_-4,x:pt(l,f)},{i:_-2,x:pt(u,y)})}else(f||y)&&m.push("translate("+f+t+y+n)}function a(l,u,f,y){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),y.push({i:f.push(i(f)+"rotate(",null,r)-2,x:pt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,y){l!==u?y.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,y,m,$){if(l!==f||u!==y){var _=m.push(i(m)+"scale(",null,",",null,")");$.push({i:_-4,x:pt(l,f)},{i:_-2,x:pt(u,y)})}else(f!==1||y!==1)&&m.push(i(m)+"scale("+f+","+y+")")}return function(l,u){var f=[],y=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,y),a(l.rotate,u.rotate,f,y),s(l.skewX,u.skewX,f,y),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,y),l=u=null,function(m){for(var $=-1,_=y.length,p;++$<_;)f[(p=y[$]).i]=p.x(m);return f.join("")}}}var ol=za(rl,"px, ","px)","deg)"),al=za(il,", ",")",")"),sl=1e-12;function Ro(e){return((e=Math.exp(e))+1/e)/2}function cl(e){return((e=Math.exp(e))-1/e)/2}function ul(e){return((e=Math.exp(2*e))-1)/(e+1)}const ll=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],y=a[2],m=u-s,$=f-c,_=m*m+$*$,p,h;if(_<sl)h=Math.log(y/l)/t,p=function(k){return[s+k*m,c+k*$,l*Math.exp(t*k*h)]};else{var w=Math.sqrt(_),b=(y*y-l*l+r*_)/(2*l*n*w),v=(y*y-l*l-r*_)/(2*y*n*w),O=Math.log(Math.sqrt(b*b+1)-b),P=Math.log(Math.sqrt(v*v+1)-v);h=(P-O)/t,p=function(k){var j=k*h,L=Ro(O),U=l/(n*w)*(L*ul(t*j+O)-cl(O));return[s+U*m,c+U*$,l*L/Ro(t*j+O)]}}return p.duration=h*1e3*t/Math.SQRT2,p}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);var Gt=0,fn=0,sn=0,Va=1e3,ur,hn,lr=0,Nt=0,Pr=0,En=typeof performance=="object"&&performance.now?performance:Date,Fa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hi(){return Nt||(Fa(fl),Nt=En.now()+Pr)}function fl(){Nt=0}function fr(){this._call=this._time=this._next=null}fr.prototype=di.prototype={constructor:fr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?hi():+n)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:ur=this,hn=this),this._call=e,this._time=n,Zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zr())}};function di(e,t,n){var r=new fr;return r.restart(e,t,n),r}function hl(){hi(),++Gt;for(var e=ur,t;e;)(t=Nt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gt}function Io(){Nt=(lr=En.now())+Pr,Gt=fn=0;try{hl()}finally{Gt=0,pl(),Nt=0}}function dl(){var e=En.now(),t=e-lr;t>Va&&(Pr-=t,lr=e)}function pl(){for(var e,t=ur,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ur=n);hn=e,Zr(r)}function Zr(e){if(!Gt){fn&&(fn=clearTimeout(fn));var t=e-Nt;t>24?(e<1/0&&(fn=setTimeout(Io,e-En.now()-Pr)),sn&&(sn=clearInterval(sn))):(sn||(lr=En.now(),sn=setInterval(dl,Va)),Gt=1,Fa(Io))}}function Do(e,t,n){var r=new fr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ml=Pn("start","end","cancel","interrupt"),yl=[],La=0,jo=1,Yr=2,Yn=3,zo=4,Wr=5,Wn=6;function Nr(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;gl(e,n,{name:t,index:r,group:i,on:ml,tween:yl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:La})}function pi(e,t){var n=Ke(e,t);if(n.state>La)throw new Error("too late; already scheduled");return n}function tt(e,t){var n=Ke(e,t);if(n.state>Yn)throw new Error("too late; already running");return n}function Ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=di(o,0,n.time);function o(l){n.state=jo,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,f,y,m;if(n.state!==jo)return c();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Yn)return Do(a);m.state===zo?(m.state=Wn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=Wn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(Do(function(){n.state===Yn&&(n.state=zo,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Yr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Yr){for(n.state=Yn,i=new Array(y=n.tween.length),u=0,f=-1;u<y;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=m);i.length=f+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Wr,1),f=-1,y=i.length;++f<y;)i[f].call(e,u);n.state===Wr&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Wn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Jn(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Yr&&r.state<Wr,r.state=Wn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function vl(e){return this.each(function(){Jn(this,e)})}function _l(e,t){var n,r;return function(){var i=tt(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function $l(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=tt(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function wl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ke(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?_l:$l)(n,e,t))}function mi(e,t,n){var r=e._id;return e.each(function(){var i=tt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ke(i,r).value[t]}}function qa(e,t){var n;return(typeof t=="number"?pt:t instanceof Sn?Ao:(n=Sn(t))?(t=n,Ao):nl)(e,t)}function bl(e){return function(){this.removeAttribute(e)}}function Sl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function El(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function xl(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Pl(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function Nl(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function kl(e,t){var n=xr(e),r=n==="transform"?al:qa;return this.attrTween(e,typeof t=="function"?(n.local?Nl:Pl)(n,r,mi(this,"attr."+e,t)):t==null?(n.local?Sl:bl)(n):(n.local?xl:El)(n,r,t))}function Tl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ol(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Cl(e,o)),n}return i._value=t,i}function Al(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Tl(e,o)),n}return i._value=t,i}function Ml(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=xr(e);return this.tween(n,(r.local?Ol:Al)(r,t))}function Rl(e,t){return function(){pi(this,e).delay=+t.apply(this,arguments)}}function Il(e,t){return t=+t,function(){pi(this,e).delay=t}}function Dl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rl:Il)(t,e)):Ke(this.node(),t).delay}function jl(e,t){return function(){tt(this,e).duration=+t.apply(this,arguments)}}function zl(e,t){return t=+t,function(){tt(this,e).duration=t}}function Vl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jl:zl)(t,e)):Ke(this.node(),t).duration}function Fl(e,t){if(typeof t!="function")throw new Error;return function(){tt(this,e).ease=t}}function Ll(e){var t=this._id;return arguments.length?this.each(Fl(t,e)):Ke(this.node(),t).ease}function ql(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;tt(this,e).ease=n}}function Hl(e){if(typeof e!="function")throw new Error;return this.each(ql(this._id,e))}function Ul(e){typeof e!="function"&&(e=wa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new lt(r,this._parents,this._name,this._id)}function Kl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=t[s],l=n[s],u=c.length,f=a[s]=new Array(u),y,m=0;m<u;++m)(y=c[m]||l[m])&&(f[m]=y);for(;s<r;++s)a[s]=t[s];return new lt(a,this._parents,this._name,this._id)}function Gl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bl(e,t,n){var r,i,o=Gl(t)?pi:tt;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function Xl(e,t){var n=this._id;return arguments.length<2?Ke(this.node(),n).on.on(e):this.each(Bl(n,e,t))}function Zl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yl(){return this.on("end.remove",Zl(this._id))}function Wl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ui(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,f,y=0;y<c;++y)(u=s[y])&&(f=e.call(u,u.__data__,y,s))&&("__data__"in u&&(f.__data__=u.__data__),l[y]=f,Nr(l[y],t,n,y,l,Ke(u,n)));return new lt(o,this._parents,t,n)}function Jl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$a(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var y=e.call(u,u.__data__,f,c),m,$=Ke(u,n),_=0,p=y.length;_<p;++_)(m=y[_])&&Nr(m,t,n,_,y,$);o.push(y),a.push(u)}return new lt(o,a,t,n)}var Ql=Nn.prototype.constructor;function ef(){return new Ql(this._groups,this._parents)}function tf(e,t){var n,r,i;return function(){var o=Kt(this,e),a=(this.style.removeProperty(e),Kt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Ha(e){return function(){this.style.removeProperty(e)}}function nf(e,t,n){var r,i=n+"",o;return function(){var a=Kt(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function rf(e,t,n){var r,i,o;return function(){var a=Kt(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Kt(this,e))),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s))}}function of(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var c=tt(this,e),l=c.on,u=c.value[o]==null?s||(s=Ha(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function af(e,t,n){var r=(e+="")=="transform"?ol:qa;return t==null?this.styleTween(e,tf(e,r)).on("end.style."+e,Ha(e)):typeof t=="function"?this.styleTween(e,rf(e,r,mi(this,"style."+e,t))).each(of(this._id,e)):this.styleTween(e,nf(e,r,t),n).on("end.style."+e,null)}function sf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function cf(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&sf(e,a,n)),r}return o._value=t,o}function uf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,cf(e,t,n??""))}function lf(e){return function(){this.textContent=e}}function ff(e){return function(){var t=e(this);this.textContent=t??""}}function hf(e){return this.tween("text",typeof e=="function"?ff(mi(this,"text",e)):lf(e==null?"":e+""))}function df(e){return function(t){this.textContent=e.call(this,t)}}function pf(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&df(i)),t}return r._value=e,r}function mf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pf(e))}function yf(){for(var e=this._name,t=this._id,n=Ua(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=Ke(c,t);Nr(c,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new lt(r,this._parents,e,n)}function gf(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=tt(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),i===0&&o()})}var vf=0;function lt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ua(){return++vf}var it=Nn.prototype;lt.prototype={constructor:lt,select:Wl,selectAll:Jl,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:Ul,merge:Kl,selection:ef,transition:yf,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:Xl,attr:kl,attrTween:Ml,style:af,styleTween:uf,text:hf,textTween:mf,remove:Yl,tween:wl,delay:Dl,duration:Vl,ease:Ll,easeVarying:Hl,end:gf,[Symbol.iterator]:it[Symbol.iterator]};function _f(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yi=3;(function e(t){t=+t;function n(r){return Math.pow(r,t)}return n.exponent=e,n})(yi);(function e(t){t=+t;function n(r){return 1-Math.pow(1-r,t)}return n.exponent=e,n})(yi);var $f=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(yi),wf={time:null,delay:0,duration:250,ease:_f};function bf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Sf(e){var t,n;e instanceof lt?(t=e._id,e=e._name):(t=Ua(),(n=wf).time=hi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&Nr(c,e,t,l,a,n||bf(c,t));return new lt(r,this._parents,e,t)}Nn.prototype.interrupt=vl;Nn.prototype.transition=Sf;function Ef(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Ka(this.cover(t,n),t,n,e)}function Ka(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,y,m,$,_,p,h,w;if(!o)return e._root=a,e;for(;o.length;)if((_=t>=(f=(s+l)/2))?s=f:l=f,(p=n>=(y=(c+u)/2))?c=y:u=y,i=o,!(o=o[h=p<<1|_]))return i[h]=a,e;if(m=+e._x.call(null,o.data),$=+e._y.call(null,o.data),t===m&&n===$)return a.next=o,i?i[h]=a:e._root=a,e;do i=i?i[h]=new Array(4):e._root=new Array(4),(_=t>=(f=(s+l)/2))?s=f:l=f,(p=n>=(y=(c+u)/2))?c=y:u=y;while((h=p<<1|_)===(w=($>=y)<<1|m>=f));return i[w]=o,i[h]=a,e}function xf(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)Ka(this,a[n],s[n],e[n]);return this}function Pf(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Nf(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kf(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Pe(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Tf(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,y=[],m=this._root,$,_;for(m&&y.push(new Pe(m,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);$=y.pop();)if(!(!(m=$.node)||(a=$.x0)>u||(s=$.y0)>f||(c=$.x1)<i||(l=$.y1)<o))if(m.length){var p=(a+c)/2,h=(s+l)/2;y.push(new Pe(m[3],p,h,c,l),new Pe(m[2],a,h,p,l),new Pe(m[1],p,s,c,h),new Pe(m[0],a,s,p,h)),(_=(t>=h)<<1|e>=p)&&($=y[y.length-1],y[y.length-1]=y[y.length-1-_],y[y.length-1-_]=$)}else{var w=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),v=w*w+b*b;if(v<n){var O=Math.sqrt(n=v);i=e-O,o=t-O,u=e+O,f=t+O,r=m.data}}return r}function Cf(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,y,m,$,_,p,h;if(!n)return this;if(n.length)for(;;){if(($=u>=(y=(a+c)/2))?a=y:c=y,(_=f>=(m=(s+l)/2))?s=m:l=m,t=n,!(n=n[p=_<<1|$]))return this;if(!n.length)break;(t[p+1&3]||t[p+2&3]||t[p+3&3])&&(r=t,h=p)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[p]=o:delete t[p],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[h]=n:this._root=n),this):(this._root=o,this)}function Of(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Af(){return this._root}function Mf(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Rf(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new Pe(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new Pe(i,l,u,s,c)),(i=r[2])&&t.push(new Pe(i,o,u,l,c)),(i=r[1])&&t.push(new Pe(i,l,a,s,u)),(i=r[0])&&t.push(new Pe(i,o,a,l,u))}return this}function If(e){var t=[],n=[],r;for(this._root&&t.push(new Pe(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new Pe(o,a,s,u,f)),(o=i[1])&&t.push(new Pe(o,u,s,c,f)),(o=i[2])&&t.push(new Pe(o,a,f,u,l)),(o=i[3])&&t.push(new Pe(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Df(e){return e[0]}function jf(e){return arguments.length?(this._x=e,this):this._x}function zf(e){return e[1]}function Vf(e){return arguments.length?(this._y=e,this):this._y}function gi(e,t,n){var r=new vi(t??Df,n??zf,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function vi(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Vo(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ne=gi.prototype=vi.prototype;Ne.copy=function(){var e=new vi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Vo(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Vo(r));return e};Ne.add=Ef;Ne.addAll=xf;Ne.cover=Pf;Ne.data=Nf;Ne.extent=kf;Ne.find=Tf;Ne.remove=Cf;Ne.removeAll=Of;Ne.root=Af;Ne.size=Mf;Ne.visit=Rf;Ne.visitAfter=If;Ne.x=jf;Ne.y=Vf;function Ie(e){return function(){return e}}function Ft(e){return(e()-.5)*1e-6}function Ff(e){return e.index}function Fo(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Lf(e){var t=Ff,n=f,r,i=Ie(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(p){return 1/Math.min(s[p.source.index],s[p.target.index])}function y(p){for(var h=0,w=e.length;h<u;++h)for(var b=0,v,O,P,k,j,L,U;b<w;++b)v=e[b],O=v.source,P=v.target,k=P.x+P.vx-O.x-O.vx||Ft(l),j=P.y+P.vy-O.y-O.vy||Ft(l),L=Math.sqrt(k*k+j*j),L=(L-o[b])/L*p*r[b],k*=L,j*=L,P.vx-=k*(U=c[b]),P.vy-=j*U,O.vx+=k*(U=1-U),O.vy+=j*U}function m(){if(a){var p,h=a.length,w=e.length,b=new Map(a.map((O,P)=>[t(O,P,a),O])),v;for(p=0,s=new Array(h);p<w;++p)v=e[p],v.index=p,typeof v.source!="object"&&(v.source=Fo(b,v.source)),typeof v.target!="object"&&(v.target=Fo(b,v.target)),s[v.source.index]=(s[v.source.index]||0)+1,s[v.target.index]=(s[v.target.index]||0)+1;for(p=0,c=new Array(w);p<w;++p)v=e[p],c[p]=s[v.source.index]/(s[v.source.index]+s[v.target.index]);r=new Array(w),$(),o=new Array(w),_()}}function $(){if(a)for(var p=0,h=e.length;p<h;++p)r[p]=+n(e[p],p,e)}function _(){if(a)for(var p=0,h=e.length;p<h;++p)o[p]=+i(e[p],p,e)}return y.initialize=function(p,h){a=p,l=h,m()},y.links=function(p){return arguments.length?(e=p,m(),y):e},y.id=function(p){return arguments.length?(t=p,y):t},y.iterations=function(p){return arguments.length?(u=+p,y):u},y.strength=function(p){return arguments.length?(n=typeof p=="function"?p:Ie(+p),$(),y):n},y.distance=function(p){return arguments.length?(i=typeof p=="function"?p:Ie(+p),_(),y):i},y}const qf=1664525,Hf=1013904223,Lo=4294967296;function Uf(){let e=1;return()=>(e=(qf*e+Hf)%Lo)/Lo}function Kf(e){return e.x}function Gf(e){return e.y}var Bf=10,Xf=Math.PI*(3-Math.sqrt(5));function Zf(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=di(f),l=Pn("tick","end"),u=Uf();e==null&&(e=[]);function f(){y(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function y(_){var p,h=e.length,w;_===void 0&&(_=1);for(var b=0;b<_;++b)for(n+=(o-n)*i,s.forEach(function(v){v(n)}),p=0;p<h;++p)w=e[p],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return t}function m(){for(var _=0,p=e.length,h;_<p;++_){if(h=e[_],h.index=_,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var w=Bf*Math.sqrt(.5+_),b=_*Xf;h.x=w*Math.cos(b),h.y=w*Math.sin(b)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function $(_){return _.initialize&&_.initialize(e,u),_}return m(),t={tick:y,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(_){return arguments.length?(e=_,m(),s.forEach($),t):e},alpha:function(_){return arguments.length?(n=+_,t):n},alphaMin:function(_){return arguments.length?(r=+_,t):r},alphaDecay:function(_){return arguments.length?(i=+_,t):+i},alphaTarget:function(_){return arguments.length?(o=+_,t):o},velocityDecay:function(_){return arguments.length?(a=1-_,t):1-a},randomSource:function(_){return arguments.length?(u=_,s.forEach($),t):u},force:function(_,p){return arguments.length>1?(p==null?s.delete(_):s.set(_,$(p)),t):s.get(_)},find:function(_,p,h){var w=0,b=e.length,v,O,P,k,j;for(h==null?h=1/0:h*=h,w=0;w<b;++w)k=e[w],v=_-k.x,O=p-k.y,P=v*v+O*O,P<h&&(j=k,h=P);return j},on:function(_,p){return arguments.length>1?(l.on(_,p),t):l.on(_)}}}function Yf(){var e,t,n,r,i=Ie(-30),o,a=1,s=1/0,c=.81;function l(m){var $,_=e.length,p=gi(e,Kf,Gf).visitAfter(f);for(r=m,$=0;$<_;++$)t=e[$],p.visit(y)}function u(){if(e){var m,$=e.length,_;for(o=new Array($),m=0;m<$;++m)_=e[m],o[_.index]=+i(_,m,e)}}function f(m){var $=0,_,p,h=0,w,b,v;if(m.length){for(w=b=v=0;v<4;++v)(_=m[v])&&(p=Math.abs(_.value))&&($+=_.value,h+=p,w+=p*_.x,b+=p*_.y);m.x=w/h,m.y=b/h}else{_=m,_.x=_.data.x,_.y=_.data.y;do $+=o[_.data.index];while(_=_.next)}m.value=$}function y(m,$,_,p){if(!m.value)return!0;var h=m.x-t.x,w=m.y-t.y,b=p-$,v=h*h+w*w;if(b*b/c<v)return v<s&&(h===0&&(h=Ft(n),v+=h*h),w===0&&(w=Ft(n),v+=w*w),v<a&&(v=Math.sqrt(a*v)),t.vx+=h*m.value*r/v,t.vy+=w*m.value*r/v),!0;if(m.length||v>=s)return;(m.data!==t||m.next)&&(h===0&&(h=Ft(n),v+=h*h),w===0&&(w=Ft(n),v+=w*w),v<a&&(v=Math.sqrt(a*v)));do m.data!==t&&(b=o[m.data.index]*r/v,t.vx+=h*b,t.vy+=w*b);while(m=m.next)}return l.initialize=function(m,$){e=m,n=$,u()},l.strength=function(m){return arguments.length?(i=typeof m=="function"?m:Ie(+m),u(),l):i},l.distanceMin=function(m){return arguments.length?(a=m*m,l):Math.sqrt(a)},l.distanceMax=function(m){return arguments.length?(s=m*m,l):Math.sqrt(s)},l.theta=function(m){return arguments.length?(c=m*m,l):Math.sqrt(c)},l}function Wf(e){var t=Ie(.1),n,r,i;typeof e!="function"&&(e=Ie(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Ie(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ie(+s),a(),o):e},o}function Jf(e){var t=Ie(.1),n,r,i;typeof e!="function"&&(e=Ie(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Ie(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Ie(+s),a(),o):e},o}const qn=e=>()=>e;function Qf(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function at(e,t,n){this.k=e,this.x=t,this.y=n}at.prototype={constructor:at,scale:function(e){return e===1?this:new at(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new at(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kr=new at(1,0,0);at.prototype;function zr(e){e.stopImmediatePropagation()}function cn(e){e.preventDefault(),e.stopImmediatePropagation()}function eh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function th(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function qo(){return this.__zoom||kr}function nh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ih(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function oh(){var e=eh,t=th,n=ih,r=nh,i=rh,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=ll,l=Pn("start","zoom","end"),u,f,y,m=500,$=150,_=0,p=10;function h(T){T.property("__zoom",qo).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",Q).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",ce).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(T,q,z,H){var Z=T.selection?T.selection():T;Z.property("__zoom",qo),T!==Z?O(T,q,z,H):Z.interrupt().each(function(){P(this,arguments).event(H).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},h.scaleBy=function(T,q,z,H){h.scaleTo(T,function(){var Z=this.__zoom.k,Y=typeof q=="function"?q.apply(this,arguments):q;return Z*Y},z,H)},h.scaleTo=function(T,q,z,H){h.transform(T,function(){var Z=t.apply(this,arguments),Y=this.__zoom,D=z==null?v(Z):typeof z=="function"?z.apply(this,arguments):z,N=Y.invert(D),I=typeof q=="function"?q.apply(this,arguments):q;return n(b(w(Y,I),D,N),Z,a)},z,H)},h.translateBy=function(T,q,z,H){h.transform(T,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),a)},null,H)},h.translateTo=function(T,q,z,H,Z){h.transform(T,function(){var Y=t.apply(this,arguments),D=this.__zoom,N=H==null?v(Y):typeof H=="function"?H.apply(this,arguments):H;return n(kr.translate(N[0],N[1]).scale(D.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof z=="function"?-z.apply(this,arguments):-z),Y,a)},H,Z)};function w(T,q){return q=Math.max(o[0],Math.min(o[1],q)),q===T.k?T:new at(q,T.x,T.y)}function b(T,q,z){var H=q[0]-z[0]*T.k,Z=q[1]-z[1]*T.k;return H===T.x&&Z===T.y?T:new at(T.k,H,Z)}function v(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function O(T,q,z,H){T.on("start.zoom",function(){P(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(H).end()}).tween("zoom",function(){var Z=this,Y=arguments,D=P(Z,Y).event(H),N=t.apply(Z,Y),I=z==null?v(N):typeof z=="function"?z.apply(Z,Y):z,C=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),d=Z.__zoom,S=typeof q=="function"?q.apply(Z,Y):q,R=c(d.invert(I).concat(C/d.k),S.invert(I).concat(C/S.k));return function(V){if(V===1)V=S;else{var F=R(V),ee=C/F[2];V=new at(ee,I[0]-F[0]*ee,I[1]-F[1]*ee)}D.zoom(null,V)}})}function P(T,q,z){return!z&&T.__zooming||new k(T,q)}function k(T,q){this.that=T,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,q),this.taps=0}k.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,q){return this.mouse&&T!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var q=Ce(this.that).datum();l.call(T,this.that,new Qf(T,{sourceEvent:this.sourceEvent,target:h,type:T,transform:this.that.__zoom,dispatch:l}),q)}};function j(T,...q){if(!e.apply(this,arguments))return;var z=P(this,q).event(T),H=this.__zoom,Z=Math.max(o[0],Math.min(o[1],H.k*Math.pow(2,r.apply(this,arguments)))),Y=ot(T);if(z.wheel)(z.mouse[0][0]!==Y[0]||z.mouse[0][1]!==Y[1])&&(z.mouse[1]=H.invert(z.mouse[0]=Y)),clearTimeout(z.wheel);else{if(H.k===Z)return;z.mouse=[Y,H.invert(Y)],Jn(this),z.start()}cn(T),z.wheel=setTimeout(D,$),z.zoom("mouse",n(b(w(H,Z),z.mouse[0],z.mouse[1]),z.extent,a));function D(){z.wheel=null,z.end()}}function L(T,...q){if(y||!e.apply(this,arguments))return;var z=T.currentTarget,H=P(this,q,!0).event(T),Z=Ce(T.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",C,!0),Y=ot(T,z),D=T.clientX,N=T.clientY;Oa(T.view),zr(T),H.mouse=[Y,this.__zoom.invert(Y)],Jn(this),H.start();function I(d){if(cn(d),!H.moved){var S=d.clientX-D,R=d.clientY-N;H.moved=S*S+R*R>_}H.event(d).zoom("mouse",n(b(H.that.__zoom,H.mouse[0]=ot(d,z),H.mouse[1]),H.extent,a))}function C(d){Z.on("mousemove.zoom mouseup.zoom",null),Aa(d.view,H.moved),cn(d),H.event(d).end()}}function U(T,...q){if(e.apply(this,arguments)){var z=this.__zoom,H=ot(T.changedTouches?T.changedTouches[0]:T,this),Z=z.invert(H),Y=z.k*(T.shiftKey?.5:2),D=n(b(w(z,Y),H,Z),t.apply(this,q),a);cn(T),s>0?Ce(this).transition().duration(s).call(O,D,H,T):Ce(this).call(h.transform,D,H,T)}}function Q(T,...q){if(e.apply(this,arguments)){var z=T.touches,H=z.length,Z=P(this,q,T.changedTouches.length===H).event(T),Y,D,N,I;for(zr(T),D=0;D<H;++D)N=z[D],I=ot(N,this),I=[I,this.__zoom.invert(I),N.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==I[2]&&(Z.touch1=I,Z.taps=0):(Z.touch0=I,Y=!0,Z.taps=1+!!u);u&&(u=clearTimeout(u)),Y&&(Z.taps<2&&(f=I[0],u=setTimeout(function(){u=null},m)),Jn(this),Z.start())}}function K(T,...q){if(this.__zooming){var z=P(this,q).event(T),H=T.changedTouches,Z=H.length,Y,D,N,I;for(cn(T),Y=0;Y<Z;++Y)D=H[Y],N=ot(D,this),z.touch0&&z.touch0[2]===D.identifier?z.touch0[0]=N:z.touch1&&z.touch1[2]===D.identifier&&(z.touch1[0]=N);if(D=z.that.__zoom,z.touch1){var C=z.touch0[0],d=z.touch0[1],S=z.touch1[0],R=z.touch1[1],V=(V=S[0]-C[0])*V+(V=S[1]-C[1])*V,F=(F=R[0]-d[0])*F+(F=R[1]-d[1])*F;D=w(D,Math.sqrt(V/F)),N=[(C[0]+S[0])/2,(C[1]+S[1])/2],I=[(d[0]+R[0])/2,(d[1]+R[1])/2]}else if(z.touch0)N=z.touch0[0],I=z.touch0[1];else return;z.zoom("touch",n(b(D,N,I),z.extent,a))}}function ce(T,...q){if(this.__zooming){var z=P(this,q).event(T),H=T.changedTouches,Z=H.length,Y,D;for(zr(T),y&&clearTimeout(y),y=setTimeout(function(){y=null},m),Y=0;Y<Z;++Y)D=H[Y],z.touch0&&z.touch0[2]===D.identifier?delete z.touch0:z.touch1&&z.touch1[2]===D.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(D=ot(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<p)){var N=Ce(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return h.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:qn(+T),h):r},h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:qn(!!T),h):e},h.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:qn(!!T),h):i},h.extent=function(T){return arguments.length?(t=typeof T=="function"?T:qn([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),h):t},h.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],h):[o[0],o[1]]},h.translateExtent=function(T){return arguments.length?(a[0][0]=+T[0][0],a[1][0]=+T[1][0],a[0][1]=+T[0][1],a[1][1]=+T[1][1],h):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},h.constrain=function(T){return arguments.length?(n=T,h):n},h.duration=function(T){return arguments.length?(s=+T,h):s},h.interpolate=function(T){return arguments.length?(c=T,h):c},h.on=function(){var T=l.on.apply(l,arguments);return T===l?h:T},h.clickDistance=function(T){return arguments.length?(_=(T=+T)*T,h):Math.sqrt(_)},h.tapDistance=function(T){return arguments.length?(p=+T,h):p},h}var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hr={},ch={get exports(){return hr},set exports(e){hr=e}},Ga={},Ue={},Bt={},Tn={},ne={},xn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(w){if(super(),!e.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((b,v)=>`${b}${v}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((b,v)=>(v instanceof n&&(b[v.str]=(b[v.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(h,...w){const b=[h[0]];let v=0;for(;v<w.length;)s(b,w[v]),b.push(h[++v]);return new r(b)}e._=i;const o=new r("+");function a(h,...w){const b=[m(h[0])];let v=0;for(;v<w.length;)b.push(o),s(b,w[v]),b.push(o,m(h[++v]));return c(b),new r(b)}e.str=a;function s(h,w){w instanceof r?h.push(...w._items):w instanceof n?h.push(w):h.push(f(w))}e.addCodeArg=s;function c(h){let w=1;for(;w<h.length-1;){if(h[w]===o){const b=l(h[w-1],h[w+1]);if(b!==void 0){h.splice(w-1,3,b);continue}h[w++]="+"}w++}}function l(h,w){if(w==='""')return h;if(h==='""')return w;if(typeof h=="string")return w instanceof n||h[h.length-1]!=='"'?void 0:typeof w!="string"?`${h.slice(0,-1)}${w}"`:w[0]==='"'?h.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(h instanceof n))return`"${h}${w.slice(1)}`}function u(h,w){return w.emptyStr()?h:h.emptyStr()?w:a`${h}${w}`}e.strConcat=u;function f(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:m(Array.isArray(h)?h.join(","):h)}function y(h){return new r(m(h))}e.stringify=y;function m(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=m;function $(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new r(`.${h}`):i`[${h}]`}e.getProperty=$;function _(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new r(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=_;function p(h){return new r(h.toString())}e.regexpCode=p})(xn);var Jr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=xn;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:u}={}){this._names={},this._prefixes=l,this._parent=u}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const u=this._names[l]||this._nameGroup(l);return`${l}${u.index++}`}_nameGroup(l){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class o extends t.Name{constructor(l,u){super(u),this.prefix=l}setValue(l,{property:u,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(u)}[${f}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class s extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?a:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(l),{prefix:m}=y,$=(f=u.key)!==null&&f!==void 0?f:u.ref;let _=this._values[m];if(_){const w=_.get($);if(w)return w}else _=this._values[m]=new Map;_.set($,y);const p=this._scope[m]||(this._scope[m]=[]),h=p.length;return p[h]=u.ref,y.setValue(u,{property:m,itemIndex:h}),y}getValue(l,u){const f=this._values[l];if(f)return f.get(u)}scopeRefs(l,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,u,f){return this._reduceValues(l,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},u,f)}_reduceValues(l,u,f={},y){let m=t.nil;for(const $ in l){const _=l[$];if(!_)continue;const p=f[$]=f[$]||new Map;_.forEach(h=>{if(p.has(h))return;p.set(h,r.Started);let w=u(h);if(w){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;m=(0,t._)`${m}${b} ${h} = ${w};${this.opts._n}`}else if(w=y==null?void 0:y(h))m=(0,t._)`${m}${w}${this.opts._n}`;else throw new n(h);p.set(h,r.Completed)})}return m}}e.ValueScope=s})(Jr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=xn,n=Jr;var r=xn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Jr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(d,S){return this}}class a extends o{constructor(d,S,R){super(),this.varKind=d,this.name=S,this.rhs=R}render({es5:d,_n:S}){const R=d?n.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${R} ${this.name}${V};`+S}optimizeNames(d,S){if(d[this.name.str])return this.rhs&&(this.rhs=T(this.rhs,d,S)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class s extends o{constructor(d,S,R){super(),this.lhs=d,this.rhs=S,this.sideEffects=R}render({_n:d}){return`${this.lhs} = ${this.rhs};`+d}optimizeNames(d,S){if(!(this.lhs instanceof t.Name&&!d[this.lhs.str]&&!this.sideEffects))return this.rhs=T(this.rhs,d,S),this}get names(){const d=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ce(d,this.rhs)}}class c extends s{constructor(d,S,R,V){super(d,R,V),this.op=S}render({_n:d}){return`${this.lhs} ${this.op}= ${this.rhs};`+d}}class l extends o{constructor(d){super(),this.label=d,this.names={}}render({_n:d}){return`${this.label}:`+d}}class u extends o{constructor(d){super(),this.label=d,this.names={}}render({_n:d}){return`break${this.label?` ${this.label}`:""};`+d}}class f extends o{constructor(d){super(),this.error=d}render({_n:d}){return`throw ${this.error};`+d}get names(){return this.error.names}}class y extends o{constructor(d){super(),this.code=d}render({_n:d}){return`${this.code};`+d}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(d,S){return this.code=T(this.code,d,S),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class m extends o{constructor(d=[]){super(),this.nodes=d}render(d){return this.nodes.reduce((S,R)=>S+R.render(d),"")}optimizeNodes(){const{nodes:d}=this;let S=d.length;for(;S--;){const R=d[S].optimizeNodes();Array.isArray(R)?d.splice(S,1,...R):R?d[S]=R:d.splice(S,1)}return d.length>0?this:void 0}optimizeNames(d,S){const{nodes:R}=this;let V=R.length;for(;V--;){const F=R[V];F.optimizeNames(d,S)||(q(d,F.names),R.splice(V,1))}return R.length>0?this:void 0}get names(){return this.nodes.reduce((d,S)=>K(d,S.names),{})}}class $ extends m{render(d){return"{"+d._n+super.render(d)+"}"+d._n}}class _ extends m{}class p extends ${}p.kind="else";class h extends ${constructor(d,S){super(S),this.condition=d}render(d){let S=`if(${this.condition})`+super.render(d);return this.else&&(S+="else "+this.else.render(d)),S}optimizeNodes(){super.optimizeNodes();const d=this.condition;if(d===!0)return this.nodes;let S=this.else;if(S){const R=S.optimizeNodes();S=this.else=Array.isArray(R)?new p(R):R}if(S)return d===!1?S instanceof h?S:S.nodes:this.nodes.length?this:new h(z(d),S instanceof h?[S]:S.nodes);if(!(d===!1||!this.nodes.length))return this}optimizeNames(d,S){var R;if(this.else=(R=this.else)===null||R===void 0?void 0:R.optimizeNames(d,S),!!(super.optimizeNames(d,S)||this.else))return this.condition=T(this.condition,d,S),this}get names(){const d=super.names;return ce(d,this.condition),this.else&&K(d,this.else.names),d}}h.kind="if";class w extends ${}w.kind="for";class b extends w{constructor(d){super(),this.iteration=d}render(d){return`for(${this.iteration})`+super.render(d)}optimizeNames(d,S){if(super.optimizeNames(d,S))return this.iteration=T(this.iteration,d,S),this}get names(){return K(super.names,this.iteration.names)}}class v extends w{constructor(d,S,R,V){super(),this.varKind=d,this.name=S,this.from=R,this.to=V}render(d){const S=d.es5?n.varKinds.var:this.varKind,{name:R,from:V,to:F}=this;return`for(${S} ${R}=${V}; ${R}<${F}; ${R}++)`+super.render(d)}get names(){const d=ce(super.names,this.from);return ce(d,this.to)}}class O extends w{constructor(d,S,R,V){super(),this.loop=d,this.varKind=S,this.name=R,this.iterable=V}render(d){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(d)}optimizeNames(d,S){if(super.optimizeNames(d,S))return this.iterable=T(this.iterable,d,S),this}get names(){return K(super.names,this.iterable.names)}}class P extends ${constructor(d,S,R){super(),this.name=d,this.args=S,this.async=R}render(d){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(d)}}P.kind="func";class k extends m{render(d){return"return "+super.render(d)}}k.kind="return";class j extends ${render(d){let S="try"+super.render(d);return this.catch&&(S+=this.catch.render(d)),this.finally&&(S+=this.finally.render(d)),S}optimizeNodes(){var d,S;return super.optimizeNodes(),(d=this.catch)===null||d===void 0||d.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(d,S){var R,V;return super.optimizeNames(d,S),(R=this.catch)===null||R===void 0||R.optimizeNames(d,S),(V=this.finally)===null||V===void 0||V.optimizeNames(d,S),this}get names(){const d=super.names;return this.catch&&K(d,this.catch.names),this.finally&&K(d,this.finally.names),d}}class L extends ${constructor(d){super(),this.error=d}render(d){return`catch(${this.error})`+super.render(d)}}L.kind="catch";class U extends ${render(d){return"finally"+super.render(d)}}U.kind="finally";class Q{constructor(d,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=d,this._scope=new n.Scope({parent:d}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(d){return this._scope.name(d)}scopeName(d){return this._extScope.name(d)}scopeValue(d,S){const R=this._extScope.value(d,S);return(this._values[R.prefix]||(this._values[R.prefix]=new Set)).add(R),R}getScopeValue(d,S){return this._extScope.getValue(d,S)}scopeRefs(d){return this._extScope.scopeRefs(d,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(d,S,R,V){const F=this._scope.toName(S);return R!==void 0&&V&&(this._constants[F.str]=R),this._leafNode(new a(d,F,R)),F}const(d,S,R){return this._def(n.varKinds.const,d,S,R)}let(d,S,R){return this._def(n.varKinds.let,d,S,R)}var(d,S,R){return this._def(n.varKinds.var,d,S,R)}assign(d,S,R){return this._leafNode(new s(d,S,R))}add(d,S){return this._leafNode(new c(d,e.operators.ADD,S))}code(d){return typeof d=="function"?d():d!==t.nil&&this._leafNode(new y(d)),this}object(...d){const S=["{"];for(const[R,V]of d)S.length>1&&S.push(","),S.push(R),(R!==V||this.opts.es5)&&(S.push(":"),(0,t.addCodeArg)(S,V));return S.push("}"),new t._Code(S)}if(d,S,R){if(this._blockNode(new h(d)),S&&R)this.code(S).else().code(R).endIf();else if(S)this.code(S).endIf();else if(R)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(d){return this._elseNode(new h(d))}else(){return this._elseNode(new p)}endIf(){return this._endBlockNode(h,p)}_for(d,S){return this._blockNode(d),S&&this.code(S).endFor(),this}for(d,S){return this._for(new b(d),S)}forRange(d,S,R,V,F=this.opts.es5?n.varKinds.var:n.varKinds.let){const ee=this._scope.toName(d);return this._for(new v(F,ee,S,R),()=>V(ee))}forOf(d,S,R,V=n.varKinds.const){const F=this._scope.toName(d);if(this.opts.es5){const ee=S instanceof t.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,t._)`${ee}.length`,ie=>{this.var(F,(0,t._)`${ee}[${ie}]`),R(F)})}return this._for(new O("of",V,F,S),()=>R(F))}forIn(d,S,R,V=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(d,(0,t._)`Object.keys(${S})`,R);const F=this._scope.toName(d);return this._for(new O("in",V,F,S),()=>R(F))}endFor(){return this._endBlockNode(w)}label(d){return this._leafNode(new l(d))}break(d){return this._leafNode(new u(d))}return(d){const S=new k;if(this._blockNode(S),this.code(d),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(d,S,R){if(!S&&!R)throw new Error('CodeGen: "try" without "catch" and "finally"');const V=new j;if(this._blockNode(V),this.code(d),S){const F=this.name("e");this._currNode=V.catch=new L(F),S(F)}return R&&(this._currNode=V.finally=new U,this.code(R)),this._endBlockNode(L,U)}throw(d){return this._leafNode(new f(d))}block(d,S){return this._blockStarts.push(this._nodes.length),d&&this.code(d).endBlock(S),this}endBlock(d){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const R=this._nodes.length-S;if(R<0||d!==void 0&&R!==d)throw new Error(`CodeGen: wrong number of nodes: ${R} vs ${d} expected`);return this._nodes.length=S,this}func(d,S=t.nil,R,V){return this._blockNode(new P(d,S,R)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(P)}optimize(d=1){for(;d-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(d){return this._currNode.nodes.push(d),this}_blockNode(d){this._currNode.nodes.push(d),this._nodes.push(d)}_endBlockNode(d,S){const R=this._currNode;if(R instanceof d||S&&R instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${d.kind}/${S.kind}`:d.kind}"`)}_elseNode(d){const S=this._currNode;if(!(S instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=d,this}get _root(){return this._nodes[0]}get _currNode(){const d=this._nodes;return d[d.length-1]}set _currNode(d){const S=this._nodes;S[S.length-1]=d}}e.CodeGen=Q;function K(C,d){for(const S in d)C[S]=(C[S]||0)+(d[S]||0);return C}function ce(C,d){return d instanceof t._CodeOrName?K(C,d.names):C}function T(C,d,S){if(C instanceof t.Name)return R(C);if(!V(C))return C;return new t._Code(C._items.reduce((F,ee)=>(ee instanceof t.Name&&(ee=R(ee)),ee instanceof t._Code?F.push(...ee._items):F.push(ee),F),[]));function R(F){const ee=S[F.str];return ee===void 0||d[F.str]!==1?F:(delete d[F.str],ee)}function V(F){return F instanceof t._Code&&F._items.some(ee=>ee instanceof t.Name&&d[ee.str]===1&&S[ee.str]!==void 0)}}function q(C,d){for(const S in d)C[S]=(C[S]||0)-(d[S]||0)}function z(C){return typeof C=="boolean"||typeof C=="number"||C===null?!C:(0,t._)`!${I(C)}`}e.not=z;const H=N(e.operators.AND);function Z(...C){return C.reduce(H)}e.and=Z;const Y=N(e.operators.OR);function D(...C){return C.reduce(Y)}e.or=D;function N(C){return(d,S)=>d===t.nil?S:S===t.nil?d:(0,t._)`${I(d)} ${C} ${I(S)}`}function I(C){return C instanceof t.Name?C:(0,t._)`(${C})`}})(ne);var ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=ne,n=xn;function r(P){const k={};for(const j of P)k[j]=!0;return k}e.toHash=r;function i(P,k){return typeof k=="boolean"?k:Object.keys(k).length===0?!0:(o(P,k),!a(k,P.self.RULES.all))}e.alwaysValidSchema=i;function o(P,k=P.schema){const{opts:j,self:L}=P;if(!j.strictSchema||typeof k=="boolean")return;const U=L.RULES.keywords;for(const Q in k)U[Q]||O(P,`unknown keyword: "${Q}"`)}e.checkUnknownRules=o;function a(P,k){if(typeof P=="boolean")return!P;for(const j in P)if(k[j])return!0;return!1}e.schemaHasRules=a;function s(P,k){if(typeof P=="boolean")return!P;for(const j in P)if(j!=="$ref"&&k.all[j])return!0;return!1}e.schemaHasRulesButRef=s;function c({topSchemaRef:P,schemaPath:k},j,L,U){if(!U){if(typeof j=="number"||typeof j=="boolean")return j;if(typeof j=="string")return(0,t._)`${j}`}return(0,t._)`${P}${k}${(0,t.getProperty)(L)}`}e.schemaRefOrVal=c;function l(P){return y(decodeURIComponent(P))}e.unescapeFragment=l;function u(P){return encodeURIComponent(f(P))}e.escapeFragment=u;function f(P){return typeof P=="number"?`${P}`:P.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function y(P){return P.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=y;function m(P,k){if(Array.isArray(P))for(const j of P)k(j);else k(P)}e.eachItem=m;function $({mergeNames:P,mergeToName:k,mergeValues:j,resultToName:L}){return(U,Q,K,ce)=>{const T=K===void 0?Q:K instanceof t.Name?(Q instanceof t.Name?P(U,Q,K):k(U,Q,K),K):Q instanceof t.Name?(k(U,K,Q),Q):j(Q,K);return ce===t.Name&&!(T instanceof t.Name)?L(U,T):T}}e.mergeEvaluated={props:$({mergeNames:(P,k,j)=>P.if((0,t._)`${j} !== true && ${k} !== undefined`,()=>{P.if((0,t._)`${k} === true`,()=>P.assign(j,!0),()=>P.assign(j,(0,t._)`${j} || {}`).code((0,t._)`Object.assign(${j}, ${k})`))}),mergeToName:(P,k,j)=>P.if((0,t._)`${j} !== true`,()=>{k===!0?P.assign(j,!0):(P.assign(j,(0,t._)`${j} || {}`),p(P,j,k))}),mergeValues:(P,k)=>P===!0?!0:{...P,...k},resultToName:_}),items:$({mergeNames:(P,k,j)=>P.if((0,t._)`${j} !== true && ${k} !== undefined`,()=>P.assign(j,(0,t._)`${k} === true ? true : ${j} > ${k} ? ${j} : ${k}`)),mergeToName:(P,k,j)=>P.if((0,t._)`${j} !== true`,()=>P.assign(j,k===!0?!0:(0,t._)`${j} > ${k} ? ${j} : ${k}`)),mergeValues:(P,k)=>P===!0?!0:Math.max(P,k),resultToName:(P,k)=>P.var("items",k)})};function _(P,k){if(k===!0)return P.var("props",!0);const j=P.var("props",(0,t._)`{}`);return k!==void 0&&p(P,j,k),j}e.evaluatedPropsToName=_;function p(P,k,j){Object.keys(j).forEach(L=>P.assign((0,t._)`${k}${(0,t.getProperty)(L)}`,!0))}e.setEvaluated=p;const h={};function w(P,k){return P.scopeValue("func",{ref:k,code:h[k.code]||(h[k.code]=new n._Code(k.code))})}e.useFunc=w;var b;(function(P){P[P.Num=0]="Num",P[P.Str=1]="Str"})(b=e.Type||(e.Type={}));function v(P,k,j){if(P instanceof t.Name){const L=k===b.Num;return j?L?(0,t._)`"[" + ${P} + "]"`:(0,t._)`"['" + ${P} + "']"`:L?(0,t._)`"/" + ${P}`:(0,t._)`"/" + ${P}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return j?(0,t.getProperty)(P).toString():"/"+f(P)}e.getErrorPath=v;function O(P,k,j=P.opts.strictSchema){if(j){if(k=`strict mode: ${k}`,j===!0)throw new Error(k);P.self.logger.warn(k)}}e.checkStrictMode=O})(ae);var nt={};Object.defineProperty(nt,"__esModule",{value:!0});const Se=ne,uh={data:new Se.Name("data"),valCxt:new Se.Name("valCxt"),instancePath:new Se.Name("instancePath"),parentData:new Se.Name("parentData"),parentDataProperty:new Se.Name("parentDataProperty"),rootData:new Se.Name("rootData"),dynamicAnchors:new Se.Name("dynamicAnchors"),vErrors:new Se.Name("vErrors"),errors:new Se.Name("errors"),this:new Se.Name("this"),self:new Se.Name("self"),scope:new Se.Name("scope"),json:new Se.Name("json"),jsonPos:new Se.Name("jsonPos"),jsonLen:new Se.Name("jsonLen"),jsonPart:new Se.Name("jsonPart")};nt.default=uh;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ne,n=ae,r=nt;e.keywordError={message:({keyword:p})=>(0,t.str)`must pass "${p}" keyword validation`},e.keyword$DataError={message:({keyword:p,schemaType:h})=>h?(0,t.str)`"${p}" keyword must be ${h} ($data)`:(0,t.str)`"${p}" keyword is invalid ($data)`};function i(p,h=e.keywordError,w,b){const{it:v}=p,{gen:O,compositeRule:P,allErrors:k}=v,j=f(p,h,w);b??(P||k)?c(O,j):l(v,(0,t._)`[${j}]`)}e.reportError=i;function o(p,h=e.keywordError,w){const{it:b}=p,{gen:v,compositeRule:O,allErrors:P}=b,k=f(p,h,w);c(v,k),O||P||l(b,r.default.vErrors)}e.reportExtraError=o;function a(p,h){p.assign(r.default.errors,h),p.if((0,t._)`${r.default.vErrors} !== null`,()=>p.if(h,()=>p.assign((0,t._)`${r.default.vErrors}.length`,h),()=>p.assign(r.default.vErrors,null)))}e.resetErrorsCount=a;function s({gen:p,keyword:h,schemaValue:w,data:b,errsCount:v,it:O}){if(v===void 0)throw new Error("ajv implementation error");const P=p.name("err");p.forRange("i",v,r.default.errors,k=>{p.const(P,(0,t._)`${r.default.vErrors}[${k}]`),p.if((0,t._)`${P}.instancePath === undefined`,()=>p.assign((0,t._)`${P}.instancePath`,(0,t.strConcat)(r.default.instancePath,O.errorPath))),p.assign((0,t._)`${P}.schemaPath`,(0,t.str)`${O.errSchemaPath}/${h}`),O.opts.verbose&&(p.assign((0,t._)`${P}.schema`,w),p.assign((0,t._)`${P}.data`,b))})}e.extendErrors=s;function c(p,h){const w=p.const("err",h);p.if((0,t._)`${r.default.vErrors} === null`,()=>p.assign(r.default.vErrors,(0,t._)`[${w}]`),(0,t._)`${r.default.vErrors}.push(${w})`),p.code((0,t._)`${r.default.errors}++`)}function l(p,h){const{gen:w,validateName:b,schemaEnv:v}=p;v.$async?w.throw((0,t._)`new ${p.ValidationError}(${h})`):(w.assign((0,t._)`${b}.errors`,h),w.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(p,h,w){const{createErrors:b}=p.it;return b===!1?(0,t._)`{}`:y(p,h,w)}function y(p,h,w={}){const{gen:b,it:v}=p,O=[m(v,w),$(p,w)];return _(p,h,O),b.object(...O)}function m({errorPath:p},{instancePath:h}){const w=h?(0,t.str)`${p}${(0,n.getErrorPath)(h,n.Type.Str)}`:p;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,w)]}function $({keyword:p,it:{errSchemaPath:h}},{schemaPath:w,parentSchema:b}){let v=b?h:(0,t.str)`${h}/${p}`;return w&&(v=(0,t.str)`${v}${(0,n.getErrorPath)(w,n.Type.Str)}`),[u.schemaPath,v]}function _(p,{params:h,message:w},b){const{keyword:v,data:O,schemaValue:P,it:k}=p,{opts:j,propertyName:L,topSchemaRef:U,schemaPath:Q}=k;b.push([u.keyword,v],[u.params,typeof h=="function"?h(p):h||(0,t._)`{}`]),j.messages&&b.push([u.message,typeof w=="function"?w(p):w]),j.verbose&&b.push([u.schema,P],[u.parentSchema,(0,t._)`${U}${Q}`],[r.default.data,O]),L&&b.push([u.propertyName,L])}})(Tn);Object.defineProperty(Bt,"__esModule",{value:!0});Bt.boolOrEmptySchema=Bt.topBoolOrEmptySchema=void 0;const lh=Tn,fh=ne,hh=nt,dh={message:"boolean schema is false"};function ph(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Ba(e,!1):typeof n=="object"&&n.$async===!0?t.return(hh.default.data):(t.assign((0,fh._)`${r}.errors`,null),t.return(!0))}Bt.topBoolOrEmptySchema=ph;function mh(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Ba(e)):n.var(t,!0)}Bt.boolOrEmptySchema=mh;function Ba(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,lh.reportError)(i,dh,void 0,t)}var Cn={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.getRules=kt.isJSONType=void 0;const yh=["string","number","integer","boolean","null","object","array"],gh=new Set(yh);function vh(e){return typeof e=="string"&&gh.has(e)}kt.isJSONType=vh;function _h(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}kt.getRules=_h;var st={};Object.defineProperty(st,"__esModule",{value:!0});st.shouldUseRule=st.shouldUseGroup=st.schemaHasRulesForType=void 0;function $h({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&Xa(e,r)}st.schemaHasRulesForType=$h;function Xa(e,t){return t.rules.some(n=>Za(e,n))}st.shouldUseGroup=Xa;function Za(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}st.shouldUseRule=Za;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=kt,n=st,r=Tn,i=ne,o=ae;var a;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(a=e.DataType||(e.DataType={}));function s(b){const v=c(b.type);if(v.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!v.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&v.push("null")}return v}e.getSchemaTypes=s;function c(b){const v=Array.isArray(b)?b:b?[b]:[];if(v.every(t.isJSONType))return v;throw new Error("type must be JSONType or JSONType[]: "+v.join(","))}e.getJSONTypes=c;function l(b,v){const{gen:O,data:P,opts:k}=b,j=f(v,k.coerceTypes),L=v.length>0&&!(j.length===0&&v.length===1&&(0,n.schemaHasRulesForType)(b,v[0]));if(L){const U=_(v,P,k.strictNumbers,a.Wrong);O.if(U,()=>{j.length?y(b,v,j):h(b)})}return L}e.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function f(b,v){return v?b.filter(O=>u.has(O)||v==="array"&&O==="array"):[]}function y(b,v,O){const{gen:P,data:k,opts:j}=b,L=P.let("dataType",(0,i._)`typeof ${k}`),U=P.let("coerced",(0,i._)`undefined`);j.coerceTypes==="array"&&P.if((0,i._)`${L} == 'object' && Array.isArray(${k}) && ${k}.length == 1`,()=>P.assign(k,(0,i._)`${k}[0]`).assign(L,(0,i._)`typeof ${k}`).if(_(v,k,j.strictNumbers),()=>P.assign(U,k))),P.if((0,i._)`${U} !== undefined`);for(const K of O)(u.has(K)||K==="array"&&j.coerceTypes==="array")&&Q(K);P.else(),h(b),P.endIf(),P.if((0,i._)`${U} !== undefined`,()=>{P.assign(k,U),m(b,U)});function Q(K){switch(K){case"string":P.elseIf((0,i._)`${L} == "number" || ${L} == "boolean"`).assign(U,(0,i._)`"" + ${k}`).elseIf((0,i._)`${k} === null`).assign(U,(0,i._)`""`);return;case"number":P.elseIf((0,i._)`${L} == "boolean" || ${k} === null
              || (${L} == "string" && ${k} && ${k} == +${k})`).assign(U,(0,i._)`+${k}`);return;case"integer":P.elseIf((0,i._)`${L} === "boolean" || ${k} === null
              || (${L} === "string" && ${k} && ${k} == +${k} && !(${k} % 1))`).assign(U,(0,i._)`+${k}`);return;case"boolean":P.elseIf((0,i._)`${k} === "false" || ${k} === 0 || ${k} === null`).assign(U,!1).elseIf((0,i._)`${k} === "true" || ${k} === 1`).assign(U,!0);return;case"null":P.elseIf((0,i._)`${k} === "" || ${k} === 0 || ${k} === false`),P.assign(U,null);return;case"array":P.elseIf((0,i._)`${L} === "string" || ${L} === "number"
              || ${L} === "boolean" || ${k} === null`).assign(U,(0,i._)`[${k}]`)}}}function m({gen:b,parentData:v,parentDataProperty:O},P){b.if((0,i._)`${v} !== undefined`,()=>b.assign((0,i._)`${v}[${O}]`,P))}function $(b,v,O,P=a.Correct){const k=P===a.Correct?i.operators.EQ:i.operators.NEQ;let j;switch(b){case"null":return(0,i._)`${v} ${k} null`;case"array":j=(0,i._)`Array.isArray(${v})`;break;case"object":j=(0,i._)`${v} && typeof ${v} == "object" && !Array.isArray(${v})`;break;case"integer":j=L((0,i._)`!(${v} % 1) && !isNaN(${v})`);break;case"number":j=L();break;default:return(0,i._)`typeof ${v} ${k} ${b}`}return P===a.Correct?j:(0,i.not)(j);function L(U=i.nil){return(0,i.and)((0,i._)`typeof ${v} == "number"`,U,O?(0,i._)`isFinite(${v})`:i.nil)}}e.checkDataType=$;function _(b,v,O,P){if(b.length===1)return $(b[0],v,O,P);let k;const j=(0,o.toHash)(b);if(j.array&&j.object){const L=(0,i._)`typeof ${v} != "object"`;k=j.null?L:(0,i._)`!${v} || ${L}`,delete j.null,delete j.array,delete j.object}else k=i.nil;j.number&&delete j.integer;for(const L in j)k=(0,i.and)(k,$(L,v,O,P));return k}e.checkDataTypes=_;const p={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:v})=>typeof b=="string"?(0,i._)`{type: ${b}}`:(0,i._)`{type: ${v}}`};function h(b){const v=w(b);(0,r.reportError)(v,p)}e.reportTypeError=h;function w(b){const{gen:v,data:O,schema:P}=b,k=(0,o.schemaRefOrVal)(b,P,"type");return{gen:v,keyword:"type",data:O,schema:P.type,schemaCode:k,schemaValue:k,parentSchema:P,params:{},it:b}}})(Cn);var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.assignDefaults=void 0;const jt=ne,wh=ae;function bh(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Ho(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,o)=>Ho(e,o,i.default))}Tr.assignDefaults=bh;function Ho(e,t,n){const{gen:r,compositeRule:i,data:o,opts:a}=e;if(n===void 0)return;const s=(0,jt._)`${o}${(0,jt.getProperty)(t)}`;if(i){(0,wh.checkStrictMode)(e,`default is ignored for: ${s}`);return}let c=(0,jt._)`${s} === undefined`;a.useDefaults==="empty"&&(c=(0,jt._)`${c} || ${s} === null || ${s} === ""`),r.if(c,(0,jt._)`${s} = ${(0,jt.stringify)(n)}`)}var Qe={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.validateUnion=te.validateArray=te.usePattern=te.callValidateCode=te.schemaProperties=te.allSchemaProperties=te.noPropertyInData=te.propertyInData=te.isOwnProperty=te.hasPropFunc=te.reportMissingProp=te.checkMissingProp=te.checkReportMissingProp=void 0;const he=ne,_i=ae,ht=nt,Sh=ae;function Eh(e,t){const{gen:n,data:r,it:i}=e;n.if(wi(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,he._)`${t}`},!0),e.error()})}te.checkReportMissingProp=Eh;function xh({gen:e,data:t,it:{opts:n}},r,i){return(0,he.or)(...r.map(o=>(0,he.and)(wi(e,t,o,n.ownProperties),(0,he._)`${i} = ${o}`)))}te.checkMissingProp=xh;function Ph(e,t){e.setParams({missingProperty:t},!0),e.error()}te.reportMissingProp=Ph;function Ya(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,he._)`Object.prototype.hasOwnProperty`})}te.hasPropFunc=Ya;function $i(e,t,n){return(0,he._)`${Ya(e)}.call(${t}, ${n})`}te.isOwnProperty=$i;function Nh(e,t,n,r){const i=(0,he._)`${t}${(0,he.getProperty)(n)} !== undefined`;return r?(0,he._)`${i} && ${$i(e,t,n)}`:i}te.propertyInData=Nh;function wi(e,t,n,r){const i=(0,he._)`${t}${(0,he.getProperty)(n)} === undefined`;return r?(0,he.or)(i,(0,he.not)($i(e,t,n))):i}te.noPropertyInData=wi;function Wa(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}te.allSchemaProperties=Wa;function kh(e,t){return Wa(t).filter(n=>!(0,_i.alwaysValidSchema)(e,t[n]))}te.schemaProperties=kh;function Th({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:a},s,c,l){const u=l?(0,he._)`${e}, ${t}, ${r}${i}`:t,f=[[ht.default.instancePath,(0,he.strConcat)(ht.default.instancePath,o)],[ht.default.parentData,a.parentData],[ht.default.parentDataProperty,a.parentDataProperty],[ht.default.rootData,ht.default.rootData]];a.opts.dynamicRef&&f.push([ht.default.dynamicAnchors,ht.default.dynamicAnchors]);const y=(0,he._)`${u}, ${n.object(...f)}`;return c!==he.nil?(0,he._)`${s}.call(${c}, ${y})`:(0,he._)`${s}(${y})`}te.callValidateCode=Th;const Ch=(0,he._)`new RegExp`;function Oh({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(n,r);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,he._)`${i.code==="new RegExp"?Ch:(0,Sh.useFunc)(e,i)}(${n}, ${r})`})}te.usePattern=Oh;function Ah(e){const{gen:t,data:n,keyword:r,it:i}=e,o=t.name("valid");if(i.allErrors){const s=t.let("valid",!0);return a(()=>t.assign(s,!1)),s}return t.var(o,!0),a(()=>t.break()),o;function a(s){const c=t.const("len",(0,he._)`${n}.length`);t.forRange("i",0,c,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:_i.Type.Num},o),t.if((0,he.not)(o),s)})}}te.validateArray=Ah;function Mh(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,_i.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const a=t.let("valid",!1),s=t.name("_valid");t.block(()=>n.forEach((c,l)=>{const u=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},s);t.assign(a,(0,he._)`${a} || ${s}`),e.mergeValidEvaluated(u,s)||t.if((0,he.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}te.validateUnion=Mh;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.validateKeywordUsage=Qe.validSchemaType=Qe.funcKeywordCode=Qe.macroKeywordCode=void 0;const xe=ne,bt=nt,Rh=te,Ih=Tn;function Dh(e,t){const{gen:n,keyword:r,schema:i,parentSchema:o,it:a}=e,s=t.macro.call(a.self,i,o,a),c=Ja(n,r,s);a.opts.validateSchema!==!1&&a.self.validateSchema(s,!0);const l=n.name("valid");e.subschema({schema:s,schemaPath:xe.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Qe.macroKeywordCode=Dh;function jh(e,t){var n;const{gen:r,keyword:i,schema:o,parentSchema:a,$data:s,it:c}=e;Vh(c,t);const l=!s&&t.compile?t.compile.call(c.self,o,a,c):t.validate,u=Ja(r,i,l),f=r.let("valid");e.block$data(f,y),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function y(){if(t.errors===!1)_(),t.modifying&&Uo(e),p(()=>e.error());else{const h=t.async?m():$();t.modifying&&Uo(e),p(()=>zh(e,h))}}function m(){const h=r.let("ruleErrs",null);return r.try(()=>_((0,xe._)`await `),w=>r.assign(f,!1).if((0,xe._)`${w} instanceof ${c.ValidationError}`,()=>r.assign(h,(0,xe._)`${w}.errors`),()=>r.throw(w))),h}function $(){const h=(0,xe._)`${u}.errors`;return r.assign(h,null),_(xe.nil),h}function _(h=t.async?(0,xe._)`await `:xe.nil){const w=c.opts.passContext?bt.default.this:bt.default.self,b=!("compile"in t&&!s||t.schema===!1);r.assign(f,(0,xe._)`${h}${(0,Rh.callValidateCode)(e,u,w,b)}`,t.modifying)}function p(h){var w;r.if((0,xe.not)((w=t.valid)!==null&&w!==void 0?w:f),h)}}Qe.funcKeywordCode=jh;function Uo(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,xe._)`${r.parentData}[${r.parentDataProperty}]`))}function zh(e,t){const{gen:n}=e;n.if((0,xe._)`Array.isArray(${t})`,()=>{n.assign(bt.default.vErrors,(0,xe._)`${bt.default.vErrors} === null ? ${t} : ${bt.default.vErrors}.concat(${t})`).assign(bt.default.errors,(0,xe._)`${bt.default.vErrors}.length`),(0,Ih.extendErrors)(e)},()=>e.error())}function Vh({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Ja(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,xe.stringify)(n)})}function Fh(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Qe.validSchemaType=Fh;function Lh({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const a=i.dependencies;if(a!=null&&a.some(s=>!Object.prototype.hasOwnProperty.call(e,s)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const c=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Qe.validateKeywordUsage=Lh;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.extendSubschemaMode=yt.extendSubschemaData=yt.getSubschema=void 0;const Je=ne,Qa=ae;function qh(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const s=e.schema[t];return n===void 0?{schema:s,schemaPath:(0,Je._)`${e.schemaPath}${(0,Je.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:s[n],schemaPath:(0,Je._)`${e.schemaPath}${(0,Je.getProperty)(t)}${(0,Je.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Qa.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}yt.getSubschema=qh;function Hh(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:a}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=t;if(n!==void 0){const{errorPath:l,dataPathArr:u,opts:f}=t,y=s.let("data",(0,Je._)`${t.data}${(0,Je.getProperty)(n)}`,!0);c(y),e.errorPath=(0,Je.str)`${l}${(0,Qa.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Je._)`${n}`,e.dataPathArr=[...u,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Je.Name?i:s.let("data",i,!0);c(l),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function c(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}yt.extendSubschemaData=Hh;function Uh(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}yt.extendSubschemaMode=Uh;var be={},es=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},Qr={},Kh={get exports(){return Qr},set exports(e){Qr=e}},mt=Kh.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};Qn(t,r,i,e,"",e)};mt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};mt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};mt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};mt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Qn(e,t,n,r,i,o,a,s,c,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,o,a,s,c,l);for(var u in r){var f=r[u];if(Array.isArray(f)){if(u in mt.arrayKeywords)for(var y=0;y<f.length;y++)Qn(e,t,n,f[y],i+"/"+u+"/"+y,o,i,u,r,y)}else if(u in mt.propsKeywords){if(f&&typeof f=="object")for(var m in f)Qn(e,t,n,f[m],i+"/"+u+"/"+Gh(m),o,i,u,r,m)}else(u in mt.keywords||e.allKeys&&!(u in mt.skipKeywords))&&Qn(e,t,n,f,i+"/"+u,o,i,u,r)}n(r,i,o,a,s,c,l)}}function Gh(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(be,"__esModule",{value:!0});be.getSchemaRefs=be.resolveUrl=be.normalizeId=be._getFullPath=be.getFullPath=be.inlineRef=void 0;const Bh=ae,Xh=es,Zh=Qr,Yh=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Wh(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ei(e):t?ts(e)<=t:!1}be.inlineRef=Wh;const Jh=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ei(e){for(const t in e){if(Jh.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(ei)||typeof n=="object"&&ei(n))return!0}return!1}function ts(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Yh.has(n)&&(typeof e[n]=="object"&&(0,Bh.eachItem)(e[n],r=>t+=ts(r)),t===1/0))return 1/0}return t}function ns(e,t="",n){n!==!1&&(t=Ht(t));const r=e.parse(t);return rs(e,r)}be.getFullPath=ns;function rs(e,t){return e.serialize(t).split("#")[0]+"#"}be._getFullPath=rs;const Qh=/#\/?$/;function Ht(e){return e?e.replace(Qh,""):""}be.normalizeId=Ht;function ed(e,t,n){return n=Ht(n),e.resolve(t,n)}be.resolveUrl=ed;const td=/^[a-z_][-a-z0-9._]*$/i;function nd(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Ht(e[n]||t),o={"":i},a=ns(r,i,!1),s={},c=new Set;return Zh(e,{allKeys:!0},(f,y,m,$)=>{if($===void 0)return;const _=a+y;let p=o[$];typeof f[n]=="string"&&(p=h.call(this,f[n])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),o[y]=p;function h(b){const v=this.opts.uriResolver.resolve;if(b=Ht(p?v(p,b):b),c.has(b))throw u(b);c.add(b);let O=this.refs[b];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?l(f,O.schema,b):b!==Ht(_)&&(b[0]==="#"?(l(f,s[b],b),s[b]=f):this.refs[b]=_),b}function w(b){if(typeof b=="string"){if(!td.test(b))throw new Error(`invalid anchor "${b}"`);h.call(this,`#${b}`)}}}),s;function l(f,y,m){if(y!==void 0&&!Xh(f,y))throw u(m)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}be.getSchemaRefs=nd;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const is=Bt,Ko=Cn,bi=st,dr=Cn,rd=Tr,mn=Qe,Vr=yt,G=ne,W=nt,id=be,ct=ae,un=Tn;function od(e){if(ss(e)&&(cs(e),as(e))){cd(e);return}os(e,()=>(0,is.topBoolOrEmptySchema)(e))}Ue.validateFunctionCode=od;function os({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,(0,G._)`${W.default.data}, ${W.default.valCxt}`,r.$async,()=>{e.code((0,G._)`"use strict"; ${Go(n,i)}`),sd(e,i),e.code(o)}):e.func(t,(0,G._)`${W.default.data}, ${ad(i)}`,r.$async,()=>e.code(Go(n,i)).code(o))}function ad(e){return(0,G._)`{${W.default.instancePath}="", ${W.default.parentData}, ${W.default.parentDataProperty}, ${W.default.rootData}=${W.default.data}${e.dynamicRef?(0,G._)`, ${W.default.dynamicAnchors}={}`:G.nil}}={}`}function sd(e,t){e.if(W.default.valCxt,()=>{e.var(W.default.instancePath,(0,G._)`${W.default.valCxt}.${W.default.instancePath}`),e.var(W.default.parentData,(0,G._)`${W.default.valCxt}.${W.default.parentData}`),e.var(W.default.parentDataProperty,(0,G._)`${W.default.valCxt}.${W.default.parentDataProperty}`),e.var(W.default.rootData,(0,G._)`${W.default.valCxt}.${W.default.rootData}`),t.dynamicRef&&e.var(W.default.dynamicAnchors,(0,G._)`${W.default.valCxt}.${W.default.dynamicAnchors}`)},()=>{e.var(W.default.instancePath,(0,G._)`""`),e.var(W.default.parentData,(0,G._)`undefined`),e.var(W.default.parentDataProperty,(0,G._)`undefined`),e.var(W.default.rootData,W.default.data),t.dynamicRef&&e.var(W.default.dynamicAnchors,(0,G._)`{}`)})}function cd(e){const{schema:t,opts:n,gen:r}=e;os(e,()=>{n.$comment&&t.$comment&&ls(e),dd(e),r.let(W.default.vErrors,null),r.let(W.default.errors,0),n.unevaluated&&ud(e),us(e),yd(e)})}function ud(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,G._)`${n}.evaluated`),t.if((0,G._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,G._)`${e.evaluated}.props`,(0,G._)`undefined`)),t.if((0,G._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,G._)`${e.evaluated}.items`,(0,G._)`undefined`))}function Go(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,G._)`/*# sourceURL=${n} */`:G.nil}function ld(e,t){if(ss(e)&&(cs(e),as(e))){fd(e,t);return}(0,is.boolOrEmptySchema)(e,t)}function as({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function ss(e){return typeof e.schema!="boolean"}function fd(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&ls(e),pd(e),md(e);const o=r.const("_errs",W.default.errors);us(e,o),r.var(t,(0,G._)`${o} === ${W.default.errors}`)}function cs(e){(0,ct.checkUnknownRules)(e),hd(e)}function us(e,t){if(e.opts.jtd)return Bo(e,[],!1,t);const n=(0,Ko.getSchemaTypes)(e.schema),r=(0,Ko.coerceAndCheckDataType)(e,n);Bo(e,n,!r,t)}function hd(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,ct.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function dd(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,ct.checkStrictMode)(e,"default is ignored in the schema root")}function pd(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,id.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function md(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ls({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(i.$comment===!0)e.code((0,G._)`${W.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){const a=(0,G.str)`${r}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code((0,G._)`${W.default.self}.opts.$comment(${o}, ${a}, ${s}.schema)`)}}function yd(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if((0,G._)`${W.default.errors} === 0`,()=>t.return(W.default.data),()=>t.throw((0,G._)`new ${i}(${W.default.vErrors})`)):(t.assign((0,G._)`${r}.errors`,W.default.vErrors),o.unevaluated&&gd(e),t.return((0,G._)`${W.default.errors} === 0`))}function gd({gen:e,evaluated:t,props:n,items:r}){n instanceof G.Name&&e.assign((0,G._)`${t}.props`,n),r instanceof G.Name&&e.assign((0,G._)`${t}.items`,r)}function Bo(e,t,n,r){const{gen:i,schema:o,data:a,allErrors:s,opts:c,self:l}=e,{RULES:u}=l;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,ct.schemaHasRulesButRef)(o,u))){i.block(()=>hs(e,"$ref",u.all.$ref.definition));return}c.jtd||vd(e,t),i.block(()=>{for(const y of u.rules)f(y);f(u.post)});function f(y){(0,bi.shouldUseGroup)(o,y)&&(y.type?(i.if((0,dr.checkDataType)(y.type,a,c.strictNumbers)),Xo(e,y),t.length===1&&t[0]===y.type&&n&&(i.else(),(0,dr.reportTypeError)(e)),i.endIf()):Xo(e,y),s||i.if((0,G._)`${W.default.errors} === ${r||0}`))}}function Xo(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,rd.assignDefaults)(e,t.type),n.block(()=>{for(const o of t.rules)(0,bi.shouldUseRule)(r,o)&&hs(e,o.keyword,o.definition,t.type)})}function vd(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(_d(e,t),e.opts.allowUnionTypes||$d(e,t),wd(e,e.dataTypes))}function _d(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Zo(e.dataTypes,n)||Si(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(n=>Zo(t,n))}}function $d(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Si(e,"use allowUnionTypes to allow union type keyword")}function wd(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,bi.shouldUseRule)(e.schema,i)){const{type:o}=i.definition;o.length&&!o.some(a=>bd(t,a))&&Si(e,`missing type "${o.join(",")}" for keyword "${r}"`)}}}function bd(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Zo(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Si(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,ct.checkStrictMode)(e,t,e.opts.strictTypes)}class fs{constructor(t,n,r){if((0,mn.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ct.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",ds(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mn.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",W.default.errors))}result(t,n,r){this.failResult((0,G.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,G.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,G._)`${n} !== undefined && (${(0,G.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?un.reportExtraError:un.reportError)(this,this.def.error,n)}$dataError(){(0,un.reportError)(this,this.def.$dataError||un.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,un.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=G.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=G.nil,n=G.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:o,def:a}=this;r.if((0,G.or)((0,G._)`${i} === undefined`,n)),t!==G.nil&&r.assign(t,!0),(o.length||a.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==G.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:o}=this;return(0,G.or)(a(),s());function a(){if(r.length){if(!(n instanceof G.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,G._)`${(0,dr.checkDataTypes)(c,n,o.opts.strictNumbers,dr.DataType.Wrong)}`}return G.nil}function s(){if(i.validateSchema){const c=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,G._)`!${c}(${n})`}return G.nil}}subschema(t,n){const r=(0,Vr.getSubschema)(this.it,t);(0,Vr.extendSubschemaData)(r,this.it,t),(0,Vr.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return ld(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=ct.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=ct.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,G.Name)),!0}}Ue.KeywordCxt=fs;function hs(e,t,n,r){const i=new fs(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,mn.funcKeywordCode)(i,n):"macro"in n?(0,mn.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,mn.funcKeywordCode)(i,n)}const Sd=/^\/(?:[^~]|~0|~1)*$/,Ed=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ds(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(e==="")return W.default.rootData;if(e[0]==="/"){if(!Sd.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=W.default.rootData}else{const l=Ed.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+l[1];if(i=l[2],i==="#"){if(u>=t)throw new Error(c("property/index",u));return r[t-u]}if(u>t)throw new Error(c("data",u));if(o=n[t-u],!i)return o}let a=o;const s=i.split("/");for(const l of s)l&&(o=(0,G._)`${o}${(0,G.getProperty)((0,ct.unescapeJsonPointer)(l))}`,a=(0,G._)`${a} && ${o}`);return a;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${t}`}}Ue.getData=ds;var On={};Object.defineProperty(On,"__esModule",{value:!0});class xd extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}On.default=xd;var An={};Object.defineProperty(An,"__esModule",{value:!0});const Fr=be;class Pd extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Fr.resolveUrl)(t,n,r),this.missingSchema=(0,Fr.normalizeId)((0,Fr.getFullPath)(t,this.missingRef))}}An.default=Pd;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.resolveSchema=Oe.getCompilingSchema=Oe.resolveRef=Oe.compileSchema=Oe.SchemaEnv=void 0;const Fe=ne,Nd=On,wt=nt,He=be,Yo=ae,kd=Ue;class Cr{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,He.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Oe.SchemaEnv=Cr;function Ei(e){const t=ps.call(this,e);if(t)return t;const n=(0,He.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,a=new Fe.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o});let s;e.$async&&(s=a.scopeValue("Error",{ref:Nd.default,code:(0,Fe._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");e.validateName=c;const l={gen:a,allErrors:this.opts.allErrors,data:wt.default.data,parentData:wt.default.parentData,parentDataProperty:wt.default.parentDataProperty,dataNames:[wt.default.data],dataPathArr:[Fe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Fe.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:s,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Fe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fe._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,kd.validateFunctionCode)(l),a.optimize(this.opts.code.optimize);const f=a.toString();u=`${a.scopeRefs(wt.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const m=new Function(`${wt.default.self}`,`${wt.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:m}),m.errors=null,m.schema=e.schema,m.schemaEnv=e,e.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:c,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:$,items:_}=l;m.evaluated={props:$ instanceof Fe.Name?void 0:$,items:_ instanceof Fe.Name?void 0:_,dynamicProps:$ instanceof Fe.Name,dynamicItems:_ instanceof Fe.Name},m.source&&(m.source.evaluated=(0,Fe.stringify)(m.evaluated))}return e.validate=m,e}catch(f){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(e)}}Oe.compileSchema=Ei;function Td(e,t,n){var r;n=(0,He.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let o=Ad.call(this,e,n);if(o===void 0){const a=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:s}=this.opts;a&&(o=new Cr({schema:a,schemaId:s,root:e,baseId:t}))}if(o!==void 0)return e.refs[n]=Cd.call(this,o)}Oe.resolveRef=Td;function Cd(e){return(0,He.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Ei.call(this,e)}function ps(e){for(const t of this._compilations)if(Od(t,e))return t}Oe.getCompilingSchema=ps;function Od(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Ad(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Or.call(this,e,t)}function Or(e,t){const n=this.opts.uriResolver.parse(t),r=(0,He._getFullPath)(this.opts.uriResolver,n);let i=(0,He.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Lr.call(this,n,e);const o=(0,He.normalizeId)(r),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const s=Or.call(this,e,a);return typeof(s==null?void 0:s.schema)!="object"?void 0:Lr.call(this,n,s)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||Ei.call(this,a),o===(0,He.normalizeId)(t)){const{schema:s}=a,{schemaId:c}=this.opts,l=s[c];return l&&(i=(0,He.resolveUrl)(this.opts.uriResolver,i,l)),new Cr({schema:s,schemaId:c,root:e,baseId:i})}return Lr.call(this,n,a)}}Oe.resolveSchema=Or;const Md=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Lr(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const s of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,Yo.unescapeFragment)(s)];if(c===void 0)return;n=c;const l=typeof n=="object"&&n[this.opts.schemaId];!Md.has(s)&&l&&(t=(0,He.resolveUrl)(this.opts.uriResolver,t,l))}let o;if(typeof n!="boolean"&&n.$ref&&!(0,Yo.schemaHasRulesButRef)(n,this.RULES)){const s=(0,He.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=Or.call(this,r,s)}const{schemaId:a}=this.opts;if(o=o||new Cr({schema:n,schemaId:a,root:r,baseId:t}),o.schema!==o.root.schema)return o}const Rd="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Id="Meta-schema for $data reference (JSON AnySchema extension proposal)",Dd="object",jd=["$data"],zd={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Vd=!1,Fd={$id:Rd,description:Id,type:Dd,required:jd,properties:zd,additionalProperties:Vd};var xi={},pr={},Ld={get exports(){return pr},set exports(e){pr=e}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(ah,function(n){function r(){for(var E=arguments.length,g=Array(E),x=0;x<E;x++)g[x]=arguments[x];if(g.length>1){g[0]=g[0].slice(0,-1);for(var M=g.length-1,A=1;A<M;++A)g[A]=g[A].slice(1,-1);return g[M]=g[M].slice(1),g.join("")}else return g[0]}function i(E){return"(?:"+E+")"}function o(E){return E===void 0?"undefined":E===null?"null":Object.prototype.toString.call(E).split(" ").pop().split("]").shift().toLowerCase()}function a(E){return E.toUpperCase()}function s(E){return E!=null?E instanceof Array?E:typeof E.length!="number"||E.split||E.setInterval||E.call?[E]:Array.prototype.slice.call(E):[]}function c(E,g){var x=E;if(g)for(var M in g)x[M]=g[M];return x}function l(E){var g="[A-Za-z]",x="[0-9]",M=r(x,"[A-Fa-f]"),A=i(i("%[EFef]"+M+"%"+M+M+"%"+M+M)+"|"+i("%[89A-Fa-f]"+M+"%"+M+M)+"|"+i("%"+M+M)),B="[\\:\\/\\?\\#\\[\\]\\@]",X="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",oe=r(B,X),le=E?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ye=E?"[\\uE000-\\uF8FF]":"[]",re=r(g,x,"[\\-\\.\\_\\~]",le);i(g+r(g,x,"[\\+\\-\\.]")+"*"),i(i(A+"|"+r(re,X,"[\\:]"))+"*");var ue=i(i("25[0-5]")+"|"+i("2[0-4]"+x)+"|"+i("1"+x+x)+"|"+i("0?[1-9]"+x)+"|0?0?"+x),ge=i(ue+"\\."+ue+"\\."+ue+"\\."+ue),J=i(M+"{1,4}"),de=i(i(J+"\\:"+J)+"|"+ge),$e=i(i(J+"\\:")+"{6}"+de),pe=i("\\:\\:"+i(J+"\\:")+"{5}"+de),ft=i(i(J)+"?\\:\\:"+i(J+"\\:")+"{4}"+de),Ze=i(i(i(J+"\\:")+"{0,1}"+J)+"?\\:\\:"+i(J+"\\:")+"{3}"+de),Ye=i(i(i(J+"\\:")+"{0,2}"+J)+"?\\:\\:"+i(J+"\\:")+"{2}"+de),Dt=i(i(i(J+"\\:")+"{0,3}"+J)+"?\\:\\:"+J+"\\:"+de),_t=i(i(i(J+"\\:")+"{0,4}"+J)+"?\\:\\:"+de),ze=i(i(i(J+"\\:")+"{0,5}"+J)+"?\\:\\:"+J),We=i(i(i(J+"\\:")+"{0,6}"+J)+"?\\:\\:"),$t=i([$e,pe,ft,Ze,Ye,Dt,_t,ze,We].join("|")),rt=i(i(re+"|"+A)+"+");i("[vV]"+M+"+\\."+r(re,X,"[\\:]")+"+"),i(i(A+"|"+r(re,X))+"*");var on=i(A+"|"+r(re,X,"[\\:\\@]"));return i(i(A+"|"+r(re,X,"[\\@]"))+"+"),i(i(on+"|"+r("[\\/\\?]",ye))+"*"),{NOT_SCHEME:new RegExp(r("[^]",g,x,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",re,X),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",re,X),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",re,X),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",re,X),"g"),NOT_QUERY:new RegExp(r("[^\\%]",re,X,"[\\:\\@\\/\\?]",ye),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",re,X,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",re,X),"g"),UNRESERVED:new RegExp(re,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",re,oe),"g"),PCT_ENCODED:new RegExp(A,"g"),IPV4ADDRESS:new RegExp("^("+ge+")$"),IPV6ADDRESS:new RegExp("^\\[?("+$t+")"+i(i("\\%25|\\%(?!"+M+"{2})")+"("+rt+")")+"?\\]?$")}}var u=l(!1),f=l(!0),y=function(){function E(g,x){var M=[],A=!0,B=!1,X=void 0;try{for(var oe=g[Symbol.iterator](),le;!(A=(le=oe.next()).done)&&(M.push(le.value),!(x&&M.length===x));A=!0);}catch(ye){B=!0,X=ye}finally{try{!A&&oe.return&&oe.return()}finally{if(B)throw X}}return M}return function(g,x){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return E(g,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(E){if(Array.isArray(E)){for(var g=0,x=Array(E.length);g<E.length;g++)x[g]=E[g];return x}else return Array.from(E)},$=2147483647,_=36,p=1,h=26,w=38,b=700,v=72,O=128,P="-",k=/^xn--/,j=/[^\0-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Q=_-p,K=Math.floor,ce=String.fromCharCode;function T(E){throw new RangeError(U[E])}function q(E,g){for(var x=[],M=E.length;M--;)x[M]=g(E[M]);return x}function z(E,g){var x=E.split("@"),M="";x.length>1&&(M=x[0]+"@",E=x[1]),E=E.replace(L,".");var A=E.split("."),B=q(A,g).join(".");return M+B}function H(E){for(var g=[],x=0,M=E.length;x<M;){var A=E.charCodeAt(x++);if(A>=55296&&A<=56319&&x<M){var B=E.charCodeAt(x++);(B&64512)==56320?g.push(((A&1023)<<10)+(B&1023)+65536):(g.push(A),x--)}else g.push(A)}return g}var Z=function(g){return String.fromCodePoint.apply(String,m(g))},Y=function(g){return g-48<10?g-22:g-65<26?g-65:g-97<26?g-97:_},D=function(g,x){return g+22+75*(g<26)-((x!=0)<<5)},N=function(g,x,M){var A=0;for(g=M?K(g/b):g>>1,g+=K(g/x);g>Q*h>>1;A+=_)g=K(g/Q);return K(A+(Q+1)*g/(g+w))},I=function(g){var x=[],M=g.length,A=0,B=O,X=v,oe=g.lastIndexOf(P);oe<0&&(oe=0);for(var le=0;le<oe;++le)g.charCodeAt(le)>=128&&T("not-basic"),x.push(g.charCodeAt(le));for(var ye=oe>0?oe+1:0;ye<M;){for(var re=A,ue=1,ge=_;;ge+=_){ye>=M&&T("invalid-input");var J=Y(g.charCodeAt(ye++));(J>=_||J>K(($-A)/ue))&&T("overflow"),A+=J*ue;var de=ge<=X?p:ge>=X+h?h:ge-X;if(J<de)break;var $e=_-de;ue>K($/$e)&&T("overflow"),ue*=$e}var pe=x.length+1;X=N(A-re,pe,re==0),K(A/pe)>$-B&&T("overflow"),B+=K(A/pe),A%=pe,x.splice(A++,0,B)}return String.fromCodePoint.apply(String,x)},C=function(g){var x=[];g=H(g);var M=g.length,A=O,B=0,X=v,oe=!0,le=!1,ye=void 0;try{for(var re=g[Symbol.iterator](),ue;!(oe=(ue=re.next()).done);oe=!0){var ge=ue.value;ge<128&&x.push(ce(ge))}}catch(an){le=!0,ye=an}finally{try{!oe&&re.return&&re.return()}finally{if(le)throw ye}}var J=x.length,de=J;for(J&&x.push(P);de<M;){var $e=$,pe=!0,ft=!1,Ze=void 0;try{for(var Ye=g[Symbol.iterator](),Dt;!(pe=(Dt=Ye.next()).done);pe=!0){var _t=Dt.value;_t>=A&&_t<$e&&($e=_t)}}catch(an){ft=!0,Ze=an}finally{try{!pe&&Ye.return&&Ye.return()}finally{if(ft)throw Ze}}var ze=de+1;$e-A>K(($-B)/ze)&&T("overflow"),B+=($e-A)*ze,A=$e;var We=!0,$t=!1,rt=void 0;try{for(var on=g[Symbol.iterator](),go;!(We=(go=on.next()).done);We=!0){var vo=go.value;if(vo<A&&++B>$&&T("overflow"),vo==A){for(var In=B,Dn=_;;Dn+=_){var jn=Dn<=X?p:Dn>=X+h?h:Dn-X;if(In<jn)break;var _o=In-jn,$o=_-jn;x.push(ce(D(jn+_o%$o,0))),In=K(_o/$o)}x.push(ce(D(In,0))),X=N(B,ze,de==J),B=0,++de}}}catch(an){$t=!0,rt=an}finally{try{!We&&on.return&&on.return()}finally{if($t)throw rt}}++B,++A}return x.join("")},d=function(g){return z(g,function(x){return k.test(x)?I(x.slice(4).toLowerCase()):x})},S=function(g){return z(g,function(x){return j.test(x)?"xn--"+C(x):x})},R={version:"2.1.0",ucs2:{decode:H,encode:Z},decode:I,encode:C,toASCII:S,toUnicode:d},V={};function F(E){var g=E.charCodeAt(0),x=void 0;return g<16?x="%0"+g.toString(16).toUpperCase():g<128?x="%"+g.toString(16).toUpperCase():g<2048?x="%"+(g>>6|192).toString(16).toUpperCase()+"%"+(g&63|128).toString(16).toUpperCase():x="%"+(g>>12|224).toString(16).toUpperCase()+"%"+(g>>6&63|128).toString(16).toUpperCase()+"%"+(g&63|128).toString(16).toUpperCase(),x}function ee(E){for(var g="",x=0,M=E.length;x<M;){var A=parseInt(E.substr(x+1,2),16);if(A<128)g+=String.fromCharCode(A),x+=3;else if(A>=194&&A<224){if(M-x>=6){var B=parseInt(E.substr(x+4,2),16);g+=String.fromCharCode((A&31)<<6|B&63)}else g+=E.substr(x,6);x+=6}else if(A>=224){if(M-x>=9){var X=parseInt(E.substr(x+4,2),16),oe=parseInt(E.substr(x+7,2),16);g+=String.fromCharCode((A&15)<<12|(X&63)<<6|oe&63)}else g+=E.substr(x,9);x+=9}else g+=E.substr(x,3),x+=3}return g}function ie(E,g){function x(M){var A=ee(M);return A.match(g.UNRESERVED)?A:M}return E.scheme&&(E.scheme=String(E.scheme).replace(g.PCT_ENCODED,x).toLowerCase().replace(g.NOT_SCHEME,"")),E.userinfo!==void 0&&(E.userinfo=String(E.userinfo).replace(g.PCT_ENCODED,x).replace(g.NOT_USERINFO,F).replace(g.PCT_ENCODED,a)),E.host!==void 0&&(E.host=String(E.host).replace(g.PCT_ENCODED,x).toLowerCase().replace(g.NOT_HOST,F).replace(g.PCT_ENCODED,a)),E.path!==void 0&&(E.path=String(E.path).replace(g.PCT_ENCODED,x).replace(E.scheme?g.NOT_PATH:g.NOT_PATH_NOSCHEME,F).replace(g.PCT_ENCODED,a)),E.query!==void 0&&(E.query=String(E.query).replace(g.PCT_ENCODED,x).replace(g.NOT_QUERY,F).replace(g.PCT_ENCODED,a)),E.fragment!==void 0&&(E.fragment=String(E.fragment).replace(g.PCT_ENCODED,x).replace(g.NOT_FRAGMENT,F).replace(g.PCT_ENCODED,a)),E}function me(E){return E.replace(/^0*(.*)/,"$1")||"0"}function Ge(E,g){var x=E.match(g.IPV4ADDRESS)||[],M=y(x,2),A=M[1];return A?A.split(".").map(me).join("."):E}function Ct(E,g){var x=E.match(g.IPV6ADDRESS)||[],M=y(x,3),A=M[1],B=M[2];if(A){for(var X=A.toLowerCase().split("::").reverse(),oe=y(X,2),le=oe[0],ye=oe[1],re=ye?ye.split(":").map(me):[],ue=le.split(":").map(me),ge=g.IPV4ADDRESS.test(ue[ue.length-1]),J=ge?7:8,de=ue.length-J,$e=Array(J),pe=0;pe<J;++pe)$e[pe]=re[pe]||ue[de+pe]||"";ge&&($e[J-1]=Ge($e[J-1],g));var ft=$e.reduce(function(ze,We,$t){if(!We||We==="0"){var rt=ze[ze.length-1];rt&&rt.index+rt.length===$t?rt.length++:ze.push({index:$t,length:1})}return ze},[]),Ze=ft.sort(function(ze,We){return We.length-ze.length})[0],Ye=void 0;if(Ze&&Ze.length>1){var Dt=$e.slice(0,Ze.index),_t=$e.slice(Ze.index+Ze.length);Ye=Dt.join(":")+"::"+_t.join(":")}else Ye=$e.join(":");return B&&(Ye+="%"+B),Ye}else return E}var Wt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Jt="".match(/(){0}/)[1]===void 0;function Re(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={},M=g.iri!==!1?f:u;g.reference==="suffix"&&(E=(g.scheme?g.scheme+":":"")+"//"+E);var A=E.match(Wt);if(A){Jt?(x.scheme=A[1],x.userinfo=A[3],x.host=A[4],x.port=parseInt(A[5],10),x.path=A[6]||"",x.query=A[7],x.fragment=A[8],isNaN(x.port)&&(x.port=A[5])):(x.scheme=A[1]||void 0,x.userinfo=E.indexOf("@")!==-1?A[3]:void 0,x.host=E.indexOf("//")!==-1?A[4]:void 0,x.port=parseInt(A[5],10),x.path=A[6]||"",x.query=E.indexOf("?")!==-1?A[7]:void 0,x.fragment=E.indexOf("#")!==-1?A[8]:void 0,isNaN(x.port)&&(x.port=E.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?A[4]:void 0)),x.host&&(x.host=Ct(Ge(x.host,M),M)),x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",g.reference&&g.reference!=="suffix"&&g.reference!==x.reference&&(x.error=x.error||"URI is not a "+g.reference+" reference.");var B=V[(g.scheme||x.scheme||"").toLowerCase()];if(!g.unicodeSupport&&(!B||!B.unicodeSupport)){if(x.host&&(g.domainHost||B&&B.domainHost))try{x.host=R.toASCII(x.host.replace(M.PCT_ENCODED,ee).toLowerCase())}catch(X){x.error=x.error||"Host's domain name can not be converted to ASCII via punycode: "+X}ie(x,u)}else ie(x,M);B&&B.parse&&B.parse(x,g)}else x.error=x.error||"URI can not be parsed.";return x}function Qt(E,g){var x=g.iri!==!1?f:u,M=[];return E.userinfo!==void 0&&(M.push(E.userinfo),M.push("@")),E.host!==void 0&&M.push(Ct(Ge(String(E.host),x),x).replace(x.IPV6ADDRESS,function(A,B,X){return"["+B+(X?"%25"+X:"")+"]"})),(typeof E.port=="number"||typeof E.port=="string")&&(M.push(":"),M.push(String(E.port))),M.length?M.join(""):void 0}var Ot=/^\.\.?\//,At=/^\/\.(\/|$)/,Mt=/^\/\.\.(\/|$)/,en=/^\/?(?:.|\n)*?(?=\/|$)/;function Be(E){for(var g=[];E.length;)if(E.match(Ot))E=E.replace(Ot,"");else if(E.match(At))E=E.replace(At,"/");else if(E.match(Mt))E=E.replace(Mt,"/"),g.pop();else if(E==="."||E==="..")E="";else{var x=E.match(en);if(x){var M=x[0];E=E.slice(M.length),g.push(M)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function ke(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=g.iri?f:u,M=[],A=V[(g.scheme||E.scheme||"").toLowerCase()];if(A&&A.serialize&&A.serialize(E,g),E.host&&!x.IPV6ADDRESS.test(E.host)){if(g.domainHost||A&&A.domainHost)try{E.host=g.iri?R.toUnicode(E.host):R.toASCII(E.host.replace(x.PCT_ENCODED,ee).toLowerCase())}catch(oe){E.error=E.error||"Host's domain name can not be converted to "+(g.iri?"Unicode":"ASCII")+" via punycode: "+oe}}ie(E,x),g.reference!=="suffix"&&E.scheme&&(M.push(E.scheme),M.push(":"));var B=Qt(E,g);if(B!==void 0&&(g.reference!=="suffix"&&M.push("//"),M.push(B),E.path&&E.path.charAt(0)!=="/"&&M.push("/")),E.path!==void 0){var X=E.path;!g.absolutePath&&(!A||!A.absolutePath)&&(X=Be(X)),B===void 0&&(X=X.replace(/^\/\//,"/%2F")),M.push(X)}return E.query!==void 0&&(M.push("?"),M.push(E.query)),E.fragment!==void 0&&(M.push("#"),M.push(E.fragment)),M.join("")}function Rt(E,g){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},M=arguments[3],A={};return M||(E=Re(ke(E,x),x),g=Re(ke(g,x),x)),x=x||{},!x.tolerant&&g.scheme?(A.scheme=g.scheme,A.userinfo=g.userinfo,A.host=g.host,A.port=g.port,A.path=Be(g.path||""),A.query=g.query):(g.userinfo!==void 0||g.host!==void 0||g.port!==void 0?(A.userinfo=g.userinfo,A.host=g.host,A.port=g.port,A.path=Be(g.path||""),A.query=g.query):(g.path?(g.path.charAt(0)==="/"?A.path=Be(g.path):((E.userinfo!==void 0||E.host!==void 0||E.port!==void 0)&&!E.path?A.path="/"+g.path:E.path?A.path=E.path.slice(0,E.path.lastIndexOf("/")+1)+g.path:A.path=g.path,A.path=Be(A.path)),A.query=g.query):(A.path=E.path,g.query!==void 0?A.query=g.query:A.query=E.query),A.userinfo=E.userinfo,A.host=E.host,A.port=E.port),A.scheme=E.scheme),A.fragment=g.fragment,A}function tn(E,g,x){var M=c({scheme:"null"},x);return ke(Rt(Re(E,M),Re(g,M),M,!0),M)}function gt(E,g){return typeof E=="string"?E=ke(Re(E,g),g):o(E)==="object"&&(E=Re(ke(E,g),g)),E}function nn(E,g,x){return typeof E=="string"?E=ke(Re(E,x),x):o(E)==="object"&&(E=ke(E,x)),typeof g=="string"?g=ke(Re(g,x),x):o(g)==="object"&&(g=ke(g,x)),E===g}function Rn(E,g){return E&&E.toString().replace(!g||!g.iri?u.ESCAPE:f.ESCAPE,F)}function je(E,g){return E&&E.toString().replace(!g||!g.iri?u.PCT_ENCODED:f.PCT_ENCODED,ee)}var vt={scheme:"http",domainHost:!0,parse:function(g,x){return g.host||(g.error=g.error||"HTTP URIs must have a host."),g},serialize:function(g,x){var M=String(g.scheme).toLowerCase()==="https";return(g.port===(M?443:80)||g.port==="")&&(g.port=void 0),g.path||(g.path="/"),g}},co={scheme:"https",domainHost:vt.domainHost,parse:vt.parse,serialize:vt.serialize};function uo(E){return typeof E.secure=="boolean"?E.secure:String(E.scheme).toLowerCase()==="wss"}var rn={scheme:"ws",domainHost:!0,parse:function(g,x){var M=g;return M.secure=uo(M),M.resourceName=(M.path||"/")+(M.query?"?"+M.query:""),M.path=void 0,M.query=void 0,M},serialize:function(g,x){if((g.port===(uo(g)?443:80)||g.port==="")&&(g.port=void 0),typeof g.secure=="boolean"&&(g.scheme=g.secure?"wss":"ws",g.secure=void 0),g.resourceName){var M=g.resourceName.split("?"),A=y(M,2),B=A[0],X=A[1];g.path=B&&B!=="/"?B:void 0,g.query=X,g.resourceName=void 0}return g.fragment=void 0,g}},lo={scheme:"wss",domainHost:rn.domainHost,parse:rn.parse,serialize:rn.serialize},zs={},fo="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Xe="[0-9A-Fa-f]",Vs=i(i("%[EFef]"+Xe+"%"+Xe+Xe+"%"+Xe+Xe)+"|"+i("%[89A-Fa-f]"+Xe+"%"+Xe+Xe)+"|"+i("%"+Xe+Xe)),Fs="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ls="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",qs=r(Ls,'[\\"\\\\]'),Hs="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Us=new RegExp(fo,"g"),It=new RegExp(Vs,"g"),Ks=new RegExp(r("[^]",Fs,"[\\.]",'[\\"]',qs),"g"),ho=new RegExp(r("[^]",fo,Hs),"g"),Gs=ho;function Rr(E){var g=ee(E);return g.match(Us)?g:E}var po={scheme:"mailto",parse:function(g,x){var M=g,A=M.to=M.path?M.path.split(","):[];if(M.path=void 0,M.query){for(var B=!1,X={},oe=M.query.split("&"),le=0,ye=oe.length;le<ye;++le){var re=oe[le].split("=");switch(re[0]){case"to":for(var ue=re[1].split(","),ge=0,J=ue.length;ge<J;++ge)A.push(ue[ge]);break;case"subject":M.subject=je(re[1],x);break;case"body":M.body=je(re[1],x);break;default:B=!0,X[je(re[0],x)]=je(re[1],x);break}}B&&(M.headers=X)}M.query=void 0;for(var de=0,$e=A.length;de<$e;++de){var pe=A[de].split("@");if(pe[0]=je(pe[0]),x.unicodeSupport)pe[1]=je(pe[1],x).toLowerCase();else try{pe[1]=R.toASCII(je(pe[1],x).toLowerCase())}catch(ft){M.error=M.error||"Email address's domain name can not be converted to ASCII via punycode: "+ft}A[de]=pe.join("@")}return M},serialize:function(g,x){var M=g,A=s(g.to);if(A){for(var B=0,X=A.length;B<X;++B){var oe=String(A[B]),le=oe.lastIndexOf("@"),ye=oe.slice(0,le).replace(It,Rr).replace(It,a).replace(Ks,F),re=oe.slice(le+1);try{re=x.iri?R.toUnicode(re):R.toASCII(je(re,x).toLowerCase())}catch(de){M.error=M.error||"Email address's domain name can not be converted to "+(x.iri?"Unicode":"ASCII")+" via punycode: "+de}A[B]=ye+"@"+re}M.path=A.join(",")}var ue=g.headers=g.headers||{};g.subject&&(ue.subject=g.subject),g.body&&(ue.body=g.body);var ge=[];for(var J in ue)ue[J]!==zs[J]&&ge.push(J.replace(It,Rr).replace(It,a).replace(ho,F)+"="+ue[J].replace(It,Rr).replace(It,a).replace(Gs,F));return ge.length&&(M.query=ge.join("&")),M}},Bs=/^([^\:]+)\:(.*)/,mo={scheme:"urn",parse:function(g,x){var M=g.path&&g.path.match(Bs),A=g;if(M){var B=x.scheme||A.scheme||"urn",X=M[1].toLowerCase(),oe=M[2],le=B+":"+(x.nid||X),ye=V[le];A.nid=X,A.nss=oe,A.path=void 0,ye&&(A=ye.parse(A,x))}else A.error=A.error||"URN can not be parsed.";return A},serialize:function(g,x){var M=x.scheme||g.scheme||"urn",A=g.nid,B=M+":"+(x.nid||A),X=V[B];X&&(g=X.serialize(g,x));var oe=g,le=g.nss;return oe.path=(A||x.nid)+":"+le,oe}},Xs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,yo={scheme:"urn:uuid",parse:function(g,x){var M=g;return M.uuid=M.nss,M.nss=void 0,!x.tolerant&&(!M.uuid||!M.uuid.match(Xs))&&(M.error=M.error||"UUID is not valid."),M},serialize:function(g,x){var M=g;return M.nss=(g.uuid||"").toLowerCase(),M}};V[vt.scheme]=vt,V[co.scheme]=co,V[rn.scheme]=rn,V[lo.scheme]=lo,V[po.scheme]=po,V[mo.scheme]=mo,V[yo.scheme]=yo,n.SCHEMES=V,n.pctEncChar=F,n.pctDecChars=ee,n.parse=Re,n.removeDotSegments=Be,n.serialize=ke,n.resolveComponents=Rt,n.resolve=tn,n.normalize=gt,n.equal=nn,n.escapeComponent=Rn,n.unescapeComponent=je,Object.defineProperty(n,"__esModule",{value:!0})})})(Ld,pr);Object.defineProperty(xi,"__esModule",{value:!0});const ms=pr;ms.code='require("ajv/dist/runtime/uri").default';xi.default=ms;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ue;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ne;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=On,i=An,o=kt,a=Oe,s=ne,c=be,l=Cn,u=ae,f=Fd,y=xi,m=(D,N)=>new RegExp(D,N);m.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),p={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function b(D){var N,I,C,d,S,R,V,F,ee,ie,me,Ge,Ct,Wt,Jt,Re,Qt,Ot,At,Mt,en,Be,ke,Rt,tn;const gt=D.strict,nn=(N=D.code)===null||N===void 0?void 0:N.optimize,Rn=nn===!0||nn===void 0?1:nn||0,je=(C=(I=D.code)===null||I===void 0?void 0:I.regExp)!==null&&C!==void 0?C:m,vt=(d=D.uriResolver)!==null&&d!==void 0?d:y.default;return{strictSchema:(R=(S=D.strictSchema)!==null&&S!==void 0?S:gt)!==null&&R!==void 0?R:!0,strictNumbers:(F=(V=D.strictNumbers)!==null&&V!==void 0?V:gt)!==null&&F!==void 0?F:!0,strictTypes:(ie=(ee=D.strictTypes)!==null&&ee!==void 0?ee:gt)!==null&&ie!==void 0?ie:"log",strictTuples:(Ge=(me=D.strictTuples)!==null&&me!==void 0?me:gt)!==null&&Ge!==void 0?Ge:"log",strictRequired:(Wt=(Ct=D.strictRequired)!==null&&Ct!==void 0?Ct:gt)!==null&&Wt!==void 0?Wt:!1,code:D.code?{...D.code,optimize:Rn,regExp:je}:{optimize:Rn,regExp:je},loopRequired:(Jt=D.loopRequired)!==null&&Jt!==void 0?Jt:w,loopEnum:(Re=D.loopEnum)!==null&&Re!==void 0?Re:w,meta:(Qt=D.meta)!==null&&Qt!==void 0?Qt:!0,messages:(Ot=D.messages)!==null&&Ot!==void 0?Ot:!0,inlineRefs:(At=D.inlineRefs)!==null&&At!==void 0?At:!0,schemaId:(Mt=D.schemaId)!==null&&Mt!==void 0?Mt:"$id",addUsedSchema:(en=D.addUsedSchema)!==null&&en!==void 0?en:!0,validateSchema:(Be=D.validateSchema)!==null&&Be!==void 0?Be:!0,validateFormats:(ke=D.validateFormats)!==null&&ke!==void 0?ke:!0,unicodeRegExp:(Rt=D.unicodeRegExp)!==null&&Rt!==void 0?Rt:!0,int32range:(tn=D.int32range)!==null&&tn!==void 0?tn:!0,uriResolver:vt}}class v{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...b(N)};const{es5:I,lines:C}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:_,es5:I,lines:C}),this.logger=K(N.logger);const d=N.validateFormats;N.validateFormats=!1,this.RULES=(0,o.getRules)(),O.call(this,p,N,"NOT SUPPORTED"),O.call(this,h,N,"DEPRECATED","warn"),this._metaOpts=U.call(this),N.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&L.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),k.call(this),N.validateFormats=d}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:I,schemaId:C}=this.opts;let d=f;C==="id"&&(d={...f},d.id=d.$id,delete d.$id),I&&N&&this.addMetaSchema(d,d[C],!1)}defaultMeta(){const{meta:N,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[I]||N:void 0}validate(N,I){let C;if(typeof N=="string"){if(C=this.getSchema(N),!C)throw new Error(`no schema with key or ref "${N}"`)}else C=this.compile(N);const d=C(I);return"$async"in C||(this.errors=C.errors),d}compile(N,I){const C=this._addSchema(N,I);return C.validate||this._compileSchemaEnv(C)}compileAsync(N,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:C}=this.opts;return d.call(this,N,I);async function d(ie,me){await S.call(this,ie.$schema);const Ge=this._addSchema(ie,me);return Ge.validate||R.call(this,Ge)}async function S(ie){ie&&!this.getSchema(ie)&&await d.call(this,{$ref:ie},!0)}async function R(ie){try{return this._compileSchemaEnv(ie)}catch(me){if(!(me instanceof i.default))throw me;return V.call(this,me),await F.call(this,me.missingSchema),R.call(this,ie)}}function V({missingSchema:ie,missingRef:me}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${me} cannot be resolved`)}async function F(ie){const me=await ee.call(this,ie);this.refs[ie]||await S.call(this,me.$schema),this.refs[ie]||this.addSchema(me,ie,I)}async function ee(ie){const me=this._loading[ie];if(me)return me;try{return await(this._loading[ie]=C(ie))}finally{delete this._loading[ie]}}}addSchema(N,I,C,d=this.opts.validateSchema){if(Array.isArray(N)){for(const R of N)this.addSchema(R,void 0,C,d);return this}let S;if(typeof N=="object"){const{schemaId:R}=this.opts;if(S=N[R],S!==void 0&&typeof S!="string")throw new Error(`schema ${R} must be string`)}return I=(0,c.normalizeId)(I||S),this._checkUnique(I),this.schemas[I]=this._addSchema(N,C,I,d,!0),this}addMetaSchema(N,I,C=this.opts.validateSchema){return this.addSchema(N,I,!0,C),this}validateSchema(N,I){if(typeof N=="boolean")return!0;let C;if(C=N.$schema,C!==void 0&&typeof C!="string")throw new Error("$schema must be a string");if(C=C||this.opts.defaultMeta||this.defaultMeta(),!C)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const d=this.validate(C,N);if(!d&&I){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return d}getSchema(N){let I;for(;typeof(I=P.call(this,N))=="string";)N=I;if(I===void 0){const{schemaId:C}=this.opts,d=new a.SchemaEnv({schema:{},schemaId:C});if(I=a.resolveSchema.call(this,d,N),!I)return;this.refs[N]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=P.call(this,N);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const I=N;this._cache.delete(I);let C=N[this.opts.schemaId];return C&&(C=(0,c.normalizeId)(C),delete this.schemas[C],delete this.refs[C]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const I of N)this.addKeyword(I);return this}addKeyword(N,I){let C;if(typeof N=="string")C=N,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=C);else if(typeof N=="object"&&I===void 0){if(I=N,C=I.keyword,Array.isArray(C)&&!C.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(T.call(this,C,I),!I)return(0,u.eachItem)(C,S=>q.call(this,S)),this;H.call(this,I);const d={...I,type:(0,l.getJSONTypes)(I.type),schemaType:(0,l.getJSONTypes)(I.schemaType)};return(0,u.eachItem)(C,d.type.length===0?S=>q.call(this,S,d):S=>d.type.forEach(R=>q.call(this,S,d,R))),this}getKeyword(N){const I=this.RULES.all[N];return typeof I=="object"?I.definition:!!I}removeKeyword(N){const{RULES:I}=this;delete I.keywords[N],delete I.all[N];for(const C of I.rules){const d=C.rules.findIndex(S=>S.keyword===N);d>=0&&C.rules.splice(d,1)}return this}addFormat(N,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[N]=I,this}errorsText(N=this.errors,{separator:I=", ",dataVar:C="data"}={}){return!N||N.length===0?"No errors":N.map(d=>`${C}${d.instancePath} ${d.message}`).reduce((d,S)=>d+I+S)}$dataMetaSchema(N,I){const C=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const d of I){const S=d.split("/").slice(1);let R=N;for(const V of S)R=R[V];for(const V in C){const F=C[V];if(typeof F!="object")continue;const{$data:ee}=F.definition,ie=R[V];ee&&ie&&(R[V]=Y(ie))}}return N}_removeAllSchemas(N,I){for(const C in N){const d=N[C];(!I||I.test(C))&&(typeof d=="string"?delete N[C]:d&&!d.meta&&(this._cache.delete(d.schema),delete N[C]))}}_addSchema(N,I,C,d=this.opts.validateSchema,S=this.opts.addUsedSchema){let R;const{schemaId:V}=this.opts;if(typeof N=="object")R=N[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(N);if(F!==void 0)return F;C=(0,c.normalizeId)(R||C);const ee=c.getSchemaRefs.call(this,N,C);return F=new a.SchemaEnv({schema:N,schemaId:V,meta:I,baseId:C,localRefs:ee}),this._cache.set(F.schema,F),S&&!C.startsWith("#")&&(C&&this._checkUnique(C),this.refs[C]=F),d&&this.validateSchema(N,!0),F}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):a.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const I=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,N)}finally{this.opts=I}}}e.default=v,v.ValidationError=r.default,v.MissingRefError=i.default;function O(D,N,I,C="error"){for(const d in D){const S=d;S in N&&this.logger[C](`${I}: option ${d}. ${D[S]}`)}}function P(D){return D=(0,c.normalizeId)(D),this.schemas[D]||this.refs[D]}function k(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const N in D)this.addSchema(D[N],N)}function j(){for(const D in this.opts.formats){const N=this.opts.formats[D];N&&this.addFormat(D,N)}}function L(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in D){const I=D[N];I.keyword||(I.keyword=N),this.addKeyword(I)}}function U(){const D={...this.opts};for(const N of $)delete D[N];return D}const Q={log(){},warn(){},error(){}};function K(D){if(D===!1)return Q;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const ce=/^[a-z_$][a-z0-9_$:-]*$/i;function T(D,N){const{RULES:I}=this;if((0,u.eachItem)(D,C=>{if(I.keywords[C])throw new Error(`Keyword ${C} is already defined`);if(!ce.test(C))throw new Error(`Keyword ${C} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function q(D,N,I){var C;const d=N==null?void 0:N.post;if(I&&d)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let R=d?S.post:S.rules.find(({type:F})=>F===I);if(R||(R={type:I,rules:[]},S.rules.push(R)),S.keywords[D]=!0,!N)return;const V={keyword:D,definition:{...N,type:(0,l.getJSONTypes)(N.type),schemaType:(0,l.getJSONTypes)(N.schemaType)}};N.before?z.call(this,R,V,N.before):R.rules.push(V),S.all[D]=V,(C=N.implements)===null||C===void 0||C.forEach(F=>this.addKeyword(F))}function z(D,N,I){const C=D.rules.findIndex(d=>d.keyword===I);C>=0?D.rules.splice(C,0,N):(D.rules.push(N),this.logger.warn(`rule ${I} is not defined`))}function H(D){let{metaSchema:N}=D;N!==void 0&&(D.$data&&this.opts.$data&&(N=Y(N)),D.validateSchema=this.compile(N,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Y(D){return{anyOf:[D,Z]}}})(Ga);var Pi={},Ni={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});const qd={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ki.default=qd;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.callRef=Tt.getValidate=void 0;const Hd=An,Wo=te,Te=ne,zt=nt,Jo=Oe,Hn=ae,Ud={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:o,validateName:a,opts:s,self:c}=r,{root:l}=o;if((n==="#"||n==="#/")&&i===l.baseId)return f();const u=Jo.resolveRef.call(c,l,i,n);if(u===void 0)throw new Hd.default(r.opts.uriResolver,i,n);if(u instanceof Jo.SchemaEnv)return y(u);return m(u);function f(){if(o===l)return er(e,a,o,o.$async);const $=t.scopeValue("root",{ref:l});return er(e,(0,Te._)`${$}.validate`,l,l.$async)}function y($){const _=ys(e,$);er(e,_,$,$.$async)}function m($){const _=t.scopeValue("schema",s.code.source===!0?{ref:$,code:(0,Te.stringify)($)}:{ref:$}),p=t.name("valid"),h=e.subschema({schema:$,dataTypes:[],schemaPath:Te.nil,topSchemaRef:_,errSchemaPath:n},p);e.mergeEvaluated(h),e.ok(p)}}};function ys(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Te._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Tt.getValidate=ys;function er(e,t,n,r){const{gen:i,it:o}=e,{allErrors:a,schemaEnv:s,opts:c}=o,l=c.passContext?zt.default.this:Te.nil;r?u():f();function u(){if(!s.$async)throw new Error("async schema referenced by sync schema");const $=i.let("valid");i.try(()=>{i.code((0,Te._)`await ${(0,Wo.callValidateCode)(e,t,l)}`),m(t),a||i.assign($,!0)},_=>{i.if((0,Te._)`!(${_} instanceof ${o.ValidationError})`,()=>i.throw(_)),y(_),a||i.assign($,!1)}),e.ok($)}function f(){e.result((0,Wo.callValidateCode)(e,t,l),()=>m(t),()=>y(t))}function y($){const _=(0,Te._)`${$}.errors`;i.assign(zt.default.vErrors,(0,Te._)`${zt.default.vErrors} === null ? ${_} : ${zt.default.vErrors}.concat(${_})`),i.assign(zt.default.errors,(0,Te._)`${zt.default.vErrors}.length`)}function m($){var _;if(!o.opts.unevaluated)return;const p=(_=n==null?void 0:n.validate)===null||_===void 0?void 0:_.evaluated;if(o.props!==!0)if(p&&!p.dynamicProps)p.props!==void 0&&(o.props=Hn.mergeEvaluated.props(i,p.props,o.props));else{const h=i.var("props",(0,Te._)`${$}.evaluated.props`);o.props=Hn.mergeEvaluated.props(i,h,o.props,Te.Name)}if(o.items!==!0)if(p&&!p.dynamicItems)p.items!==void 0&&(o.items=Hn.mergeEvaluated.items(i,p.items,o.items));else{const h=i.var("items",(0,Te._)`${$}.evaluated.items`);o.items=Hn.mergeEvaluated.items(i,h,o.items,Te.Name)}}}Tt.callRef=er;Tt.default=Ud;Object.defineProperty(Ni,"__esModule",{value:!0});const Kd=ki,Gd=Tt,Bd=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Kd.default,Gd.default];Ni.default=Bd;var Ti={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});const mr=ne,dt=mr.operators,yr={maximum:{okStr:"<=",ok:dt.LTE,fail:dt.GT},minimum:{okStr:">=",ok:dt.GTE,fail:dt.LT},exclusiveMaximum:{okStr:"<",ok:dt.LT,fail:dt.GTE},exclusiveMinimum:{okStr:">",ok:dt.GT,fail:dt.LTE}},Xd={message:({keyword:e,schemaCode:t})=>(0,mr.str)`must be ${yr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,mr._)`{comparison: ${yr[e].okStr}, limit: ${t}}`},Zd={keyword:Object.keys(yr),type:"number",schemaType:"number",$data:!0,error:Xd,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,mr._)`${n} ${yr[t].fail} ${r} || isNaN(${n})`)}};Ci.default=Zd;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});const yn=ne,Yd={message:({schemaCode:e})=>(0,yn.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,yn._)`{multipleOf: ${e}}`},Wd={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Yd,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,o=i.opts.multipleOfPrecision,a=t.let("res"),s=o?(0,yn._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,yn._)`${a} !== parseInt(${a})`;e.fail$data((0,yn._)`(${r} === 0 || (${a} = ${n}/${r}, ${s}))`)}};Oi.default=Wd;var Ai={},Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});function gs(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}Mi.default=gs;gs.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ai,"__esModule",{value:!0});const St=ne,Jd=ae,Qd=Mi,ep={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,St.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,St._)`{limit: ${e}}`},tp={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ep,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,o=t==="maxLength"?St.operators.GT:St.operators.LT,a=i.opts.unicode===!1?(0,St._)`${n}.length`:(0,St._)`${(0,Jd.useFunc)(e.gen,Qd.default)}(${n})`;e.fail$data((0,St._)`${a} ${o} ${r}`)}};Ai.default=tp;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});const np=te,gr=ne,rp={message:({schemaCode:e})=>(0,gr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,gr._)`{pattern: ${e}}`},ip={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:rp,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:o}=e,a=o.opts.unicodeRegExp?"u":"",s=n?(0,gr._)`(new RegExp(${i}, ${a}))`:(0,np.usePattern)(e,r);e.fail$data((0,gr._)`!${s}.test(${t})`)}};Ri.default=ip;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});const gn=ne,op={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,gn.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,gn._)`{limit: ${e}}`},ap={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:op,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?gn.operators.GT:gn.operators.LT;e.fail$data((0,gn._)`Object.keys(${n}).length ${i} ${r}`)}};Ii.default=ap;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});const ln=te,vn=ne,sp=ae,cp={message:({params:{missingProperty:e}})=>(0,vn.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,vn._)`{missingProperty: ${e}}`},up={keyword:"required",type:"object",schemaType:"array",$data:!0,error:cp,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:o,it:a}=e,{opts:s}=a;if(!o&&n.length===0)return;const c=n.length>=s.loopRequired;if(a.allErrors?l():u(),s.strictRequired){const m=e.parentSchema.properties,{definedProperties:$}=e.it;for(const _ of n)if((m==null?void 0:m[_])===void 0&&!$.has(_)){const p=a.schemaEnv.baseId+a.errSchemaPath,h=`required property "${_}" is not defined at "${p}" (strictRequired)`;(0,sp.checkStrictMode)(a,h,a.opts.strictRequired)}}function l(){if(c||o)e.block$data(vn.nil,f);else for(const m of n)(0,ln.checkReportMissingProp)(e,m)}function u(){const m=t.let("missing");if(c||o){const $=t.let("valid",!0);e.block$data($,()=>y(m,$)),e.ok($)}else t.if((0,ln.checkMissingProp)(e,n,m)),(0,ln.reportMissingProp)(e,m),t.else()}function f(){t.forOf("prop",r,m=>{e.setParams({missingProperty:m}),t.if((0,ln.noPropertyInData)(t,i,m,s.ownProperties),()=>e.error())})}function y(m,$){e.setParams({missingProperty:m}),t.forOf(m,r,()=>{t.assign($,(0,ln.propertyInData)(t,i,m,s.ownProperties)),t.if((0,vn.not)($),()=>{e.error(),t.break()})},vn.nil)}}};Di.default=up;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});const _n=ne,lp={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,_n.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,_n._)`{limit: ${e}}`},fp={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:lp,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?_n.operators.GT:_n.operators.LT;e.fail$data((0,_n._)`${n}.length ${i} ${r}`)}};ji.default=fp;var zi={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const vs=es;vs.code='require("ajv/dist/runtime/equal").default';Mn.default=vs;Object.defineProperty(zi,"__esModule",{value:!0});const qr=Cn,we=ne,hp=ae,dp=Mn,pp={message:({params:{i:e,j:t}})=>(0,we.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,we._)`{i: ${e}, j: ${t}}`},mp={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:pp,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:o,schemaCode:a,it:s}=e;if(!r&&!i)return;const c=t.let("valid"),l=o.items?(0,qr.getSchemaTypes)(o.items):[];e.block$data(c,u,(0,we._)`${a} === false`),e.ok(c);function u(){const $=t.let("i",(0,we._)`${n}.length`),_=t.let("j");e.setParams({i:$,j:_}),t.assign(c,!0),t.if((0,we._)`${$} > 1`,()=>(f()?y:m)($,_))}function f(){return l.length>0&&!l.some($=>$==="object"||$==="array")}function y($,_){const p=t.name("item"),h=(0,qr.checkDataTypes)(l,p,s.opts.strictNumbers,qr.DataType.Wrong),w=t.const("indices",(0,we._)`{}`);t.for((0,we._)`;${$}--;`,()=>{t.let(p,(0,we._)`${n}[${$}]`),t.if(h,(0,we._)`continue`),l.length>1&&t.if((0,we._)`typeof ${p} == "string"`,(0,we._)`${p} += "_"`),t.if((0,we._)`typeof ${w}[${p}] == "number"`,()=>{t.assign(_,(0,we._)`${w}[${p}]`),e.error(),t.assign(c,!1).break()}).code((0,we._)`${w}[${p}] = ${$}`)})}function m($,_){const p=(0,hp.useFunc)(t,dp.default),h=t.name("outer");t.label(h).for((0,we._)`;${$}--;`,()=>t.for((0,we._)`${_} = ${$}; ${_}--;`,()=>t.if((0,we._)`${p}(${n}[${$}], ${n}[${_}])`,()=>{e.error(),t.assign(c,!1).break(h)})))}}};zi.default=mp;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});const ti=ne,yp=ae,gp=Mn,vp={message:"must be equal to constant",params:({schemaCode:e})=>(0,ti._)`{allowedValue: ${e}}`},_p={keyword:"const",$data:!0,error:vp,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:o}=e;r||o&&typeof o=="object"?e.fail$data((0,ti._)`!${(0,yp.useFunc)(t,gp.default)}(${n}, ${i})`):e.fail((0,ti._)`${o} !== ${n}`)}};Vi.default=_p;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});const dn=ne,$p=ae,wp=Mn,bp={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,dn._)`{allowedValues: ${e}}`},Sp={keyword:"enum",schemaType:"array",$data:!0,error:bp,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:o,it:a}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const s=i.length>=a.opts.loopEnum;let c;const l=()=>c??(c=(0,$p.useFunc)(t,wp.default));let u;if(s||r)u=t.let("valid"),e.block$data(u,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const m=t.const("vSchema",o);u=(0,dn.or)(...i.map(($,_)=>y(m,_)))}e.pass(u);function f(){t.assign(u,!1),t.forOf("v",o,m=>t.if((0,dn._)`${l()}(${n}, ${m})`,()=>t.assign(u,!0).break()))}function y(m,$){const _=i[$];return typeof _=="object"&&_!==null?(0,dn._)`${l()}(${n}, ${m}[${$}])`:(0,dn._)`${n} === ${_}`}}};Fi.default=Sp;Object.defineProperty(Ti,"__esModule",{value:!0});const Ep=Ci,xp=Oi,Pp=Ai,Np=Ri,kp=Ii,Tp=Di,Cp=ji,Op=zi,Ap=Vi,Mp=Fi,Rp=[Ep.default,xp.default,Pp.default,Np.default,kp.default,Tp.default,Cp.default,Op.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Ap.default,Mp.default];Ti.default=Rp;var Li={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.validateAdditionalItems=void 0;const Et=ne,ni=ae,Ip={message:({params:{len:e}})=>(0,Et.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Et._)`{limit: ${e}}`},Dp={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Ip,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,ni.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}_s(e,r)}};function _s(e,t){const{gen:n,schema:r,data:i,keyword:o,it:a}=e;a.items=!0;const s=n.const("len",(0,Et._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Et._)`${s} <= ${t.length}`);else if(typeof r=="object"&&!(0,ni.alwaysValidSchema)(a,r)){const l=n.var("valid",(0,Et._)`${s} <= ${t.length}`);n.if((0,Et.not)(l),()=>c(l)),e.ok(l)}function c(l){n.forRange("i",t.length,s,u=>{e.subschema({keyword:o,dataProp:u,dataPropType:ni.Type.Num},l),a.allErrors||n.if((0,Et.not)(l),()=>n.break())})}}Zt.validateAdditionalItems=_s;Zt.default=Dp;var qi={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.validateTuple=void 0;const Qo=ne,tr=ae,jp=te,zp={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return $s(e,"additionalItems",t);n.items=!0,!(0,tr.alwaysValidSchema)(n,t)&&e.ok((0,jp.validateArray)(e))}};function $s(e,t,n=e.schema){const{gen:r,parentSchema:i,data:o,keyword:a,it:s}=e;u(i),s.opts.unevaluated&&n.length&&s.items!==!0&&(s.items=tr.mergeEvaluated.items(r,n.length,s.items));const c=r.name("valid"),l=r.const("len",(0,Qo._)`${o}.length`);n.forEach((f,y)=>{(0,tr.alwaysValidSchema)(s,f)||(r.if((0,Qo._)`${l} > ${y}`,()=>e.subschema({keyword:a,schemaProp:y,dataProp:y},c)),e.ok(c))});function u(f){const{opts:y,errSchemaPath:m}=s,$=n.length,_=$===f.minItems&&($===f.maxItems||f[t]===!1);if(y.strictTuples&&!_){const p=`"${a}" is ${$}-tuple, but minItems or maxItems/${t} are not specified or different at path "${m}"`;(0,tr.checkStrictMode)(s,p,y.strictTuples)}}}Yt.validateTuple=$s;Yt.default=zp;Object.defineProperty(qi,"__esModule",{value:!0});const Vp=Yt,Fp={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Vp.validateTuple)(e,"items")};qi.default=Fp;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});const ea=ne,Lp=ae,qp=te,Hp=Zt,Up={message:({params:{len:e}})=>(0,ea.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ea._)`{limit: ${e}}`},Kp={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Up,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Lp.alwaysValidSchema)(r,t)&&(i?(0,Hp.validateAdditionalItems)(e,i):e.ok((0,qp.validateArray)(e)))}};Hi.default=Kp;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});const Ve=ne,Un=ae,Gp={message:({params:{min:e,max:t}})=>t===void 0?(0,Ve.str)`must contain at least ${e} valid item(s)`:(0,Ve.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ve._)`{minContains: ${e}}`:(0,Ve._)`{minContains: ${e}, maxContains: ${t}}`},Bp={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Gp,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;let a,s;const{minContains:c,maxContains:l}=r;o.opts.next?(a=c===void 0?1:c,s=l):a=1;const u=t.const("len",(0,Ve._)`${i}.length`);if(e.setParams({min:a,max:s}),s===void 0&&a===0){(0,Un.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&a>s){(0,Un.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Un.alwaysValidSchema)(o,n)){let _=(0,Ve._)`${u} >= ${a}`;s!==void 0&&(_=(0,Ve._)`${_} && ${u} <= ${s}`),e.pass(_);return}o.items=!0;const f=t.name("valid");s===void 0&&a===1?m(f,()=>t.if(f,()=>t.break())):a===0?(t.let(f,!0),s!==void 0&&t.if((0,Ve._)`${i}.length > 0`,y)):(t.let(f,!1),y()),e.result(f,()=>e.reset());function y(){const _=t.name("_valid"),p=t.let("count",0);m(_,()=>t.if(_,()=>$(p)))}function m(_,p){t.forRange("i",0,u,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:Un.Type.Num,compositeRule:!0},_),p()})}function $(_){t.code((0,Ve._)`${_}++`),s===void 0?t.if((0,Ve._)`${_} >= ${a}`,()=>t.assign(f,!0).break()):(t.if((0,Ve._)`${_} > ${s}`,()=>t.assign(f,!1).break()),a===1?t.assign(f,!0):t.if((0,Ve._)`${_} >= ${a}`,()=>t.assign(f,!0)))}}};Ui.default=Bp;var ws={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ne,n=ae,r=te;e.error={message:({params:{property:c,depsCount:l,deps:u}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:u,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[l,u]=o(c);a(c,l),s(c,u)}};function o({schema:c}){const l={},u={};for(const f in c){if(f==="__proto__")continue;const y=Array.isArray(c[f])?l:u;y[f]=c[f]}return[l,u]}function a(c,l=c.schema){const{gen:u,data:f,it:y}=c;if(Object.keys(l).length===0)return;const m=u.let("missing");for(const $ in l){const _=l[$];if(_.length===0)continue;const p=(0,r.propertyInData)(u,f,$,y.opts.ownProperties);c.setParams({property:$,depsCount:_.length,deps:_.join(", ")}),y.allErrors?u.if(p,()=>{for(const h of _)(0,r.checkReportMissingProp)(c,h)}):(u.if((0,t._)`${p} && (${(0,r.checkMissingProp)(c,_,m)})`),(0,r.reportMissingProp)(c,m),u.else())}}e.validatePropertyDeps=a;function s(c,l=c.schema){const{gen:u,data:f,keyword:y,it:m}=c,$=u.name("valid");for(const _ in l)(0,n.alwaysValidSchema)(m,l[_])||(u.if((0,r.propertyInData)(u,f,_,m.opts.ownProperties),()=>{const p=c.subschema({keyword:y,schemaProp:_},$);c.mergeValidEvaluated(p,$)},()=>u.var($,!0)),c.ok($))}e.validateSchemaDeps=s,e.default=i})(ws);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});const bs=ne,Xp=ae,Zp={message:"property name must be valid",params:({params:e})=>(0,bs._)`{propertyName: ${e.propertyName}}`},Yp={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Zp,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Xp.alwaysValidSchema)(i,n))return;const o=t.name("valid");t.forIn("key",r,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,bs.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};Ki.default=Yp;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});const Kn=te,Le=ne,Wp=nt,Gn=ae,Jp={message:"must NOT have additional properties",params:({params:e})=>(0,Le._)`{additionalProperty: ${e.additionalProperty}}`},Qp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Jp,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:s,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,Gn.alwaysValidSchema)(a,n))return;const l=(0,Kn.allSchemaProperties)(r.properties),u=(0,Kn.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Le._)`${o} === ${Wp.default.errors}`);function f(){t.forIn("key",i,p=>{!l.length&&!u.length?$(p):t.if(y(p),()=>$(p))})}function y(p){let h;if(l.length>8){const w=(0,Gn.schemaRefOrVal)(a,r.properties,"properties");h=(0,Kn.isOwnProperty)(t,w,p)}else l.length?h=(0,Le.or)(...l.map(w=>(0,Le._)`${p} === ${w}`)):h=Le.nil;return u.length&&(h=(0,Le.or)(h,...u.map(w=>(0,Le._)`${(0,Kn.usePattern)(e,w)}.test(${p})`))),(0,Le.not)(h)}function m(p){t.code((0,Le._)`delete ${i}[${p}]`)}function $(p){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){m(p);return}if(n===!1){e.setParams({additionalProperty:p}),e.error(),s||t.break();return}if(typeof n=="object"&&!(0,Gn.alwaysValidSchema)(a,n)){const h=t.name("valid");c.removeAdditional==="failing"?(_(p,h,!1),t.if((0,Le.not)(h),()=>{e.reset(),m(p)})):(_(p,h),s||t.if((0,Le.not)(h),()=>t.break()))}}function _(p,h,w){const b={keyword:"additionalProperties",dataProp:p,dataPropType:Gn.Type.Str};w===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,h)}}};Ar.default=Qp;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});const em=Ue,ta=te,Hr=ae,na=Ar,tm={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;o.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&na.default.code(new em.KeywordCxt(o,na.default,"additionalProperties"));const a=(0,ta.allSchemaProperties)(n);for(const f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=Hr.mergeEvaluated.props(t,(0,Hr.toHash)(a),o.props));const s=a.filter(f=>!(0,Hr.alwaysValidSchema)(o,n[f]));if(s.length===0)return;const c=t.name("valid");for(const f of s)l(f)?u(f):(t.if((0,ta.propertyInData)(t,i,f,o.opts.ownProperties)),u(f),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function l(f){return o.opts.useDefaults&&!o.compositeRule&&n[f].default!==void 0}function u(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Gi.default=tm;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});const ra=te,Bn=ne,ia=ae,oa=ae,nm={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:o}=e,{opts:a}=o,s=(0,ra.allSchemaProperties)(n),c=s.filter(_=>(0,ia.alwaysValidSchema)(o,n[_]));if(s.length===0||c.length===s.length&&(!o.opts.unevaluated||o.props===!0))return;const l=a.strictSchema&&!a.allowMatchingProperties&&i.properties,u=t.name("valid");o.props!==!0&&!(o.props instanceof Bn.Name)&&(o.props=(0,oa.evaluatedPropsToName)(t,o.props));const{props:f}=o;y();function y(){for(const _ of s)l&&m(_),o.allErrors?$(_):(t.var(u,!0),$(_),t.if(u))}function m(_){for(const p in l)new RegExp(_).test(p)&&(0,ia.checkStrictMode)(o,`property ${p} matches pattern ${_} (use allowMatchingProperties)`)}function $(_){t.forIn("key",r,p=>{t.if((0,Bn._)`${(0,ra.usePattern)(e,_)}.test(${p})`,()=>{const h=c.includes(_);h||e.subschema({keyword:"patternProperties",schemaProp:_,dataProp:p,dataPropType:oa.Type.Str},u),o.opts.unevaluated&&f!==!0?t.assign((0,Bn._)`${f}[${p}]`,!0):!h&&!o.allErrors&&t.if((0,Bn.not)(u),()=>t.break())})})}}};Bi.default=nm;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});const rm=ae,im={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,rm.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Xi.default=im;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});const om=te,am={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:om.validateUnion,error:{message:"must match a schema in anyOf"}};Zi.default=am;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});const nr=ne,sm=ae,cm={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,nr._)`{passingSchemas: ${e.passing}}`},um={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:cm,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const o=n,a=t.let("valid",!1),s=t.let("passing",null),c=t.name("_valid");e.setParams({passing:s}),t.block(l),e.result(a,()=>e.reset(),()=>e.error(!0));function l(){o.forEach((u,f)=>{let y;(0,sm.alwaysValidSchema)(i,u)?t.var(c,!0):y=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,nr._)`${c} && ${a}`).assign(a,!1).assign(s,(0,nr._)`[${s}, ${f}]`).else(),t.if(c,()=>{t.assign(a,!0),t.assign(s,f),y&&e.mergeEvaluated(y,nr.Name)})})}}};Yi.default=um;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});const lm=ae,fm={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((o,a)=>{if((0,lm.alwaysValidSchema)(r,o))return;const s=e.subschema({keyword:"allOf",schemaProp:a},i);e.ok(i),e.mergeEvaluated(s)})}};Wi.default=fm;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});const vr=ne,Ss=ae,hm={message:({params:e})=>(0,vr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,vr._)`{failingKeyword: ${e.ifClause}}`},dm={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:hm,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Ss.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=aa(r,"then"),o=aa(r,"else");if(!i&&!o)return;const a=t.let("valid",!0),s=t.name("_valid");if(c(),e.reset(),i&&o){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(s,l("then",u),l("else",u))}else i?t.if(s,l("then")):t.if((0,vr.not)(s),l("else"));e.pass(a,()=>e.error(!0));function c(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);e.mergeEvaluated(u)}function l(u,f){return()=>{const y=e.subschema({keyword:u},s);t.assign(a,s),e.mergeValidEvaluated(y,a),f?t.assign(f,(0,vr._)`${u}`):e.setParams({ifClause:u})}}}};function aa(e,t){const n=e.schema[t];return n!==void 0&&!(0,Ss.alwaysValidSchema)(e,n)}Ji.default=dm;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});const pm=ae,mm={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,pm.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Qi.default=mm;Object.defineProperty(Li,"__esModule",{value:!0});const ym=Zt,gm=qi,vm=Yt,_m=Hi,$m=Ui,wm=ws,bm=Ki,Sm=Ar,Em=Gi,xm=Bi,Pm=Xi,Nm=Zi,km=Yi,Tm=Wi,Cm=Ji,Om=Qi;function Am(e=!1){const t=[Pm.default,Nm.default,km.default,Tm.default,Cm.default,Om.default,bm.default,Sm.default,wm.default,Em.default,xm.default];return e?t.push(gm.default,_m.default):t.push(ym.default,vm.default),t.push($m.default),t}Li.default=Am;var eo={},to={};Object.defineProperty(to,"__esModule",{value:!0});const ve=ne,Mm={message:({schemaCode:e})=>(0,ve.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ve._)`{format: ${e}}`},Rm={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Mm,code(e,t){const{gen:n,data:r,$data:i,schema:o,schemaCode:a,it:s}=e,{opts:c,errSchemaPath:l,schemaEnv:u,self:f}=s;if(!c.validateFormats)return;i?y():m();function y(){const $=n.scopeValue("formats",{ref:f.formats,code:c.code.formats}),_=n.const("fDef",(0,ve._)`${$}[${a}]`),p=n.let("fType"),h=n.let("format");n.if((0,ve._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>n.assign(p,(0,ve._)`${_}.type || "string"`).assign(h,(0,ve._)`${_}.validate`),()=>n.assign(p,(0,ve._)`"string"`).assign(h,_)),e.fail$data((0,ve.or)(w(),b()));function w(){return c.strictSchema===!1?ve.nil:(0,ve._)`${a} && !${h}`}function b(){const v=u.$async?(0,ve._)`(${_}.async ? await ${h}(${r}) : ${h}(${r}))`:(0,ve._)`${h}(${r})`,O=(0,ve._)`(typeof ${h} == "function" ? ${v} : ${h}.test(${r}))`;return(0,ve._)`${h} && ${h} !== true && ${p} === ${t} && !${O}`}}function m(){const $=f.formats[o];if(!$){w();return}if($===!0)return;const[_,p,h]=b($);_===t&&e.pass(v());function w(){if(c.strictSchema===!1){f.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${o}" ignored in schema at path "${l}"`}}function b(O){const P=O instanceof RegExp?(0,ve.regexpCode)(O):c.code.formats?(0,ve._)`${c.code.formats}${(0,ve.getProperty)(o)}`:void 0,k=n.scopeValue("formats",{key:o,ref:O,code:P});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,ve._)`${k}.validate`]:["string",O,k]}function v(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!u.$async)throw new Error("async format in sync schema");return(0,ve._)`await ${h}(${r})`}return typeof p=="function"?(0,ve._)`${h}(${r})`:(0,ve._)`${h}.test(${r})`}}}};to.default=Rm;Object.defineProperty(eo,"__esModule",{value:!0});const Im=to,Dm=[Im.default];eo.default=Dm;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.contentVocabulary=Xt.metadataVocabulary=void 0;Xt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Xt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Pi,"__esModule",{value:!0});const jm=Ni,zm=Ti,Vm=Li,Fm=eo,sa=Xt,Lm=[jm.default,zm.default,(0,Vm.default)(),Fm.default,sa.metadataVocabulary,sa.contentVocabulary];Pi.default=Lm;var no={},Es={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(Es);Object.defineProperty(no,"__esModule",{value:!0});const Vt=ne,ri=Es,ca=Oe,qm=ae,Hm={message:({params:{discrError:e,tagName:t}})=>e===ri.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Vt._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Um={keyword:"discriminator",type:"object",schemaType:"object",error:Hm,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:o}=e,{oneOf:a}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=r.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",(0,Vt._)`${n}${(0,Vt.getProperty)(s)}`);t.if((0,Vt._)`typeof ${l} == "string"`,()=>u(),()=>e.error(!1,{discrError:ri.DiscrError.Tag,tag:l,tagName:s})),e.ok(c);function u(){const m=y();t.if(!1);for(const $ in m)t.elseIf((0,Vt._)`${l} === ${$}`),t.assign(c,f(m[$]));t.else(),e.error(!1,{discrError:ri.DiscrError.Mapping,tag:l,tagName:s}),t.endIf()}function f(m){const $=t.name("valid"),_=e.subschema({keyword:"oneOf",schemaProp:m},$);return e.mergeEvaluated(_,Vt.Name),$}function y(){var m;const $={},_=h(i);let p=!0;for(let v=0;v<a.length;v++){let O=a[v];O!=null&&O.$ref&&!(0,qm.schemaHasRulesButRef)(O,o.self.RULES)&&(O=ca.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,O==null?void 0:O.$ref),O instanceof ca.SchemaEnv&&(O=O.schema));const P=(m=O==null?void 0:O.properties)===null||m===void 0?void 0:m[s];if(typeof P!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);p=p&&(_||h(O)),w(P,v)}if(!p)throw new Error(`discriminator: "${s}" must be required`);return $;function h({required:v}){return Array.isArray(v)&&v.includes(s)}function w(v,O){if(v.const)b(v.const,O);else if(v.enum)for(const P of v.enum)b(P,O);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function b(v,O){if(typeof v!="string"||v in $)throw new Error(`discriminator: "${s}" values must be unique strings`);$[v]=O}}}};no.default=Um;const Km="http://json-schema.org/draft-07/schema#",Gm="http://json-schema.org/draft-07/schema#",Bm="Core schema meta-schema",Xm={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Zm=["object","boolean"],Ym={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Wm={$schema:Km,$id:Gm,title:Bm,definitions:Xm,type:Zm,properties:Ym,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=Ga,r=Pi,i=no,o=Wm,a=["/properties"],s="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema($,s,!1),this.refs["http://json-schema.org/schema"]=s}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=Ue;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=ne;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var f=On;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var y=An;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(ch,hr);const Jm=sh(hr);var Qm=Object.defineProperty,e0=(e,t,n)=>t in e?Qm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fe=(e,t,n)=>(e0(e,typeof t!="symbol"?t+"":t,n),n);function xs(e,t){if(!document.getElementById("PRERENDER_SVG")){let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","PRERENDER_SVG"),r.setAttribute("pointer-events","none"),r.setAttribute("width","0"),r.setAttribute("height","0"),r.setAttribute("style","opacity: 0; position: absolute; top: 0; left: 0; width: 0; height: 0;"),document.body.appendChild(r)}let n=document.getElementById("PRERENDER_SVG");n.innerHTML=e.html(),t(n.children[0]),n.innerHTML=""}function ut(e){let t={x:0,y:0,width:0,height:0};return xs(e,n=>{t=n.getBBox()}),t}function Me(e){return Ce(document.createElementNS("http://www.w3.org/2000/svg",e))}function rr(e,t){const n=ut(e),r=t/Math.max(n.width,n.height),i={x:-n.width*r/2||0,y:-n.height*r/2||0};return e.attr("transform",`translate(${i.x}, ${i.y}) scale(${r||1})`),{scale:r,translate:i}}function Ps(e){const t=Me("g"),n=Me("circle");return n.attr("r",e),n.attr("transform",`translate(${e}, ${e})`),t.append(()=>n.node()),t}function t0(e,t,n=0){const r=Me("g"),i=Me("path");return i.attr("d",`M ${0} ${-(t/2)} L ${e/2-n} ${-(t/2)} A ${n} ${n} 0 0 1 ${e/2} ${-(t/2)+n} L ${e/2} ${t/2-n} A ${n} ${n} 0 0 1 ${e/2-n} ${t/2} L ${-(e/2)+n} ${t/2} A ${n} ${n} 0 0 1 ${-(e/2)} ${t/2-n} L ${-(e/2)} ${-(t/2)+n} A ${n} ${n} 0 0 1 ${-(e/2)+n} ${-(t/2)} Z`),i.attr("transform",`translate(${e/2}, ${t/2})`),r.append(()=>i.node()),r}function n0(e,t,n=0){const r=Ps(t);r.select("circle").attr("fill","none"),r.select("circle").attr("stroke","none");const i=Me("path"),o=[];for(let a=0;a<e;a++){const s=a/e*2*Math.PI-Math.PI/2,c=Math.cos(s)*t,l=Math.sin(s)*t;o.push({x:c,y:l})}return i.attr("d",r0(o,n)),i.attr("transform",`translate(${t}, ${t})`),r.append(()=>i.node()),r}function r0(e,t){const n=[];e=e.slice();for(let r=0;r<e.length;r++){const i=r+1>e.length-1?(r+1)%e.length:r+1,o=r+2>e.length-1?(r+2)%e.length:r+2,a=e[r],s=e[i],c=e[o],l=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2)),u=(l-t)/l,f=[((1-u)*a.x+u*s.x).toFixed(1),((1-u)*a.y+u*s.y).toFixed(1)],y=Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2)),m=t/y,$=[((1-m)*s.x+m*c.x).toFixed(1),((1-m)*s.y+m*c.y).toFixed(1)];r===e.length-1&&n.unshift("M"+$.join(",")),n.push("L"+f.join(",")),n.push("Q"+s.x+","+s.y+","+$.join(","))}return n.push("Z"),n.join(" ")}const i0=Object.freeze(Object.defineProperty({__proto__:null,Circle:Ps,Polygon:n0,Rectangle:t0,create:Me,getBBox:ut,prerender:xs,transform:rr},Symbol.toStringTag,{value:"Module"}));function o0(e,t,n){return{data:e,lightValue:t,darkValue:n}}function Ut(e,t,n){return{key:e,value:t,condition:n??!0}}function a0(e,t,n,r){return{shape:e,key:t,value:n,condition:r??!0}}function _r(e,t){t.forEach(n=>{if(n.value instanceof Object){if(!n.value.data.forceSimulation)return;Xn(e,n.key,n.value.data.forceSimulation.theme=="light"?n.value.lightValue:n.value.darkValue,n.condition),n.value.data.forceSimulation.on(se.ThemeChange,r=>{typeof n.value!="string"&&(r=="light"?Xn(e,n.key,n.value.lightValue,n.condition):r=="dark"&&Xn(e,n.key,n.value.darkValue,n.condition))})}else Xn(e,n.key,n.value,n.condition)})}function Xn(e,t,n,r){t==="class"&&n.split(".").forEach(i=>{e.classed(i,typeof r=="function"?r():r)}),(typeof r=="function"?r():r)&&e.style(t,n)}function Ns(e,t){t.forEach(n=>{n.key==="class"&&n.value.split(".").forEach(r=>{n.shape.classed(r,typeof n.condition=="function"?n.condition(e):n.condition)}),(typeof n.condition=="function"?n.condition(e):n.condition)&&n.shape.style(n.key,n.value)})}function s0(e){const t=Me("path");return t.attr("d",e),t}function ks(e){const t=Me("g");return t.html(e),t}function c0(e,t=[],n=[],r=0){let i={top:0,right:0,bottom:0,left:0};return typeof e=="number"?i={top:e,right:e,bottom:e,left:e}:Array.isArray(e)&&e.length===2?i={top:e[0],right:e[1],bottom:e[0],left:e[1]}:Array.isArray(e)&&e.length===4&&(i={top:e[0],right:e[1],bottom:e[2],left:e[3]}),{padding:i,textStyles:t,backgroundStyles:n,cornerRadius:r}}function ii(e,t){const n=Me("g").classed("tag",!0),r=n.append("text").text(e).attr("dy","0.35em").attr("text-anchor","middle");_r(r,t.textStyles);const i=ut(n),o=i.width,a=i.height,s=t.padding.top,c=t.padding.right,l=t.padding.bottom,u=t.padding.left,f=t.cornerRadius,y=n.append("path").attr("d",`M ${0} ${-(a/2)-s} L ${o/2+c-f} ${-(a/2)-s} A ${f} ${f} 0 0 1 ${o/2+c} ${-(a/2)-s+f} L ${o/2+c} ${a/2+l-f} A ${f} ${f} 0 0 1 ${o/2+c-f} ${a/2+l} L ${-(o/2)-u+f} ${a/2+l} A ${f} ${f} 0 0 1 ${-(o/2)-u} ${a/2+l-f} L ${-(o/2)-u} ${-(a/2)-s+f} A ${f} ${f} 0 0 1 ${-(o/2)-u+f} ${-(a/2)-s} Z`);return _r(y,t.backgroundStyles),r.remove(),n.append(()=>r.node()),n}function ir(e,t=[]){const n=Me("g").classed("text",!0),r=n.append("text").text(e);return _r(r,t),n.attr("text-anchor","middle"),n}function Ts(){return"break-line"}var ro=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(ro||{});function io(e,t,n,r,i,o,a,s="center",c=[]){return{height:e,width:t,x:n,y:r,dx:i,dy:o,rowCount:a,align:s,rowMargins:c}}function oo(e,t,n=null){const r=Me("g").classed("collection",!0).attr("transform",`translate(${t.x}, ${t.y})`);return u0(e,t,n,r),r}function u0(e,t,n=null,r){const i=(t.height-t.dy*(t.rowCount-1))/t.rowCount;let o=0,a=[];for(let s=0;s<t.rowCount;s++){if(o>e.length-1)return;const c=t.rowMargins[s]||0,l=t.width-c*2,u=r.append("g").attr("id",`row-${s}`).attr("transform",`translate(${c}, ${(i+t.dy)*s})`);o=l0(e,t,n,u,l,o,a,s==t.rowCount-1)}}function l0(e,t,n=null,r,i,o,a,s){const c=[];let l=0,u=o;for(;l<i&&u<e.length;){const y=e[u];if(!y)break;if(typeof y=="string"){u++;break}if(typeof y=="string")break;const m=ut(y).width;if(m>i){a.push(y),u++;continue}if(l+m<i)c.push(y),l+=m+t.dx,u++;else{s&&a.push(y);break}}n&&a.length>0&&(u>=e.length||s)&&(c.push(n),l+=ut(n).width+t.dx),l-=t.dx;let f=0;return c.forEach(y=>{const m=ut(y).width;let $=0;switch(t.align){case"left":$=f+m/2;break;case"center":$=f+m/2+(i-l)/2;break;case"right":$=f+m/2+(i-l);break}y.attr("transform",`translate(${$}, 0)`),r.append(()=>y.node()),f+=m+t.dx}),u}function ao(e,t,n=[]){const r=[];e.split(" ").forEach(s=>{s.includes(`
`)?(s.split(`
`).forEach(l=>{r.push(ir(l,n)),r.push(Ts())}),r.pop()):r.push(ir(s,n))});const o=ir("...",n);return oo(r,t,o)}function f0(e,t,n){const r=[];e.forEach(a=>{const s=ii(a,n);r.push(s)});const i=ii("...",n);return oo(r,t,i)}function h0(e,t,n=[]){Array.isArray(t)?t.forEach(r=>ua(e,r,n)):ua(e,t,n)}function ua(e,t,n=[]){const r=`${e.id}-${t}`,i=t/(isNaN(e.shape.scale)?1:e.shape.scale);e.forceSimulation.registerOnZoom(r,i,o=>{const a=o*(isNaN(e.shape.scale)?1:e.shape.scale);Ns(a,n)})}function d0(e,t){e.forceSimulation&&(t(e.forceSimulation.theme),e.forceSimulation.eventStore.on("theme:change",t))}function $r(e){if(!e)return-1;const t=e.indexOf("#")==0,n=e.indexOf("rgb")==0;if(t){const r=e.length==7,i=parseInt(r?e.substring(1,3):e.substring(1,2),16),o=parseInt(r?e.substring(3,5):e.substring(2,3),16),a=parseInt(r?e.substring(5,7):e.substring(3,4),16);return(i*299+o*587+a*114)/1e3/255}else if(n){const r=e.match(/\d+/g);if(!r||r.length<3)return-1;const i=parseInt(r[0]),o=parseInt(r[1]),a=parseInt(r[2]);return(i*299+o*587+a*114)/1e3/255}return-1}function p0(e){return $r(e)>.5}function m0(e){return $r(e)<.5&&$r(e)>=0}function y0(e,t,n,...r){t.forceSimulation&&t.forceSimulation.eventStore.emit(`template:${t.shape.type}:${e}`,t,n,...r)}const la=Object.freeze(Object.defineProperty({__proto__:null,Alignment:ro,BreakLine:Ts,CollectionStyle:io,EmitEvent:y0,LODStyle:a0,OnThemeChange:d0,OnZoom:h0,PathShape:s0,SVGShape:ks,Shape:i0,ShapeCollection:oo,ShapeStyle:Ut,TagCollection:f0,TagShape:ii,TagStyle:c0,TextCollection:ao,TextShape:ir,ThemeStyle:o0,applyLODStyles:Ns,applyStyles:_r,brightness:$r,isDark:m0,isLight:p0},Symbol.toStringTag,{value:"Module"})),g0={shapeSize:200,shapeBuilder:v0};function v0(e){const t=Me("g"),{icon_large:n}=_0(t);return n.classed("hidden",!0),$0(t),w0(e,t),t}function _0(e){const t=ks(`
		<g>
			<path id="border" d="M8.373,392.094c-11.164,-19.338 -11.164,-43.163 0,-62.5c39.417,-68.271 132.833,-230.073 172.249,-298.344c11.165,-19.338 31.798,-31.25 54.127,-31.25l344.498,0c22.329,-0 42.962,11.912 54.126,31.25c39.417,68.271 132.833,230.073 172.249,298.344c11.165,19.337 11.165,43.162 0,62.5c-39.416,68.271 -132.832,230.073 -172.249,298.344c-11.164,19.337 -31.797,31.25 -54.126,31.25l-344.498,-0c-22.329,-0 -42.962,-11.913 -54.127,-31.25c-39.416,-68.271 -132.832,-230.073 -172.249,-298.344Zm41.667,-0c-11.164,-19.338 -11.164,-43.163 0,-62.5c35.831,-62.06 115.585,-200.199 151.416,-262.26c11.164,-19.337 31.797,-31.25 54.126,-31.25l302.831,0c22.33,0 42.963,11.913 54.127,31.25c35.831,62.061 115.585,200.2 151.416,262.26c11.164,19.337 11.164,43.162 -0,62.5c-35.831,62.06 -115.585,200.199 -151.416,262.259c-11.164,19.338 -31.797,31.25 -54.127,31.25l-302.831,0c-22.329,0 -42.962,-11.912 -54.126,-31.25c-35.831,-62.06 -115.585,-200.199 -151.416,-262.259Z" style="fill:#e57373;" />
			<path id="body" d="M50.04,392.094c-11.164,-19.338 -11.164,-43.163 0,-62.5c35.831,-62.06 115.585,-200.199 151.416,-262.26c11.164,-19.337 31.797,-31.25 54.126,-31.25l302.831,0c22.33,0 42.963,11.913 54.127,31.25c35.831,62.061 115.585,200.2 151.416,262.26c11.164,19.337 11.164,43.162 -0,62.5c-35.831,62.06 -115.585,200.199 -151.416,262.259c-11.164,19.338 -31.797,31.25 -54.127,31.25l-302.831,0c-22.329,0 -42.962,-11.912 -54.126,-31.25c-35.831,-62.06 -115.585,-200.199 -151.416,-262.259Z" />
			<path id="icon" d="M392.598,301.417c-0,7.953 6.447,14.4 14.4,14.4c0.003,-0 0.005,-0 0.008,-0c3.817,-0 7.478,-1.516 10.177,-4.215c2.699,-2.699 4.215,-6.36 4.215,-10.177c-0,-1.135 -0,-2.281 -0,-3.416c-0,-3.817 -1.516,-7.478 -4.215,-10.177c-2.699,-2.699 -6.36,-4.215 -10.177,-4.215c-0.003,-0 -0.005,-0 -0.008,-0c-7.953,-0 -14.4,6.447 -14.4,14.4c-0,1.129 -0,2.27 -0,3.4Zm2.242,-47.423c0.2,6.587 5.597,11.823 12.187,11.823c0.003,-0 0.007,-0 0.01,-0c6.556,-0 11.93,-5.202 12.144,-11.755c0.506,-15.54 1.397,-42.915 1.944,-59.729c0.124,-3.806 -1.301,-7.499 -3.949,-10.235c-2.649,-2.736 -6.294,-4.281 -10.102,-4.281c-0.004,-0 -0.008,-0 -0.012,-0c-3.795,-0 -7.429,1.537 -10.072,4.261c-2.643,2.724 -4.07,6.403 -3.955,10.196c0.507,16.785 1.335,44.149 1.805,59.72Z" style="fill:#e57373;fill-rule:nonzero;" />
			<path id="icon_large" d="M371.559,477.859c-0,19.491 15.8,35.291 35.291,35.291c0.002,0 0.004,0 0.005,0c19.491,0 35.292,-15.8 35.292,-35.291c-0,-2.771 -0,-5.568 -0,-8.339c-0,-19.491 -15.801,-35.291 -35.292,-35.291c-0.001,-0 -0.003,-0 -0.005,-0c-19.491,-0 -35.291,15.8 -35.291,35.291c-0,2.771 -0,5.568 -0,8.339Zm5.494,-116.303c0.489,16.181 13.748,29.045 29.936,29.045l0.012,0c16.041,0 29.188,-12.726 29.71,-28.758c1.239,-38.08 3.425,-105.217 4.768,-146.446c0.303,-9.329 -3.19,-18.381 -9.681,-25.088c-6.492,-6.706 -15.426,-10.492 -24.759,-10.492c-0.003,-0 -0.005,-0 -0.007,-0c-9.309,-0 -18.22,3.77 -24.702,10.451c-6.481,6.68 -9.981,15.702 -9.699,25.006c1.243,41.116 3.268,108.114 4.422,146.282Z" style="fill:#e57373;fill-rule:nonzero;" />
		</g>
	`);return e.append(()=>t.node()),e.classed("gly_animated",!0),{border:t.select("#border"),body:t.select("#body"),icon:t.select("#icon"),icon_large:t.select("#icon_large")}}function $0(e){const t=ut(e),n=ao("Template Error",io(100,t.width,0,140,20,20,1),[Ut("class","gly_text.dark"),Ut("font-weight","bold"),Ut("font-size","44pt")]);return e.append(()=>n.node()),n}function w0(e,t){const n=ut(t),r=ao((e==null?void 0:e.errorMessage)??"Something went wrong while rendering the template!",io(250,n.width,0,n.height*.6,15,20,4,ro.Center,[80,130,180,230]),[Ut("class","gly_text.dark"),Ut("font-size","32pt")]);return t.append(()=>r.node()),r}class b0{constructor(){fe(this,"_errorTemplate",g0),fe(this,"_templates",{}),fe(this,"failed",[]),fe(this,"remoteOrigin","")}get errorTemplate(){return this._errorTemplate}get templates(){return this._templates}add(t,n){this._templates[t]=n}async get(t){const n=t.shape.type;return this.templates[n]?this.templates[n]:this.failed.includes(n)?this.errorTemplate:await this.load(t.shape.url??this.remoteOrigin+n+".js",n).then(()=>{if(this.templates[n])return this.templates[n]})}async load(t,n){this.failed.includes(n)||origin!=""&&await Zs(()=>import(t),[]).then(({default:r})=>{this.add(n,r)}).catch(r=>{console.error(`[graphly-d3] Template "${n}" not founnd - Fetched from "${t}"

Failed with error:
${r} 

Troubleshooting: https://docs.graphly.dev/troubleshooting/`),this.failed.push(n)}).finally(()=>{})}}class S0{constructor(){fe(this,"nodes",{})}clear(){this.nodes={}}add(t,n){this.nodes[t]=this.storeNode(n)}remove(t){delete this.nodes[t]}hasNode(t){return this.nodes[t]!==void 0}hasTemplateChange(t,n){const r=this.nodes[t];return r===void 0?!1:r.shape.type!==n.shape.type||r.shape.template!==n.shape.template}hasPayloadChanges(t,n){const r=this.nodes[t];return r?JSON.stringify(r.payload??"")!==JSON.stringify(n.payload??""):!0}storeNode(t){return{shape:{type:Object.assign({},t.shape).type,template:Object.assign({},t.shape).template},payload:t.payload?this.deepCopy(t.payload):void 0}}deepCopy(t){if(t==null)return t;if(t instanceof Array){var n=[];return t.forEach(o=>{n.push(o)}),n.map(o=>this.deepCopy(o))}if(t instanceof Object){var r={...t};for(var i in t)t.hasOwnProperty(i)&&(r[i]=this.deepCopy(t[i]));return r}return t}}var wr=(e=>(e.Soft="soft",e.Hard="hard",e))(wr||{}),Cs=(e=>(e.Soft="soft",e.Hard="hard",e))(Cs||{}),Ee=(e=>(e.Solid="solid",e.Dashed="dashed",e.Dotted="dotted",e.Hidden="hidden",e))(Ee||{}),_e=(e=>(e.Head="head",e.Tail="tail",e.Both="both",e))(_e||{}),or=(e=>(e.Strong="strong",e.Weak="weak",e.Loose="loose",e))(or||{});const E0=new Jm({allErrors:!0});function fa(e){var t,n,r,i,o,a,s,c;if(!e.forceSimulation)return e.shape.failed=!0,null;const u=e.forceSimulation.nodeDataStore.hasNode(e.id)?Ce(this):Me("g"),f=e.forceSimulation.nodeDataStore.hasPayloadChanges(e.id,e),y=e.forceSimulation.nodeDataStore.hasTemplateChange(e.id,e);if(e.forceSimulation.nodeDataStore.add(e.id,e),!f&&!y&&!e.shape.failed)return rr(u.select("[data-object=shape]"),e.shape.scale*(((t=e.shape.template)==null?void 0:t.shapeSize)??300)),u.node();if(u.selectAll("*").remove(),u.classed("gly-node",!0).attr("data-id",e.id),!e.shape.template)return w(`Template "${e.shape.type}" not found!`);if((r=(n=e.shape)==null?void 0:n.template)!=null&&r.shapePayload){const b=E0.compile(e.shape.template.shapePayload);if(!b(e.payload))return console.error(`[graphly-d3] Invalid payload for "${e.shape.type}"
  ${(i=b.errors)==null?void 0:i.map(O=>`${O.instancePath} ${O.message}`).join(`
  `)} 

Troubleshooting: https://docs.graphly.dev/troubleshooting/`),w(`"${e.shape.type}" ${(o=b.errors)==null?void 0:o[0].instancePath} ${(a=b.errors)==null?void 0:a[0].message}`)}else console.warn(`[graphly-d3] "${e.shape.type}" has no payload schema defined! 

If you are the author of this template, you can find more details here: https://docs.graphly.dev/template-api/shape_payload`);try{u.append(()=>e.shape.template.shapeBuilder.bind(this)(e,la).node()).attr("data-object","shape"),e.forceSimulation.onZoomRegister.filter(b=>b.id.startsWith(e.id)).forEach(b=>{e.forceSimulation&&b.callback(e.forceSimulation.worldTransform.k)})}catch(b){return console.error(`[graphly-d3] Template "${e.shape.type}" failed rendering with error: 
${b} 

Troubleshooting: https://docs.graphly.dev/troubleshooting/`),w(b.message)}const m=ut(u),$=e.shape.scale*(((s=e.shape.template)==null?void 0:s.shapeSize)??300);e.shape.bodyPoints=[];const _=u.select(".gly-body").node(),p=[];if(_&&_.getTotalLength){let b=((c=e.shape)==null?void 0:c.bodyResolution)||32;const v=_.getTotalLength();for(let K=0;K<b;K++){const ce=_.getPointAtLength(K/b*v);ce.x=Math.round(ce.x),ce.y=Math.round(ce.y),p.push(ce)}const O=Math.min(...p.map(K=>K.x)),P=Math.max(...p.map(K=>K.x)),k=Math.min(...p.map(K=>K.y)),j=Math.max(...p.map(K=>K.y)),L=P-O,U=j-k,Q={x:m.width/L,y:m.height/U};p.forEach(K=>{var ce,T,q,z,H,Z,Y,D;K.x=(K.x-O)*Q.x+m.x-L*Q.x/2+$,K.y=(K.y-k)*Q.y+m.y-U*Q.y/2+$,(T=(ce=e.forceSimulation)==null?void 0:ce.debug)!=null&&T.enabled&&((H=(z=(q=e.forceSimulation)==null?void 0:q.debug)==null?void 0:z.bodyPoints)!=null&&H.enabled)&&u.select("[data-object=shape]").append("circle").classed("gly-body-points",!0).attr("cx",K.x+L*Q.x/2-$).attr("cy",K.y+U*Q.y/2-$).attr("r",Math.max(m.height,m.width)/$*5).attr("fill",(D=(Y=(Z=e.forceSimulation)==null?void 0:Z.debug)==null?void 0:Y.bodyPoints)==null?void 0:D.color).attr("stroke","none")}),e.shape.bodyPoints=p}e.shape.failed=!1;const h=rr(u.select("[data-object=shape]"),$);for(let b of p)b.x=(b.x-$)*h.scale,b.y=(b.y-$)*h.scale;return u.node();function w(b){var v,O,P;return e.shape.failed=!0,e.errorMessage=b,u.append(()=>e.forceSimulation?e.forceSimulation.templateStore.errorTemplate.shapeBuilder.bind(this)(e,la).node():null).attr("data-object","shape"),rr(u.select("[data-object=shape]"),e.shape.scale*(((P=(O=(v=e.forceSimulation)==null?void 0:v.templateStore)==null?void 0:O.errorTemplate)==null?void 0:P.shapeSize)??300)),u.node()}}var se=(e=>(e.NodeClick="node:click",e.NodeDoubleClick="node:doubleclick",e.NodeContextMenu="node:contextmenu",e.NodeDragStart="node:dragstart",e.NodeDragMove="node:dragmove",e.NodeDragEnd="node:dragend",e.LinkClick="link:click",e.LinkDoubleClick="link:doubleclick",e.LinkContextMenu="link:contextmenu",e.LinkDragStart="link:dragstart",e.LinkDragMove="link:dragmove",e.LinkDragEnd="link:dragend",e.EnvironmentClick="environment:click",e.EnvironmentDoubleClick="environment:doubleclick",e.EnvironmentContextMenu="environment:contextmenu",e.EnvironmentMove="environment:move",e.ThemeChange="theme:change",e.SimulationTick="simulation:tick",e.SimulationTickEnd="simulation:tickend",e))(se||{});const x0={["node:click"]:{event:e=>e,node:e=>e},["node:doubleclick"]:{event:e=>e,node:e=>e},["node:contextmenu"]:{event:e=>e,node:e=>e},["node:dragstart"]:{event:e=>e,node:e=>e,pos:(e,t)=>({x:e,y:t})},["node:dragmove"]:{event:e=>e,node:e=>e,pos:(e,t)=>({x:e,y:t})},["node:dragend"]:{event:e=>e,node:e=>e,pos:(e,t)=>({x:e,y:t})},["link:click"]:{event:e=>e,link:e=>e},["link:doubleclick"]:{event:e=>e,link:e=>e},["link:contextmenu"]:{event:e=>e,link:e=>e},["link:dragstart"]:{event:e=>e,source:e=>e,pos:(e,t)=>({x:e,y:t})},["link:dragmove"]:{event:e=>e,source:e=>e,pos:(e,t)=>({x:e,y:t})},["link:dragend"]:{event:e=>e,source:e=>e,target:e=>e,pos:(e,t)=>({x:e,y:t})},["environment:click"]:{event:e=>e,pos:(e,t)=>({x:e,y:t})},["environment:doubleclick"]:{event:e=>e,pos:(e,t)=>({x:e,y:t})},["environment:contextmenu"]:{event:e=>e,pos:(e,t)=>({x:e,y:t})},["environment:move"]:{pos:e=>e},["theme:change"]:{theme:e=>e},["simulation:tick"]:{},["simulation:tickend"]:{}};class Os{constructor(){fe(this,"register",{})}on(t,n){this.register[t]||(this.register[t]=[]),this.register[t].push({[n.name]:n})}off(t,n){this.register[t]&&(this.register[t]=this.register[t].filter(r=>r[n.name]!==n))}emit(t,...n){if(!this.register[t])return[];const r=[];return this.register[t].forEach(i=>{for(const o in i)r.push(i[o](...n))}),r}}fe(Os,"events",x0);let Mr=!1,br,oi={x:0,y:0};function P0(){return zu().on("start",(e,t)=>N0.bind(this)(e,t)).on("drag",(e,t)=>k0.bind(this)(e,t)).on("end",(e,t)=>T0.bind(this)(e,t))}function N0(e,t){if(this.eventStore.emit(se.NodeDragStart,e,t,{x:e.x,y:e.y}).includes("newlink"))return C0.bind(this)(e,t);this.draggableNodes&&(this.simulation.alphaTarget(.05).restart(),t.isDraged=!0,t.fx=e.x,t.fy=e.y)}function k0(e,t){if(Mr)return O0.bind(this)(e,t);this.draggableNodes&&(t.fx=e.x,t.fy=e.y,this.eventStore.emit(se.NodeDragMove,e,t,{x:e.x,y:e.y}))}function T0(e,t){if(Mr)return ha.bind(this)(e,t);if(!this.draggableNodes)return ha.bind(this)(e,t);this.draggableNodes&&(this.simulation.alphaTarget(0),t.isDraged=!1,t.fx=null,t.fy=null,this.eventStore.emit(se.NodeDragEnd,e,t,{x:e.x,y:e.y}))}function C0(e,t){oi={x:e.sourceEvent.offsetX/this.worldTransform.k-this.worldTransform.x/this.worldTransform.k-(t.x??0),y:e.sourceEvent.offsetY/this.worldTransform.k-this.worldTransform.y/this.worldTransform.k-(t.y??0)},Mr=!0,br=this.selectionGroups.links.append("g").attr("data-object","prelink").classed("gly-prelink",!0),br.append("line").attr("data-object","prelink-link-line").classed("gly-link-line",!0).attr("x1",t.x??0).attr("y1",t.y??0).attr("x2",e.x).attr("y2",e.y),this.eventStore.emit(se.LinkDragStart,e,t,{x:e.x,y:e.y})}function O0(e,t){const n={x:e.x+oi.x,y:e.y+oi.y};br.select("[data-object='prelink-link-line']").attr("x2",n.x).attr("y2",n.y),this.eventStore.emit(se.LinkDragMove,e,t,{x:e.x,y:e.y})}function ha(e,t){br.remove(),Mr=!1;let n=e.sourceEvent.target;if(n==this.svgElement)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y});for(;n.attributes["data-object"]==null;){if(n==null)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y});if(n=n.parentElement,!n)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y})}if(n=n.parentElement,!n)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y});const r=this.graph.nodes.find(i=>{var o;return i.id==((o=n.attributes["data-id"])==null?void 0:o.value)});if(!r)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y});if(r.id==t.id)return this.eventStore.emit(se.LinkDragEnd,e,t,null,{x:e.x,y:e.y});this.eventStore.emit(se.LinkDragEnd,e,t,r,{x:e.x,y:e.y})}function A0(e){e.links=e.links.filter(t=>{const n=typeof t.source=="string"?e.nodes.find(i=>i.id===t.source):e.nodes.find(i=>i.id===t.source.id),r=typeof t.target=="string"?e.nodes.find(i=>i.id===t.target):e.nodes.find(i=>i.id===t.target.id);return!(!n||!r)}),e.nodes.forEach(t=>{const n=[];e.links.forEach(i=>{(i.source==t.id||i.source.id==t.id)&&n.push(i)});const r={};n.forEach(i=>{if(typeof i.target=="object"){const o=typeof i.target=="string"?i.target:i.target.id;r[o]||(r[o]=[]),r[o].push(i)}else r[i.target]||(r[i.target]=[]),r[i.target].push(i)}),Object.keys(r).forEach(i=>{r[i].forEach((o,a)=>{o.i=a}),r[i].sort((o,a)=>(o.index??0)-(a.index??0))})})}async function M0(e){await I0.bind(this)(e),e.nodes.forEach(n=>{n.forceSimulation=this}),D0(e.nodes);const t=this.selectionGroups.nodes.selectAll("[data-object='node']").data(e.nodes,n=>n.id);t.enter().append(fa.bind(this)).attr("data-object","node").style("pointer-events","fill").call(P0.bind(this)()).on("click",(n,r)=>{this.eventStore.emit(se.NodeClick,n,r),n.stopPropagation()}).on("dblclick",(n,r)=>{this.eventStore.emit(se.NodeDoubleClick,n,r),n.stopPropagation()}).on("contextmenu",(n,r)=>{this.eventStore.emit(se.NodeContextMenu,n,r),n.stopPropagation()}).attr("opacity",0).transition().duration(this.animationDuration).attr("opacity",1),t.exit().transition().duration(this.animationDuration).attr("opacity",0).each(n=>{this.deregisterOnZoom(n.id),this.nodeDataStore.remove(n.id)}).remove(),t.each(n=>{t.filter(i=>i.id===n.id).select(fa)}).attr("opacity",1)}function R0(e){const t=this.selectionGroups.links.selectAll("[data-object='link']").data(e.links,i=>pn(i)),n=t.enter().append("g").attr("data-object","link").attr("data-id",i=>pn(i)).classed("gly-link",!0).on("click",(i,o)=>{this.eventStore.emit(se.LinkClick,i,o),i.stopPropagation()}).on("dblclick",(i,o)=>{this.eventStore.emit(se.LinkDoubleClick,i,o),i.stopPropagation()}).on("contextmenu",(i,o)=>{this.eventStore.emit(se.LinkContextMenu,i,o),i.stopPropagation()});n.append("path").attr("data-object","link-line-full").attr("fill","none").attr("stroke","none"),n.append("path").attr("id",i=>`link-path-${pn(i)}`).attr("data-object","link-line").classed("gly-link-line",!0).classed("solid",i=>i.type?i.type===Ee.Solid:!0).classed("dashed",i=>i.type===Ee.Dashed).classed("dotted",i=>i.type===Ee.Dotted).classed("hidden",i=>i.type===Ee.Hidden).style("stroke",i=>i.color??null).style("stroke-width",i=>i.width??null),n.append("path").attr("data-object","link-arrow-head").classed("gly-link-arrow",!0).classed("gly-link-arrow-head",!0).classed("hidden",i=>i.type===Ee.Hidden).style("stroke",i=>i.color??null).style("stroke-width",i=>i.width??null),n.append("path").attr("data-object","link-arrow-tail").classed("gly-link-arrow",!0).classed("gly-link-arrow-tail",!0).classed("hidden",i=>i.type===Ee.Hidden).style("stroke",i=>i.color??null).style("stroke-width",i=>i.width??null),n.append("text").attr("data-object","link-label").classed("gly-link-label",!0).attr("text-anchor","middle").attr("dy","-0.5em").attr("dominant-baseline","central").style("fill",i=>i.color??null).append("textPath").attr("data-object","link-label-path").attr("xlink:href",i=>`#link-path-${pn(i)}`).attr("startOffset","50%").text(i=>i.type!==Ee.Hidden?i.label??"":""),n.attr("opacity",0).transition().duration(this.animationDuration).attr("opacity",1),t.exit().transition().duration(this.animationDuration).attr("opacity",0).remove(),t.attr("opacity",1),t.select("[data-object='link-line']").classed("solid",i=>i.type?i.type===Ee.Solid:!0).classed("dashed",i=>i.type===Ee.Dashed).classed("dotted",i=>i.type===Ee.Dotted).classed("hidden",i=>i.type===Ee.Hidden).style("stroke-width",i=>i.width??null),t.select("[data-object='link-arrow-head']").classed("hidden",i=>i.type===Ee.Hidden).style("stroke-width",i=>i.width??null),t.select("[data-object='link-arrow-tail']").classed("hidden",i=>i.type===Ee.Hidden).style("stroke-width",i=>i.width??null),t.select("[data-object='link-label-path']").text(i=>i.type!==Ee.Hidden?i.label??"":"")}async function I0(e){for(let t in e.nodes){const n=e.nodes[t];await this.templateStore.get(n).then(r=>{n.shape.template=r})}}function D0(e){var t,n,r,i,o,a;for(let s of e){if(s.x||s.y||s.fx||s.fy||(t=s.anchor)!=null&&t.x||(n=s.anchor)!=null&&n.y||(r=s.satellite)!=null&&r.x||(i=s.satellite)!=null&&i.y)continue;if(s.spawn){const u=typeof s.spawn.source=="string"?s.spawn.source:s.spawn.source.id,f=e.find(p=>p.id===u),y={x:(f==null?void 0:f.x)??(f==null?void 0:f.fx)??((o=f==null?void 0:f.anchor)==null?void 0:o.x)??0,y:(f==null?void 0:f.y)??(f==null?void 0:f.fy)??((a=f==null?void 0:f.anchor)==null?void 0:a.y)??0},m=s.spawn.distance,$=s.spawn.angle,_={x:y.x+m*Math.cos($*Math.PI/180-Math.PI/2),y:y.y+m*Math.sin($*Math.PI/180-Math.PI/2)};s.x=_.x,s.y=_.y;continue}const{x:c,y:l}=As(e);s.x=c,s.y=l}}function As(e,t={x:0,y:0}){return e.find(n=>n.x===t.x&&n.y===t.y)?As(e,{x:t.x+1,y:t.y}):t}function pn(e){return e.id||(e.id=Math.random().toString(36).substring(2,34)+Math.random().toString(36).substring(2,34)),e.id?e.id:(typeof e.source=="string"?e.source:e.source.id)+(typeof e.target=="string"?e.target:e.target.id)+e.type+e.directed+e.label+e.strength}function j0(e){const t=Ms(e),n=Rs(e),r=ai(t,n,si(e,t,n,.1)),i={start:t,center:r,end:n};if(i)return`M ${i.start.x} ${i.start.y}Q ${i.center.x}, ${i.center.y} ${i.end.x} ${i.end.y}`}function z0(e){const t=so(e,e.padding??10);if(!t)return;const n=t.start.x>t.end.x,r={x:n?t.end.x:t.start.x,y:n?t.end.y:t.start.y},i={x:n?t.start.x:t.end.x,y:n?t.start.y:t.end.y};return`M ${r.x} ${r.y}Q ${t.center.x}, ${t.center.y} ${i.x} ${i.y}`}function da(e,t=_e.Head){if(!e.directed||t==_e.Head&&e.directed!==!0&&t==_e.Head&&e.directed!=_e.Head&&t==_e.Head&&e.directed!=_e.Both||t==_e.Tail&&e.directed!=_e.Tail&&t==_e.Tail&&e.directed!=_e.Both)return"";const n=e.padding??10,r=so(e,n);if(!r)return;const i=t==_e.Head?Math.atan2(r.end.y-r.center.y,r.end.x-r.center.x):Math.atan2(r.start.y-r.center.y,r.start.x-r.center.x),o=10,a=t==_e.Head?{x:r.end.x+o*Math.cos(i+Math.PI/2),y:r.end.y+o*Math.sin(i+Math.PI/2)}:{x:r.start.x+o*Math.cos(i+Math.PI/2),y:r.start.y+o*Math.sin(i+Math.PI/2)},s=t==_e.Head?{x:r.end.x+o*Math.cos(i),y:r.end.y+o*Math.sin(i)}:{x:r.start.x+o*Math.cos(i),y:r.start.y+o*Math.sin(i)},c=t==_e.Head?{x:r.end.x+o*Math.cos(i-Math.PI/2),y:r.end.y+o*Math.sin(i-Math.PI/2)}:{x:r.start.x+o*Math.cos(i-Math.PI/2),y:r.start.y+o*Math.sin(i-Math.PI/2)};return`M ${a.x} ${a.y}L ${s.x} ${s.y}L ${c.x} ${c.y}`}function V0(e){const t=so(e,e.padding??10);if(t)return t.start.x>t.end.x?"0.5em":"-0.5em"}function Ms(e){return typeof e.source=="string"||typeof e.target=="string"?{x:0,y:0}:Is(e.target,e.source)}function Rs(e){return typeof e.source=="string"||typeof e.target=="string"?{x:0,y:0}:Is(e.source,e.target)}function F0(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function ai(e,t,n){const r=F0(e,t);return{x:r.x+((n==null?void 0:n.x)??0),y:r.y-((n==null?void 0:n.y)??0)}}function si(e,t,n,r){const i=L0(t,n),o=q0(t,n),a=H0(i,o),s=e.curvature!==void 0?e.curvature:r,c=e.curvature!==void 0?1:(e.i??0)+1,l=s*(o/a)*a*c,u=s*(i/a)*a*c;return{x:l,y:u}}function L0(e,t){return t.x-e.x}function q0(e,t){return t.y-e.y}function H0(e,t){return Math.sqrt(e*e+t*t)}function Is(e,t){const n=(t.x??0)-(e.x??0),r=(t.y??0)-(e.y??0);return Math.sqrt(n*n+r*r)===0?{x:e.x??0,y:e.y??0}:{x:n+(e.x??0),y:r+(e.y??0)}}function so(e,t=0){var n,r,i,o;const a=Ms(e),s=Rs(e),c=si(e,a,s,.1);if(typeof e.source=="string"||typeof e.target=="string")return{start:a,end:s,center:c};const l=ai({x:e.source.x??0,y:e.source.y??0},{x:e.target.x??0,y:e.target.y??0},c),u=e.directed===!0||e.directed==_e.Head||e.directed==_e.Both?20:0,f=e.directed==_e.Tail||e.directed==_e.Both?20:0,y=Me("g").append("path").attr("d",`M ${a.x} ${a.y}Q ${l.x}, ${l.y} ${s.x} ${s.y}`).node();if(!y)return{start:a,end:s,center:c};const m=e.source.shape.failed?(n=e.source.forceSimulation)==null?void 0:n.templateStore.errorTemplate.shapeSize:((r=e.source.shape.template)==null?void 0:r.shapeSize)??300,$=e.target.shape.failed?(i=e.target.forceSimulation)==null?void 0:i.templateStore.errorTemplate.shapeSize:((o=e.target.shape.template)==null?void 0:o.shapeSize)??300,_=pa(e.source,e.target,e,!1),p=pa(e.source,e.target,e,!0),h=_||(e.source.shape.scale??1)*((m??300)/2),w=p||(e.target.shape.scale??1)*(($??300)/2),b=y.getAttribute("d").includes("NaN")?0:y.getPointAtLength(h+t+f),v=y.getAttribute("d").includes("NaN")?0:y.getPointAtLength(y.getTotalLength()-w-t-u),O=si(e,b,v,.1),P=ai(b,v,O);return{start:{x:b.x,y:b.y},center:{x:P.x,y:P.y},end:{x:v.x,y:v.y}}}function pa(e,t,n,r=!1){var i,o;const a=Ce("[data-id='"+pn(n)+"']").select("[data-object='link-line-full']").node();if(!a||!a.getPointAtLength||!a.getAttribute("d")||a.getAttribute("d").includes("NaN"))return 0;const s=r?t.shape.bodyPoints??[]:e.shape.bodyPoints??[];if(s.length===0)return 0;const c=a.getTotalLength(),l=r?-((((i=t.shape.template)==null?void 0:i.shapeSize)??300)*(t.shape.scale??1))/20:(((o=e.shape.template)==null?void 0:o.shapeSize)??300)*(e.shape.scale??1)/20;let u=r?c:0,f=a.getPointAtLength(u),y={x:0,y:0};r?y={x:f.x-(t.x??0),y:f.y-(t.y??0)}:y={x:f.x-(e.x??0),y:f.y-(e.y??0)};let m=0;for(;ci(y,s)&&u<=c&&m<30;)m++,u+=l,f=a.getPointAtLength(u),r?y={x:f.x-(t.x??0),y:f.y-(t.y??0)}:y={x:f.x-(e.x??0),y:f.y-(e.y??0)};for(m=0;!ci(y,s)&&u>=0&&m<30;)m++,u=r?u+1:u-1,f=a.getPointAtLength(u),r?y={x:f.x-(t.x??0),y:f.y-(t.y??0)}:y={x:f.x-(e.x??0),y:f.y-(e.y??0)};const $=r?(t.shape.scale??1)/(e.shape.scale??1):1;return(r?c-u:u)*$}function ci(e,t){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r].x,a=t[r].y,s=t[i].x,c=t[i].y,l=a>e.y!=c>e.y&&e.x<(s-o)*(e.y-a)/(c-a)+o;l&&(n=!n)}return n}function ma(e){return Lf().id(n=>n.id).strength(n=>{if(n.strength===void 0)return .3;if(typeof n.strength=="number")return n.strength;switch(n.strength){case or.Strong:return .5;case or.Weak:return .3;case or.Loose:return 0;default:return .3}}).distance(e)}function U0(){return Wf().x(t=>Sr(t).x).strength(t=>Er(t))}function K0(){return Jf().y(t=>Sr(t).y).strength(t=>Er(t))}function ya(e){return Yf().strength(n=>n.gravity?n.gravity:e)}function Sr(e){return e.satellite?{x:e.satellite.x??0,y:e.satellite.y??0}:e.anchor?{x:e.anchor.x??0,y:e.anchor.y??0}:{x:0,y:0}}function Er(e){if(e.satellite)return 6;if(e.anchor)switch(e.anchor.type){case wr.Hard:case wr.Soft:return 2;default:return 0}return 0}function G0(e){const t=this.graph.nodes;var n=gi().x(r=>r.x).y(r=>r.y).addAll(t);t.forEach(r=>{var i;r.x=r.x||0,r.y=r.y||0;var o=(((i=r.shape.template)==null?void 0:i.shapeSize)??300)*r.shape.scale,a=r.x-o,s=r.x+o,c=r.y-o,l=r.y+o;n.visit((u,f,y,m,$)=>{var _,p,h;if(u.data&&u.data!==r){var w=(r.x??0)-u.data.x,b=(r.y??0)-u.data.y,v=Math.sqrt(w*w+b*b);const O=(((_=r.shape.template)==null?void 0:_.shapeSize)??300)*r.shape.scale;B0(r,u.data)&&(((p=r.shape.bodyPoints)==null?void 0:p.length)==0||((h=u.data.shape.bodyPoints)==null?void 0:h.length)==0?v<O&&(v=(v-O)/v*e,r.x=r.x||0,r.y=r.y||0,r.x-=w*=v,r.y-=b*=v,u.data.x+=w,u.data.y+=b):X0(r,u.data)&&(v=(v-O)/v*e,r.x=r.x||0,r.y=r.y||0,r.x-=w*=v,r.y-=b*=v,u.data.x+=w,u.data.y+=b))}return f>s||m<a||y>l||$<c})})}function B0(e,t){var n,r,i,o;const a={x:e.x??0,y:e.y??0},s=(((r=(n=e.shape)==null?void 0:n.template)==null?void 0:r.shapeSize)??300)/2*(e.shape.scale*1.5),c={x:t.x??0,y:t.y??0},l=(((o=(i=t.shape)==null?void 0:i.template)==null?void 0:o.shapeSize)??300)/2*(t.shape.scale*1.5);return Math.sqrt(Math.pow(a.x-c.x,2)+Math.pow(a.y-c.y,2))<s+l}function X0(e,t){const n=(e.shape.bodyPoints??[]).map(i=>({x:i.x-(e.x??0),y:i.y-(e.y??0)})),r=(t.shape.bodyPoints??[]).map(i=>({x:i.x-(t.x??0),y:i.y-(t.y??0)}));for(let i=0;i<n.length;i++){const o={x:n[i].x,y:n[i].y};if(ci(o,r))return!0}return!1}function Z0(){for(let e in this.graph.nodes)this.graph.nodes[e].isDraged||(Y0(this.graph,this.graph.nodes[e]),W0(this.graph.nodes[e]));this.selectionGroups.nodes.selectAll("[data-object='node']").attr("transform",e=>`translate(${e.x??0},${e.y??0})`),this.selectionGroups.links.selectAll("[data-object='link']").call(e=>{e.select("[data-object='link-line-full']").attr("d",j0),e.select("[data-object='link-line']").attr("d",z0),e.select("[data-object='link-arrow-head']").attr("d",a=>da(a,_e.Head)),e.select("[data-object='link-arrow-tail']").attr("d",a=>da(a,_e.Tail)),e.select("[data-object='link-label']").attr("dy",V0)}),this.simulation.force("forceX").x(e=>Sr(e).x).strength(e=>Er(e)),this.simulation.force("forceY").y(e=>Sr(e).y).strength(e=>Er(e)),this.eventStore.emit(se.SimulationTick)}function Y0(e,t){var n,r,i,o;if(!t.satellite)return;if(typeof t.satellite.source=="string"){const l=e.nodes.find(u=>u.id===t.satellite.source);if(!l)return;t.satellite.source=l}const a=t.satellite.distance??400,s=t.satellite.angle??0,c={x:(((r=(n=t.satellite)==null?void 0:n.source)==null?void 0:r.x)??0)+a*Math.cos(s*Math.PI/180-Math.PI/2),y:(((o=(i=t.satellite)==null?void 0:i.source)==null?void 0:o.y)??0)+a*Math.sin(s*Math.PI/180-Math.PI/2)};t.satellite.x=c.x,t.satellite.y=c.y,t.satellite.type===Cs.Hard&&(t.fx=c.x,t.fy=c.y)}function W0(e){e.satellite||e.anchor&&(e.fx=null,e.fy=null,e.anchor.type===wr.Hard&&(e.fx=e.anchor.x,e.fy=e.anchor.y))}function ga(){const e=oh().extent([[0,0],[this.svgElement.clientWidth,this.svgElement.clientHeight]]).scaleExtent([.1,3]).on("zoom",({transform:t})=>Ds.bind(this)(t));return this.svgSelection.call(e).call(e.transform,kr.translate(this.worldTransform.x,this.worldTransform.y).scale(this.worldTransform.k)),this.svgSelection.on("dblclick.zoom",null),e}function Ds(e){if(this.selectionGroups.world.attr("transform",`translate(${e.x}, ${e.y}) scale(${e.k})`),this.worldTransform.k!=e.k){const t=[this.worldTransform.k,e.k].sort();Object.keys(this.onZoomRoutines).forEach(n=>{const r=parseFloat(n);r>t[0]&&r<t[1]&&this.onZoomRoutines[r].forEach(i=>i(e.k))})}this.worldTransform=e,this.eventStore.emit(se.EnvironmentMove,e)}function J0(e,t){if(e.transform)return js.bind(this)(e.transform,t,e.duration);const n=[];e.boundaries&&n.push(va(e.boundaries)),e.nodes&&n.push(Q0(e.nodes)),ey.bind(this)(va(n),t,e.duration,e.padding)}function va(e){let t=e.reduce((o,a)=>Math.min(o,a.x),1/0),n=e.reduce((o,a)=>Math.min(o,a.y),1/0),r=e.reduce((o,a)=>Math.max(o,a.x+a.width),-1/0),i=e.reduce((o,a)=>Math.max(o,a.y+a.height),-1/0);return{x:t,y:n,width:r-t,height:i-n}}function Q0(e){const t=wo(e,a=>a.x),n=wo(e,a=>a.y),r=(t[1]??0)-(t[0]??0),i=(n[1]??0)-(n[0]??0),o=Ys(e.map(a=>{var s;return a.shape.scale*(((s=a.shape.template)==null?void 0:s.shapeSize)??300)}))??0;return{x:(t[0]??0)-o/2,y:(n[0]??0)-o/2,width:r+o,height:i+o}}function js(e,t,n){const r=this.svgElement.clientWidth,i=this.svgElement.clientHeight,o={x:r/2,y:i/2},a={x:-e.x+r/2*(1-e.k)*(e.x/(r/2))+o.x,y:-e.y+i/2*(1-e.k)*(e.y/(i/2))+o.y,k:e.k};ty.bind(this)(a,t,n)}function ey(e,t,n,r){const i=this.svgElement.clientWidth,o=this.svgElement.clientHeight,a=i/o,s=(e.width+(r??0)*2)/(e.height+(r??0)*2),c=a<s?i/(e.width+(r??0)*2):o/(e.height+(r??0)*2),l={x:e.x+e.width/2,y:e.y+e.height/2,k:c};js.bind(this)(l,t,n)}function ty(e,t,n){isNaN(e.x)||isNaN(e.y)||isNaN(e.k)||this.selectionGroups.world.transition().duration(n??1e3).ease($f).attr("transform",`translate(${e.x},${e.y}) scale(${e.k})`).on("end",()=>{t(e)})}function ny(){const e=[],t=[];return this.graph.nodes.forEach(n=>{var r,i,o,a,s,c,l,u;const f={id:n.id,x:n.x,y:n.y,shape:{type:n.shape.type,scale:n.shape.scale,url:n.shape.url},gravity:n.gravity,anchor:{type:((r=n.anchor)==null?void 0:r.type)||"",x:((i=n.anchor)==null?void 0:i.x)||0,y:((o=n.anchor)==null?void 0:o.y)||0},satellite:{source:typeof((a=n.satellite)==null?void 0:a.source)=="string"?n.satellite.source:((c=(s=n.satellite)==null?void 0:s.source)==null?void 0:c.id)||"",angle:((l=n.satellite)==null?void 0:l.angle)||0,distance:((u=n.satellite)==null?void 0:u.distance)||0},payload:n.payload};e.push(f)}),this.graph.links.forEach(n=>{const r={source:typeof n.source=="string"?n.source:n.source.id,target:typeof n.target=="string"?n.target:n.target.id,id:n.id,type:n.type,directed:n.directed,label:n.label,strength:n.strength,padding:n.padding,width:n.width,curvature:n.curvature,payload:n.payload};t.push(r)}),{nodes:e,links:t}}class iy{constructor(t){fe(this,"debug",{enabled:!1,bodyPoints:{enabled:!0,color:"#00ffff"}}),fe(this,"_svgElement"),fe(this,"_svgSelection"),fe(this,"_simulation"),fe(this,"_selectedNodes",[]),fe(this,"_zoom"),fe(this,"worldTransform",{x:0,y:0,k:1}),fe(this,"_onZoomRegister",[]),fe(this,"_onZoomRoutines",{}),fe(this,"animationDuration",300),fe(this,"draggableNodes",!0),fe(this,"selectionGroups"),fe(this,"graph",{nodes:[],links:[]}),fe(this,"templateStore",new b0),fe(this,"nodeDataStore",new S0),fe(this,"eventStore",new Os),fe(this,"theme","light"),fe(this,"themeChangeObserver",new MutationObserver(n=>{n.forEach(r=>{if(r.attributeName==="class"){const o=r.target.classList.contains("dark")?"dark":"light";this.eventStore.emit(se.ThemeChange,o)}})})),t instanceof SVGElement?(this._svgElement=t,this._svgSelection=Ce(t)):(this._svgSelection=t,this._svgElement=t.node()),this.worldTransform={x:this.svgElement.clientWidth/2,y:this.svgElement.clientHeight/2,k:1},this._simulation=this.createSimulation(),this.selectionGroups=this.createWorld(),this._zoom=ga.bind(this)(),this.setEvents()}get svgElement(){return this._svgElement}set svgElement(t){this._svgElement=t,this._svgSelection=Ce(t),this.selectionGroups=this.createWorld(),this._zoom=ga.bind(this)(),this.themeChangeObserver.disconnect(),this.setEvents(),this.render(this.graph)}get svgSelection(){return this._svgSelection}get simulation(){return this._simulation}get selectedNodes(){return this._selectedNodes}set selectedNodes(t){this._selectedNodes=t,this.selectNodes()}get worldBounds(){const{x:t,y:n,k:r}=this.worldTransform;return{x:-(t/r),y:-(n/r),width:this.svgElement.clientWidth/r,height:this.svgElement.clientHeight/r}}set zoomScaleExtent(t){this._zoom.scaleExtent(t)}set zoomEnabled(t){this._zoom.on("zoom",null),t&&this._zoom.on("zoom",({transform:n})=>Ds.bind(this)(n))}get onZoomRegister(){return this._onZoomRegister}get onZoomRoutines(){return this._onZoomRoutines}set envGravity(t){this.simulation.force("gravity",ya(t))}set linkDistance(t){this.simulation.force("link",ma(t))}createSimulation(){return Zf().force("link",ma(400)).force("forceX",U0()).force("forceY",K0()).force("gravity",ya(-1e4)).force("shapeCollide",G0.bind(this)).on("tick",Z0.bind(this)).on("end",()=>{this.eventStore.emit(se.SimulationTickEnd)})}createWorld(){const t=this.svgSelection.append("g").attr("data-object","world"),n=t.append("g").attr("data-object","links"),r=t.append("g").attr("data-object","nodes");return{world:t,nodes:r,links:n}}setEvents(){function t(n){return{x:this.worldBounds.x+n.offsetX/this.worldTransform.k,y:this.worldBounds.y+n.offsetY/this.worldTransform.k}}this.svgSelection.on("click",n=>this.eventStore.emit(se.EnvironmentClick,n,t.bind(this)(n))),this.svgSelection.on("dblclick",n=>this.eventStore.emit(se.EnvironmentDoubleClick,n,t.bind(this)(n))),this.svgSelection.on("contextmenu",n=>this.eventStore.emit(se.EnvironmentContextMenu,n,t.bind(this)(n))),this.themeChangeObserver.observe(this.svgElement,{attributes:!0})}registerOnZoom(t,n,r){this.deregisterOnZoom(t),this._onZoomRegister.push({id:t,threshold:n,callback:r}),this._onZoomRoutines={},this._onZoomRegister.forEach(i=>{this._onZoomRoutines[i.threshold]||(this._onZoomRoutines[i.threshold]=[]),this._onZoomRoutines[i.threshold].push(i.callback)})}deregisterOnZoom(t){this._onZoomRegister=this._onZoomRegister.filter(({id:n})=>n!==t)}selectNodes(){this.selectionGroups.nodes.selectAll(".gly-selectable").classed("gly-selected",!1),this.selectionGroups.nodes.selectAll("[data-object='node']").filter(t=>this.selectedNodes.includes(t.id)).selectAll(".gly-selectable").classed("gly-selected",!0)}async render(t,n=.05,r=!1){this.theme=this.svgElement.classList.contains("dark")?"dark":"light",r&&(this.nodeDataStore.clear(),this.selectionGroups.nodes.selectAll("*").remove(),this.selectionGroups.links.selectAll("*").remove()),this.graph=t,await M0.bind(this)(this.graph).then(()=>{A0(t),R0.bind(this)(this.graph),this.simulation.nodes(this.graph.nodes),this.simulation.force("link").links(t.links),this.simulation.alphaTarget(n).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},100),this.selectNodes()})}exportGraph(){return ny.bind(this)()}moveTo(t){J0.bind(this)(t,n=>{this.svgSelection.call(this._zoom.transform,kr.translate(n.x,n.y).scale(n.k))})}on(t,n){this.eventStore.on(t,n)}}export{wr as AnchorType,_e as ArrowDirection,se as Event,iy as ForceSimulation,or as LinkStrength,Ee as LinkType,Cs as SatelliteType,la as TemplateAPI};
