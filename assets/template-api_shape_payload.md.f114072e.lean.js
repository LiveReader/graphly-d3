import{C as CodePreview}from"./chunks/CodePreview.e0611014.js";import{r as ref,b as onMounted,o as openBlock,c as createElementBlock,d as createVNode,u as unref,a as createStaticVNode}from"./app.c9c0b13e.js";import"./chunks/Graphly.c0ddb1c9.js";import"./chunks/style.cde5958c.js";const _hoisted_1=createStaticVNode("",10),__pageData=JSON.parse('{"title":"Shape Payload","description":"","frontmatter":{"title":"Shape Payload","lang":"en-US"},"headers":[{"level":2,"title":"Example","slug":"example","link":"#example","children":[]},{"level":2,"title":"Playground","slug":"playground","link":"#playground","children":[]}],"relativePath":"template-api/shape_payload.md","lastUpdated":1669168284000}'),__default__={name:"template-api/shape_payload.md"},_sfc_main=Object.assign(__default__,{setup(__props){let graph=ref({nodes:[],links:[],hasUpdate:!1}),editorContent=["payload: {",'	title: "Hello\\nWorld",','	color: "teal",',"},"].join(`
`),codeContent=s=>["let graph = {","	nodes: [","		{",'			id: "node1",',"			shape: {",'				type: "hexagon",',"				scale: 1,","			},","			anchor: {",'				type: "soft",',"				x: 0,","				y: 0,","			},"].join(`
`)+s+["		},","	],","	links: []","}"].join(`
`);function editorContentChange(s){newGraph=parseGraph(codeContent(s)),lastChange=Date.now(),changes=!0}function parseGraph(code){var constructorCode=code+`
graph;`;const value=eval(constructorCode);return value}let changes=!1,lastChange=Date.now(),newGraph={nodes:[],links:[]};function updateGraph(s){graph.value.nodes=s.nodes,graph.value.links=s.links,graph.value.hasUpdate=!0}return onMounted(()=>{const s=parseGraph(codeContent(editorContent));updateGraph(s),setInterval(()=>{changes&&Date.now()-lastChange>1e3&&(updateGraph(newGraph),changes=!1)},100)}),(s,a)=>(openBlock(),createElementBlock("div",null,[_hoisted_1,createVNode(CodePreview,{graph:unref(graph),"editor-language":"javascript","editor-content":unref(editorContent),onEditorContentChange:editorContentChange},null,8,["graph","editor-content"])]))}});export{__pageData,_sfc_main as default};
